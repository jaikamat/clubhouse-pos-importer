(this["webpackJsonpclubhouse-pos-importer"]=this["webpackJsonpclubhouse-pos-importer"]||[]).push([[0],{26:function(e,t){var a="development"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_ENVIRONMENT?"_test":"",n={GET_CARDS_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByTitle".concat(a),GET_CARD_QTY_FROM_INVENTORY:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsFromInventory".concat(a),FINISH_SALE:"https://us-central1-clubhouse-collection.cloudfunctions.net/finishSale".concat(a),ADD_CARD_TO_INVENTORY:"https://us-central1-clubhouse-collection.cloudfunctions.net/addCardToInventory".concat(a),GET_INVENTORY_QUERY:"https://us-central1-clubhouse-collection.cloudfunctions.net/inventorySearchQuery".concat(a),GET_SALES_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getSales".concat(a),GET_SCRYFALL_BULK_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getScryfallBulkCardsByTitle".concat(a),GET_CARDS_BY_FILTER:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByFilter".concat(a),GET_SET_NAMES:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByFilter".concat(a,"/set_names"),SUSPEND_SALE:"https://us-central1-clubhouse-collection.cloudfunctions.net/suspendSale".concat(a),LOGIN:"https://us-central1-clubhouse-collection.cloudfunctions.net/getJwt".concat(a),SCRYFALL_AUTOCOMPLETE:"https://api.scryfall.com/cards/autocomplete",SCRYFALL_SEARCH:"https://api.scryfall.com/cards/search",SCRYFALL_ID_SEARCH:"https://api.scryfall.com/cards/"};e.exports=n},265:function(e,t,a){e.exports=a.p+"static/media/magic-ball.c3fcddd6.png"},279:function(e,t,a){e.exports=a(467)},284:function(e,t,a){},416:function(e,t,a){},467:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(49),c=a.n(l),o=(a(284),a(16)),i=a(21),s=a(17),u=a(18),m=a(19),d=a(52),h=a(70),p=a(8),f=a.n(p),E=a(22),b=a(23),v=a(484),g=a(33),y=a.n(g),C=a(25),S=a.n(C);function O(){return{Authorization:"Bearer ".concat(localStorage.getItem("clubhouse_JWT"))}}var x=a(26),w=a(55),k=a.n(w);function j(e){var t=Object(n.useState)(!1),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),i=Object(b.a)(o,2),s=i[0],u=i[1],m=function(){var t=Object(E.a)(f.a.mark((function t(a,n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.result,setTimeout((function(){return k()("#searchBar").select()}),10),t.prev=2,c(!0),t.next=6,e.handleSearchSelect(r.title);case 6:c(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(v.a,{onSearchChange:y.a.debounce((function(e,t){var a=t.value;if(a.length<1)return c(!1),void u([]);a.length<3||(c(!0),setTimeout(Object(E.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(x.SCRYFALL_AUTOCOMPLETE,"?q=").concat(a),{headers:O()});case 2:t=e.sent,n=t.data,r=n.data.map((function(e){return{title:e}})).slice(0,7),u(r),c(!1);case 7:case"end":return e.stop()}}),e)}))),100))}),500,{leading:!1,trailing:!0}),onResultSelect:m,loading:l,results:s,placeholder:"Search for a card",selectFirstResult:!0,id:"searchBar",onFocus:function(e){return e.target.select()},onBlur:e.onBlur})}var L=a(32),I=a(492),F=a(482),_=a(101),T=a(481),N=a(475),P=a(476),D=a(468);function B(e){var t=0,a=0;return e&&(t=(e.FOIL_NM||0)+(e.FOIL_LP||0)+(e.FOIL_MP||0)+(e.FOIL_HP||0),a=(e.NONFOIL_NM||0)+(e.NONFOIL_LP||0)+(e.NONFOIL_MP||0)+(e.NONFOIL_HP||0)),[t,a]}function R(e){var t=B(e.inventoryQty),a=Object(b.a)(t,2),n=a[0],l=a[1],c={};n>0&&(c.color="blue");var o={};return l>0&&(o.color="blue"),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,Object.assign({},c,{image:!0}),"Foil",r.a.createElement(_.a.Detail,null,n)),r.a.createElement(_.a,Object.assign({},o,{image:!0}),"Nonfoil",r.a.createElement(_.a.Detail,null,l)))}var A=a(485),M=a(266),H=function(e){var t=e.color,a=e.header,n=e.message,l=e.duration,c=void 0===l?2e3:l;return M.a.notify((function(){return r.a.createElement(A.a,{color:t,compact:!0},r.a.createElement(A.a.Header,null,a),n)}),{position:"bottom-right",duration:c})},Y=a(267),q={boxShadow:"2px 2px 5px 0 rgba(0,0,0,.25)",zIndex:"10",transition:"all .2s ease-in-out"},Q=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={hovered:!1},a.mouseOver=function(){a.setState({hovered:!0})},a.mouseOut=function(){a.setState({hovered:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.image_uris,a=e.card_faces,n=e.hover,l=void 0===n||n;try{return r.a.createElement(Y.a,{src:t.normal,size:"tiny",style:Object(L.a)({},q,{transform:"".concat(this.state.hovered?"scale(1.75)":"scale(1)")}),onMouseOver:l?this.mouseOver:null,onMouseOut:l?this.mouseOut:null})}catch(c){return r.a.createElement(Y.a,{src:a[0].image_uris.normal,size:"tiny",style:Object(L.a)({},q,{transform:"".concat(this.state.hovered?"scale(1.75)":"scale(1)")}),onMouseOver:l?this.mouseOver:null,onMouseOut:l?this.mouseOut:null})}}}]),t}(r.a.Component),G=function(e){var t=e.num,a=Number(t).toFixed(2);return isNaN(a)?r.a.createElement("span",null,"$0.00"):r.a.createElement("span",null,"$",a)},U=a(76),z={backgroundColor:"#ffcfdf",backgroundImage:"linear-gradient(90deg, #ffcfdf 0%, #b0f3f1 74%)"};function V(e){var t=e.id,a=e.finish,l=Object(n.useState)(null),c=Object(b.a)(l,2),o=c[0],i=c[1],s=Object(n.useState)(!1),u=Object(b.a)(s,2),m=u[0],d=u[1];return Object(n.useEffect)((function(){!function(){var e=Object(E.a)(f.a.mark((function e(){var n,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,S.a.get("".concat(x.SCRYFALL_ID_SEARCH).concat(t),{headers:O()});case 3:n=e.sent,r=n.data,l="usd","FOIL"===a&&(l+="_foil"),i(Number(r.prices[l])),d(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,a]),r.a.createElement(_.a,{tag:!0,style:"FOIL"===a?z:null},m?r.a.createElement(U.a,{loading:!0,name:"spinner"}):r.a.createElement("span",null,"Est. ",o?r.a.createElement(G,{num:o}):"not found"))}var W=[{key:"NONFOIL",text:"Nonfoil",value:"NONFOIL"},{key:"FOIL",text:"Foil",value:"FOIL"}],J=[{key:"NM",text:"Near Mint",value:"NM"},{key:"LP",text:"Light Play",value:"LP"},{key:"MP",text:"Moderate Play",value:"MP"},{key:"HP",text:"Heavy Play",value:"HP"}];function X(e,t){return!e&&t?{selectedFinish:"FOIL",finishDisabled:!0}:e&&!t?{selectedFinish:"NONFOIL",finishDisabled:!0}:e&&t?{selectedFinish:"NONFOIL",finishDisabled:!1}:void 0}var K=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={quantity:0,selectedFinish:X(a.props.nonfoil,a.props.foil).selectedFinish,selectedCondition:"NM",finishDisabled:X(a.props.nonfoil,a.props.foil).finishDisabled,submitDisable:!1,inventoryQty:a.props.inventoryQty,submitLoading:!1},a.handleFinishChange=function(e,t){var n=t.value;a.setState({selectedFinish:n},(function(){console.log(a.state)}))},a.handleConditionChange=function(e,t){var n=t.value;a.setState({selectedCondition:n},(function(){console.log(a.state)}))},a.handleQuantityChange=function(e,t){var n=t.value,r=parseInt(n),l=isNaN(r)?"":r;a.setState({quantity:l})},a.handleFocus=function(){0===a.state.quantity&&a.setState({quantity:""})},a.handleBlur=function(){""===a.state.quantity&&a.setState({quantity:0})},a.handleInventoryAdd=function(){var e=Object(E.a)(f.a.mark((function e(t,n){var r,l,c,o,i,s,u,m,d,h,p;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.value,r=a.state,l=r.quantity,c=r.selectedFinish,o=r.selectedCondition,i=a.props,s=i.name,u=i.nonfoil,m=i.foil,d="".concat(c,"_").concat(o),e.prev=4,a.setState({submitDisable:!0,submitLoading:!0}),e.next=8,S.a.post(x.ADD_CARD_TO_INVENTORY,{quantity:l,type:d,cardInfo:Object(L.a)({},a.props)},{headers:O()});case 8:h=e.sent,p=h.data,H({color:"green",header:"".concat(l,"x ").concat(s," ").concat(l>0?"added":"removed","!"),duration:2e3}),a.setState({quantity:0,selectedFinish:X(u,m).selectedFinish,selectedCondition:"NM",finishDisabled:X(u,m).finishDisabled,submitDisable:!1,inventoryQty:p.qoh,submitLoading:!1}),k()("#searchBar").focus().select(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.selectedFinish,a=e.selectedCondition,n=e.finishDisabled,l=e.quantity,c=e.submitDisable,o=e.inventoryQty,i=e.submitLoading,s=this.props,u=s.image_uris,m=s.name,d=s.set_name,h=s.set,p=s.rarity,f=s.card_faces,E=s.id;return r.a.createElement(I.a,null,r.a.createElement(F.a.Group,{divided:!0},r.a.createElement(F.a,null,r.a.createElement(F.a.Image,{size:"tiny"},r.a.createElement(Q,{image_uris:u,card_faces:f})),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,{as:"h3"},m," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(h," ss-").concat(p),style:{fontSize:"30px"}}),r.a.createElement(_.a,{color:"grey"},d," (",String(h).toUpperCase(),")"),r.a.createElement(R,{inventoryQty:o})," ",r.a.createElement(V,{id:E,finish:t})),r.a.createElement(F.a.Description,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Field,{control:N.a,type:"number",label:"Quantity",value:l,onChange:this.handleQuantityChange,onFocus:this.handleFocus,onBlur:this.handleBlur}),r.a.createElement(T.a.Field,{label:"Finish",control:P.a,value:t,options:W,disabled:n,onChange:this.handleFinishChange}),r.a.createElement(T.a.Field,{label:"Condition",control:P.a,value:a,options:J,onChange:this.handleConditionChange}),r.a.createElement(T.a.Button,{label:"Add to Inventory?",control:D.a,primary:!0,disabled:0===l||""===l||c,onClick:this.handleInventoryAdd,loading:i},"Submit"))))))))}}]),t}(n.Component);var $=function(e){return e.cards.map((function(t){return r.a.createElement(K,Object.assign({showImage:e.showImages,key:t.id},t,{inventoryQty:e.quantities[t.id]}))}))},Z=a(488),ee=a(477),te=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchResults:[],inventoryQuantities:[],showImages:!0},a.handleSearchSelect=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r,l,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get(x.GET_SCRYFALL_BULK_BY_TITLE,{params:{title:t},headers:O()});case 3:return n=e.sent,r=n.data,l=r.map((function(e){return e.id})),e.next=8,S.a.post(x.GET_CARD_QTY_FROM_INVENTORY,{scryfallIds:l},{headers:O()});case 8:c=e.sent,a.setState({searchResults:r,inventoryQuantities:c.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a.handleImageToggle=function(){a.setState({showImages:!a.state.showImages})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.searchResults;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{handleSearchSelect:this.handleSearchSelect}),r.a.createElement(Z.a,{as:"h2"},"Manage Inventory"),r.a.createElement(ee.a,null),!e.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("em",null,'"Searching the future for answers often leads to further questions."'))),r.a.createElement($,{showImages:this.state.showImages,cards:this.state.searchResults,quantities:this.state.inventoryQuantities}))}}]),t}(r.a.Component),ae=a(36),ne=a(490),re=a(480),le=a(30),ce=a(102);function oe(e,t){var a=y.a.pickBy(e,(function(e){return e>0}));return Object.entries(a).map((function(e){var a=Object(b.a)(e,2),n=a[0],r=a[1];return{text:"".concat(n.split("_").join(" | ")," | Qty: ").concat(r),value:n,key:"".concat(t).concat(n)}}))}function ie(e){var t=y.a.pickBy(e,(function(e){return e>0})),a=y.a.keys(t).map((function(e){return e.split("_")[0]}));return y.a.uniq(a).indexOf("NONFOIL")>-1?"NONFOIL":"FOIL"}var se=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedFinishCondition:"",selectedFinishConditionQty:0,quantityToSell:0,price:0,selectedFinish:ie(a.props.qoh),conditionOptions:oe(a.props.qoh,a.props.id)},a.handleQuantityChange=function(e,t){var n=t.value,r=a.state.selectedFinishConditionQty,l=parseInt(n);l>r&&(l=r),(isNaN(l)||l<0)&&(l=0),a.setState({quantityToSell:l})},a.handleSelectedFinishCondition=function(e,t){var n=t.value;a.setState({selectedFinishCondition:n,selectedFinishConditionQty:a.props.qoh[n],selectedFinish:n.split("_")[0]})},a.handlePriceChange=function(e,t){var n=t.value,r=Number(n);(isNaN(r)||r<0)&&(r=0),a.setState({price:r})},a.handleFocus=function(e){0===a.state[e]&&a.setState(Object(le.a)({},e,""))},a.handleBlur=function(e){""===a.state[e]&&a.setState(Object(le.a)({},e,0))},a.handleAddToSale=function(){var e=a.state,t=e.selectedFinishCondition,n=e.quantityToSell,r=e.price,l=a.props,c=l.qoh,o=l.id;a.props.addToSaleList(Object(L.a)({},a.props),t,n,r),a.setState({selectedFinishCondition:"",selectedFinishConditionQty:0,quantityToSell:0,price:0,conditionOptions:oe(c,o),selectedFinish:ie(c)}),k()("#searchBar").focus().select()},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.image_uris,l=t.set,c=t.set_name,o=t.rarity,i=t.qoh,s=t.id,u=t.card_faces,m=this.state,d=m.selectedFinishCondition,h=m.selectedFinishConditionQty,p=m.selectedFinish,f=m.conditionOptions,E=m.quantityToSell,b=m.price;return r.a.createElement(I.a,null,r.a.createElement(F.a.Group,{divided:!0},r.a.createElement(F.a,null,r.a.createElement(F.a.Image,{size:"tiny"},r.a.createElement(Q,{image_uris:n,card_faces:u})),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,{as:"h3"},a," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(l," ss-").concat(o),style:{fontSize:"30px"}}),r.a.createElement(_.a,{color:"grey"},c," (",String(l).toUpperCase(),")"),r.a.createElement(R,{inventoryQty:i})," ",r.a.createElement(V,{id:s,finish:p})),r.a.createElement(F.a.Description,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Field,{control:ce.a,selection:!0,placeholder:"Select inventory",options:f,value:d,label:"Select finish/condition",onChange:this.handleSelectedFinishCondition}),r.a.createElement(T.a.Field,{control:N.a,type:"number",label:"Quantity to sell",value:E,onChange:this.handleQuantityChange,disabled:!h,onFocus:function(){return e.handleFocus("quantityToSell")},onBlur:function(){return e.handleBlur("quantityToSell")}}),r.a.createElement(T.a.Field,{control:N.a,type:"number",label:"Price",value:b,onChange:this.handlePriceChange,disabled:!h,onFocus:function(){return e.handleFocus("price")},onBlur:function(){return e.handleBlur("price")},step:.5}),r.a.createElement(T.a.Button,{label:"Add to sale?",control:D.a,primary:!0,onClick:this.handleAddToSale,disabled:!E},"Sell"))))))))}}]),t}(r.a.Component);function ue(e){var t=e.cards,a=e.addToSaleList;return t.map((function(e){return r.a.createElement(se,Object.assign({key:e.id},e,{addToSaleList:a}))}))}var me=function(e){var t=e.saleList,a=t.length?t.reduce((function(e,t){return e+parseInt(t.qtyToSell)*Number(t.price)}),0):0;return r.a.createElement(G,{num:a})},de=a(483);function he(e){var t=e.name,a=e.set,l=e.finishCondition,c=e.qtyToSell,o=e.price,i=e.rarity,s=e.deleteLineItem,u=e.id,m=Object(n.useState)(!1),d=Object(b.a)(m,2),h=d[0],p=d[1];return r.a.createElement(de.a.Row,null,r.a.createElement(de.a.Cell,null,r.a.createElement("h4",null,t)),r.a.createElement(de.a.Cell,{singleLine:!0},r.a.createElement("i",{className:"ss ss-fw ss-".concat(a," ss-").concat(i),style:{fontSize:"20px"}}),r.a.createElement(_.a,{color:"grey"},a.toUpperCase())),r.a.createElement(de.a.Cell,null,c,"x @ ",r.a.createElement(G,{num:o})," | ",l),r.a.createElement(de.a.Cell,null,r.a.createElement(D.a,{icon:"cancel",circular:!0,onClick:function(){return s(u,l)},onMouseOver:function(){return p(!0)},onMouseOut:function(){return p(!1)},color:h?"red":null})))}var pe=function(e){var t=e.saleList,a=e.removeFromSaleList;return r.a.createElement(de.a,null,r.a.createElement(de.a.Body,null,t.map((function(e){return r.a.createElement(he,Object.assign({},e,{key:"".concat(e.id).concat(e.finishCondition).concat(e.qtyToSell),deleteLineItem:a}))}))))},fe=(a(416),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={printClicked:!1},a.print=function(){a.setState({printClicked:!0},(function(){window.print(),a.setState({printClicked:!1})}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.saleListCards,t=this.state.printClicked;return e.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{style:{display:"inline-block",float:"right"},onClick:this.print,icon:!0},r.a.createElement(U.a,{name:"print"})),r.a.createElement("div",{id:"printme",style:{display:t?"inline-block":"none"}},r.a.createElement("ul",null,e.map((function(e){return function(e){var t=e.id,a=e.name,n=e.qtyToSell,l=e.finishCondition,c=e.set_name,o=e.price;return r.a.createElement("li",{key:t},r.a.createElement("b",null,a," | x",n," | ",l," | ",c," | ",r.a.createElement(G,{num:o})))}(e)}))),r.a.createElement("span",null,r.a.createElement("b",null,"Subtotal: ",r.a.createElement(me,{saleList:e}))))):null}}]),t}(r.a.Component));function Ee(e){var t=["W","U","B","R","G","MULTI","COLORLESS","LAND"];function a(e){var t=null,a=null,n=null;try{a=e.colors.length,n=e}catch(r){try{a=e.card_faces[0].colors.length,n=e.card_faces[0]}catch(r){a=e.colors.length,n=e}}return 0===a?t="COLORLESS":1===a?t=n.colors[0]:a>1&&(t="MULTI"),"COLORLESS"===t&&n.type_line.includes("Land")&&(t="LAND"),t||(t="LAND"),t}return e.sort((function(e,t){return e.name.localeCompare(t.name)})).sort((function(e,n){return t.indexOf(a(e))-t.indexOf(a(n))}))}var be=a(53);function ve(){var e=Object(d.a)(["\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.2);\n    float: right;\n"]);return ve=function(){return e},e}function ge(){var e=Object(d.a)(["\n    margin-top: 0px;\n    margin-bottom: 0px;\n"]);return ge=function(){return e},e}function ye(){var e=Object(d.a)(["\n    border-left: 1px solid rgba(0, 0, 0, 0.2);\n    height: 100%;\n"]);return ye=function(){return e},e}var Ce=be.a.div(ye()),Se=be.a.div(ge()),Oe=be.a.p(ve());function xe(e){var t=e.restoreSale,a=e.deleteSuspendedSale,l=e.saleListLength,c=e.suspendSale,o=e.id,i=Object(n.useState)([]),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),h=Object(b.a)(d,2),p=h[0],v=h[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),C=y[0],O=y[1],w=Object(n.useState)(""),k=Object(b.a)(w,2),j=k[0],L=k[1],I=Object(n.useState)(""),F=Object(b.a)(I,2),_=F[0],N=F[1],P=Object(n.useState)(!1),B=Object(b.a)(P,2),R=B[0],M=B[1],H=Object(n.useState)({suspendBtn:!1,restoreBtn:!1,deleteBtn:!1}),Y=Object(b.a)(H,2),q=Y[0],Q=Y[1],G=function(){var e=Object(E.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(x.SUSPEND_SALE);case 2:t=e.sent,a=t.data,m(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){L(""),N(""),v("")};Object(n.useEffect)((function(){G()}),[o]);var z=r.a.createElement(D.a,{style:{display:"inline-block",float:"right"},onClick:function(){return O(!0)},icon:"ellipsis horizontal"}),V=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),Q({suspendBtn:!0}),e.next=4,c({customerName:j,notes:_});case 4:return O(!1),e.next=7,G();case 7:U(),M(!1),Q({suspendBtn:!1});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),Q({restoreBtn:!0}),e.next=4,t(p);case 4:O(!1),U(),M(!1),Q({restoreBtn:!1});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),Q({deleteBtn:!0}),e.next=4,a();case 4:O(!1),U(),M(!1),Q({deleteBtn:!1});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{trigger:z,open:C},r.a.createElement(re.a.Header,null,"Sales menu"),r.a.createElement(re.a.Content,null,r.a.createElement(ne.a,{columns:2,stackable:!0,relaxed:"very"},l>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a.Column,{width:"7"},r.a.createElement("h3",null,"Suspend Sale"),r.a.createElement(T.a,null,r.a.createElement(Se,null,r.a.createElement(T.a.Input,{label:"Customer Name",placeholder:"Jace, the Mind Sculptor",value:j,onChange:function(e,t){var a=t.value;return L(a.substring(0,50))}})),r.a.createElement(Se,null,r.a.createElement(Oe,null,j.length,"/50")),r.a.createElement(Se,null,r.a.createElement(T.a.TextArea,{label:"Notes",placeholder:"Sometimes, I forget things...",value:_,onChange:function(e,t){var a=t.value;return N(a.substring(0,150))}})),r.a.createElement(Se,null,r.a.createElement(Oe,null,_.length,"/150")),r.a.createElement(T.a.Button,{primary:!0,disabled:R||!j,loading:q.suspendBtn,onClick:V},"Suspend Sale"))),r.a.createElement(ne.a.Column,{width:"1"},r.a.createElement(Ce,null))),r.a.createElement(ne.a.Column,{width:"7"},r.a.createElement("h3",null,"Restore Sale"),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Select,{fluid:!0,label:"Previously suspended sales",options:u.map((function(e){return{key:e._id,text:e.name,value:e._id}})),placeholder:"Select a sale",onChange:function(e,t){var a=t.value;return v(a)}}),r.a.createElement(T.a.Button,{primary:!0,disabled:R||!p,loading:q.restoreBtn,onClick:W},"Restore Sale"))),0===u.length&&r.a.createElement(A.a,{info:!0},r.a.createElement(A.a.Header,null,"No sales"),"Suspend a sale first")))),r.a.createElement(re.a.Actions,null,!!o&&r.a.createElement(D.a,{color:"red",disabled:R,loading:q.deleteBtn,onClick:J},"Delete current Sale"),r.a.createElement(D.a,{primary:!0,disabled:R,onClick:function(){return O(!1)}},"Cancel"))))}var we={searchResults:[],saleListCards:[],showModal:!1,submitLoading:!1,submitDisabled:!1,searchTerm:"",suspendedSale:{_id:"",name:"",notes:"",list:[]}},ke=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=we,a.handleResultSelect=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get(x.GET_CARDS_BY_TITLE,{params:{title:t},headers:O()});case 3:n=e.sent,r=n.data,a.setState({searchResults:r,searchTerm:t}),0===r.length&&k()("#searchBar").focus().select(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.addToSaleList=function(e,t,n,r){var l=Object(L.a)({},e,{finishCondition:t,qtyToSell:n,price:r}),c=Object(ae.a)(a.state.saleListCards),o=c.findIndex((function(e){return e.id===l.id&&e.finishCondition===t}));-1!==o?c.splice(o,1,l):c.push(l);var i=Ee(c);a.setState({saleListCards:i})},a.removeFromSaleList=function(e,t){var n=y.a.reject(Object(ae.a)(a.state.saleListCards),(function(a){return a.id===e&&a.finishCondition===t}));a.setState({saleListCards:n})},a.restoreSale=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get("".concat(x.SUSPEND_SALE,"/").concat(t));case 3:n=e.sent,r=n.data,a.setState({saleListCards:r.list,suspendedSale:r}),H({color:"green",header:"You are viewing ".concat(r.name,"'s sale")}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.response),H({color:"red",header:"Error"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),a.suspendSale=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r,l,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.customerName,r=t.notes,l=a.state.suspendedSale._id,e.prev=2,!l){e.next=6;break}return e.next=6,S.a.delete("".concat(x.SUSPEND_SALE,"/").concat(l));case 6:return e.next=8,S.a.post(x.SUSPEND_SALE,{customerName:n,notes:r,saleList:a.state.saleListCards});case 8:c=e.sent,o=c.data,a.setState(we),H({color:"green",header:"".concat(o.ops[0].name,"'s sale was suspended")}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),console.log(e.t0.response),H({color:"red",header:"Error",message:"".concat(e.t0.response.data)});case 18:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t){return e.apply(this,arguments)}}(),a.deleteSuspendedSale=Object(E.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.suspendedSale,n=t._id,r=t.name,e.next=4,S.a.delete("".concat(x.SUSPEND_SALE,"/").concat(n));case 4:a.setState(we),H({color:"green",header:"".concat(r,"'s sale was deleted")}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response),H({color:"red",header:"Error"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.finalizeSale=Object(E.a)(f.a.mark((function e(){var t,n,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state.suspendedSale._id,e.prev=1,a.setState({submitLoading:!0,submitDisabled:!0}),!t){e.next=6;break}return e.next=6,S.a.delete("".concat(x.SUSPEND_SALE,"/").concat(t));case 6:return e.next=8,S.a.post(x.FINISH_SALE,{cards:a.state.saleListCards},{headers:O()});case 8:n=e.sent,r=n.data,l=r.sale_data.Sale.saleID,H({color:"green",header:"Sale created in Lightspeed!",message:"The id number is #".concat(l)}),a.setState(we),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(1),H({color:"red",header:"Error",message:"Sale was not created"}),a.setState(we),console.log(e.t0.response);case 20:case"end":return e.stop()}}),e,null,[[1,15]])}))),a.closeModal=function(){a.setState({showModal:!1})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.searchResults,n=t.saleListCards,l=t.showModal,c=t.submitLoading,o=t.submitDisabled,i=t.searchTerm,s=t.suspendedSale,u=r.a.createElement(D.a,{floated:"right",primary:!0,onClick:function(){return e.setState({showModal:!0})}},"Finalize sale");return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a.Row,{style:{display:"flex",alignItems:"center"}},r.a.createElement(j,{handleSearchSelect:this.handleResultSelect})),r.a.createElement("br",null),r.a.createElement(ne.a,{stackable:!0},r.a.createElement(ne.a.Row,null,r.a.createElement(ne.a.Column,{width:"11"},r.a.createElement(Z.a,{as:"h2",style:{display:"inline-block"}},"Inventory"),r.a.createElement(ee.a,null),!a.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("span",null,i&&!a.length?r.a.createElement("p",null,"Zero results for ",r.a.createElement("em",null,i)):r.a.createElement("p",null,"Search for inventory to sell")))),r.a.createElement(ue,{cards:a,addToSaleList:this.addToSaleList})),r.a.createElement(ne.a.Column,{width:"5"},r.a.createElement(Z.a,{as:"h2",style:{display:"inline-block"}},""===s.name?"Sale Items":"".concat(s.name,"'s Items")),r.a.createElement(xe,{restoreSale:this.restoreSale,suspendSale:this.suspendSale,saleListLength:n.length,deleteSuspendedSale:this.deleteSuspendedSale,id:this.state.suspendedSale._id}),r.a.createElement(fe,{saleListCards:n}),r.a.createElement(ee.a,null),0===n.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"plus"}),"View and manage customer sale list here")),n.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{removeFromSaleList:this.removeFromSaleList,saleList:n})),n.length>0&&r.a.createElement(I.a,{clearing:!0},r.a.createElement(Z.a,{floated:"left"},r.a.createElement(Z.a,{sub:!0},"Subtotal"),r.a.createElement(me,{saleList:n})),r.a.createElement(re.a,{basic:!0,open:l,trigger:u},r.a.createElement(re.a.Content,null,r.a.createElement(Z.a,{inverted:!0,as:"h2"},"Finalize this sale?"),r.a.createElement("p",null,"Click 'Yes' to create a sale in Lightspeed. Ensure that you have all cards pulled and double-checked the customer list. Undoing this action will require manual data entry!")),r.a.createElement(re.a.Actions,null,r.a.createElement(D.a,{basic:!0,color:"red",inverted:!0,onClick:this.closeModal},r.a.createElement(U.a,{name:"remove"})," No"),r.a.createElement(D.a,{color:"green",inverted:!0,onClick:this.finalizeSale,loading:c,disabled:o},r.a.createElement(U.a,{name:"checkmark"})," Yes"))))))))}}]),t}(r.a.Component),je=a(261),Le=a.n(je),Ie=function(e){var t=e.saleData,a=e.cardList.reduce((function(e,t){return e+t.qtyToSell}),0);return r.a.createElement(de.a.Row,null,r.a.createElement(de.a.Cell,null,t.saleID),r.a.createElement(de.a.Cell,null,Le()(t.createTime).format("MM/DD/YYYY - h:mm A")),r.a.createElement(de.a.Cell,null,a))},Fe=function(e){var t=e.list;return r.a.createElement(de.a,{celled:!0,unstackable:!0,compact:!0},r.a.createElement(de.a.Header,null,r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,null,"Sale ID"),r.a.createElement(de.a.HeaderCell,null,"Date of Sale"),r.a.createElement(de.a.HeaderCell,null,"Quantity Sold"))),r.a.createElement(de.a.Body,null,t.map((function(e){var t=e.sale_data,a=e.card_list,n=e._id;return r.a.createElement(Ie,{saleData:t,cardList:a,key:n})}))))},_e=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={salesList:[],cardName:""},a.handleSearchSelect=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(x.GET_SALES_BY_TITLE,{params:{cardName:t},headers:O()});case 2:n=e.sent,r=n.data,a.setState({salesList:r,cardName:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.salesList,a=e.cardName;return r.a.createElement("div",null,r.a.createElement(j,{handleSearchSelect:this.handleSearchSelect}),r.a.createElement(Z.a,{as:"h2"},"Browse Sales"),r.a.createElement(ee.a,null),r.a.createElement("span",null,r.a.createElement("em",null,""!==a&&r.a.createElement("h4",null,t.length," results for ",a))),r.a.createElement(Fe,{list:t}))}}]),t}(n.Component);function Te(){var e=Object(d.a)(["\n    width: 300px;\n    height: 418.3px;\n    box-shadow: 2px 2px 5px 0 rgba(0, 0, 0, 0.25);\n    background: repeating-linear-gradient(45deg, #bfbfbf, #bfbfbf 10px, #b0b0b0 10px, #b0b0b0 20px);\n    border-radius: 15px;\n"]);return Te=function(){return e},e}function Ne(){var e=Object(d.a)(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    margin: 5px;\n"]);return Ne=function(){return e},e}function Pe(){var e=Object(d.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 5px;\n    background-color: rgba(0, 0, 0, 0.9);\n    border-radius: 10px 10px 10px 10px;\n    box-shadow: 2px 2px 5px 0 rgba(0, 0, 0, 0.25);\n"]);return Pe=function(){return e},e}function De(){var e=Object(d.a)(["\n    display: inline-block;\n    margin: 10px 10px 10px 10px;\n"]);return De=function(){return e},e}var Be=be.a.div(De()),Re=be.a.div(Pe()),Ae=be.a.div(Ne()),Me=be.a.div(Te());function He(e){var t,a=e.image_uris,n=e.card_faces,l=e.qoh,c=e.id;try{t=r.a.createElement(Y.a,{src:a.normal,size:"medium",style:{borderRadius:"15px"}})}catch(h){t=r.a.createElement(Y.a,{src:n[0].image_uris.normal,size:"medium",style:{borderRadius:"15px"}})}var o=B(l),i=Object(b.a)(o,2),s=i[0],u=i[1],m=r.a.createElement(Ae,null,r.a.createElement(_.a,{color:"blue",image:!0},"Foil",r.a.createElement(_.a.Detail,null,s)),r.a.createElement(V,{id:c,finish:"FOIL"})),d=r.a.createElement(Ae,null,r.a.createElement(_.a,{color:"blue",image:!0},"Nonfoil",r.a.createElement(_.a.Detail,null,u)),r.a.createElement(V,{id:c}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,null,r.a.createElement(Me,null,t),r.a.createElement(Re,null,s>0?m:null,u>0?d:null)))}var Ye={display:"flex",flexWrap:"wrap",alignContent:"space-evenly",height:"100%"};function qe(e){var t=e.cards,a=e.addToSaleList;return r.a.createElement(ne.a,{style:Ye},t.map((function(e){return r.a.createElement(He,Object.assign({key:e.id},e,{addToSaleList:a}))})))}var Qe={searchResults:[],saleListCards:[],searchTerm:""},Ge=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=Qe,a.handleResultSelect=function(){var e=Object(E.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get(x.GET_CARDS_BY_TITLE,{params:{title:t}});case 3:n=e.sent,r=n.data,a.setState({searchResults:r,searchTerm:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.searchResults,a=e.searchTerm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne.a.Row,{style:{display:"flex",alignItems:"center"}},r.a.createElement(j,{handleSearchSelect:this.handleResultSelect})),r.a.createElement("br",null),r.a.createElement(ne.a,{stackable:!0},r.a.createElement(ne.a.Column,null,r.a.createElement(Z.a,{as:"h2"},"Inventory Search",r.a.createElement(Z.a.Subheader,null,r.a.createElement("em",null,"Card prices subject to change. Consult a Clubhouse employee for final estimates"))),r.a.createElement(ee.a,null),!t.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("span",null,a&&!t.length?r.a.createElement("p",null,r.a.createElement("em",null,a)," is out of stock"):r.a.createElement("p",null,"Search for a card")))),r.a.createElement(qe,{cards:t,addToSaleList:this.addToSaleList}))))}}]),t}(r.a.Component),Ue=[{key:"qw",value:"",text:"None"},{key:"we",value:"standard",text:"Standard"},{key:"er",value:"future",text:"Future"},{key:"rt",value:"historic",text:"Historic"},{key:"ty",value:"pioneer",text:"Pioneer"},{key:"yu",value:"modern",text:"Modern"},{key:"ui",value:"legacy",text:"Legacy"},{key:"io",value:"pauper",text:"Pauper"},{key:"op",value:"vintage",text:"Vintage"},{key:"as",value:"penny",text:"Penny"},{key:"sd",value:"commander",text:"Commander"},{key:"df",value:"brawl",text:"Brawl"},{key:"fg",value:"duel",text:"Duel"},{key:"gh",value:"oldschool",text:"Oldschool"}],ze=[{key:"gte",value:"gte",text:">="},{key:"lte",value:"lte",text:"<="},{key:"gtx",value:"gt",text:">"},{key:"ltx",value:"lt",text:"<"}],Ve=[{key:"nonfoil_foil",value:"",text:"None"},{key:"nonfoil",value:"NONFOIL",text:"Nonfoil"},{key:"foil",value:"FOIL",text:"Foil"}],We=[{key:"pricesort",value:"price",text:"Price"},{key:"alphasort",value:"name",text:"Card Name"}],Je=[{key:"descdirsort",value:1,text:"Ascending"},{key:"ascdirsort",value:-1,text:"Descending"}],Xe=[{key:"w",value:"W",text:"White"},{key:"u",value:"U",text:"Blue"},{key:"b",value:"B",text:"Black"},{key:"r",value:"R",text:"Red"},{key:"g",value:"G",text:"Green"}],Ke={title:"",setName:"",format:"",priceNum:"",priceFilter:"gte",finish:"",sortBy:"price",colorsArray:[],sortByDirection:-1,setNames:[]},$e=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=Object(L.a)({editionDropdownOptions:[]},Ke),a.handleSearchSelect=function(e){return a.setState({title:e})},a.handleSearchBlur=function(e,t){return a.setState({title:e.target.value})},a.handleChange=function(e,t){var n=t.value;return a.setState(Object(le.a)({},e.target.name,n))},a.handleDropdownChange=function(e,t){return a.setState(Object(le.a)({},t.name,t.value))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(E.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(x.GET_SET_NAMES);case 2:t=e.sent,a=t.data,n=a.map((function(e,t){return{key:"set".concat(t),value:e,text:e}})),r=[{key:"snull",value:"",text:"None"}].concat(n),this.setState({editionDropdownOptions:r});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.setName,l=t.format,c=t.priceNum,o=t.priceFilter,i=t.finish,s=t.sortBy,u=t.sortByDirection,m=t.colorsArray.sort().join("");return r.a.createElement(I.a,null,r.a.createElement("h3",null,"Filters"),r.a.createElement(T.a,null,r.a.createElement(T.a.Group,{widths:"4"},r.a.createElement(T.a.Field,null,r.a.createElement("label",null,"Card Name"),r.a.createElement(j,{handleSearchSelect:this.handleSearchSelect,value:this.state.title,name:"title",onBlur:this.handleSearchBlur})),r.a.createElement(T.a.Field,{control:P.a,label:"Format",placeholder:"Format",options:Ue,name:"format",onChange:this.handleDropdownChange}),r.a.createElement(T.a.Field,{control:P.a,label:"Edition",placeholder:"Edition",search:!0,options:this.state.editionDropdownOptions,name:"setName",onChange:this.handleDropdownChange}),r.a.createElement(T.a.Field,{control:P.a,label:"Finish",placeholder:"Finish",options:Ve,name:"finish",onChange:this.handleDropdownChange})),r.a.createElement(T.a.Group,{widths:"4"},r.a.createElement(T.a.Field,{control:P.a,multiple:!0,label:"Colors",placeholder:"Colors",options:Xe,name:"colorsArray",onChange:this.handleDropdownChange}),r.a.createElement(T.a.Field,null,r.a.createElement("label",null,"Price Filter"),r.a.createElement(N.a,{label:r.a.createElement(ce.a,{options:ze,name:"priceFilter",defaultValue:"gte",onChange:this.handleDropdownChange}),placeholder:"Enter a price",labelPosition:"left",name:"priceNum",type:"number",onChange:this.handleDropdownChange})),r.a.createElement(T.a.Field,{control:P.a,label:"Sort By",placeholder:"",options:We,defaultValue:"price",name:"sortBy",onChange:this.handleDropdownChange}),r.a.createElement(T.a.Field,{control:P.a,label:"Order",options:Je,defaultValue:-1,name:"sortByDirection",onChange:this.handleDropdownChange})),r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Button,{primary:!0,onClick:function(){return e.props.handleSubmit({title:a,setName:n,format:l,priceNum:c,priceFilter:o,finish:i,sortBy:s,sortByDirection:u,colors:m})}},"Submit"))))}}]),t}(r.a.Component),Ze={NM:"Near Mint",LP:"Light Play",MP:"Moderate Play",HP:"Heavy Play"},et=function(e){var t=e.image_uri,a=e.posX;e.posY;return r.a.createElement("div",{style:{position:"absolute",left:"".concat(a,"px"),width:"150px",height:"209px",borderRadius:"7px 7px 7px 7px",boxShadow:"2px 2px 5px 0 rgba(0, 0, 0, 0.25)",background:"repeating-linear-gradient(45deg, #bfbfbf, #bfbfbf 10px, #b0b0b0 10px, #b0b0b0 20px)"}},r.a.createElement(Y.a,{style:{borderRadius:"7px 7px 7px 7px"},size:"small",src:t}))},tt=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mouseInside:!1,mouseX:0,mouseY:0},a.mouseEnter=function(e){var t=e.clientX-e.target.offsetLeft,n=e.clientY-e.target.offsetTop;a.setState({mouseInside:!0,mouseX:t,mouseY:n})},a.mouseLeave=function(e){return a.setState({mouseInside:!1})},a.mouseMove=function(e){var t=e.clientX-e.target.offsetLeft,n=e.clientY-e.target.offsetTop;a.setState({mouseX:t,mouseY:n})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.inventory,a=e.name,n=e.set_name,l=e.price,c=e.set,o=e.rarity,i=e.image_uri,s=this.state,u=s.mouseInside,m=s.mouseX,d=s.mouseY,h=t.k.split("_")[0],p=t.k.split("_")[1];return r.a.createElement(de.a.Row,null,r.a.createElement(de.a.Cell,null,r.a.createElement("span",{onMouseEnter:this.mouseEnter,onMouseLeave:this.mouseLeave,onMouseMove:this.mouseMove,style:{cursor:"help"}},a," "),"FOIL"===h&&r.a.createElement(U.a,{name:"star",color:"blue"}),u&&r.a.createElement(et,{image_uri:i,posX:m,posY:d})),r.a.createElement(de.a.Cell,null,r.a.createElement("i",{className:"ss ss-fw ss-".concat(c," ss-").concat(o),style:{fontSize:"20px"}})," ",n),r.a.createElement(de.a.Cell,null,Ze[p]),r.a.createElement(de.a.Cell,null,t.v),r.a.createElement(de.a.Cell,null,r.a.createElement(G,{num:l})))}}]),t}(r.a.Component),at=a(478),nt=a(491),rt=a(479),lt=a(486),ct=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:[],count:0,currentPage:0,numPages:0,pageArray:[],isLoading:!1,cachedFilters:{},showPages:[],searchTouched:!1},a.fetchData=function(){var e=Object(E.a)(f.a.mark((function e(t,n){var r,l,c,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({isLoading:!0}),e.next=4,S.a.get(x.GET_CARDS_BY_FILTER,{params:Object(L.a)({},t,{page:n})});case 4:r=e.sent,l=r.data,c=Math.ceil(l.total/100),o=y.a.range(1,c+1),i=n<=3?o.slice(0,5):n>=c-2?o.slice(c-5,c):o.slice(n-2,n+3),a.setState({data:l.cards,count:l.total,isLoading:!1,numPages:c,currentPage:n,showPages:i,searchTouched:!0}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a){return e.apply(this,arguments)}}(),a.handleSubmit=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({cachedFilters:t}),e.next=3,a.fetchData(t,1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handlePage=function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData(a.state.cachedFilters,t);case 2:a.setState({currentPage:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isLoading,l=t.currentPage,c=t.numPages,o=t.count,i=!(1===l),s=!(l===c);return r.a.createElement(at.a,null,r.a.createElement(nt.a,{active:n,inverted:!0,page:!0,style:{marginTop:"52.63px"}},r.a.createElement(rt.a,{size:"large"},"Loading")),r.a.createElement(I.a,{secondary:!0},r.a.createElement(U.a,{name:"exclamation triangle",color:"blue"}),"Prices from this table are updated weekly and are subject to fluctuations. Consult 'New Sale' or 'Manage Inventory' for up-to-date values"),r.a.createElement($e,{handleSubmit:this.handleSubmit}),!!a.length&&r.a.createElement(de.a,{celled:!0,striped:!0,compact:!0},r.a.createElement(de.a.Header,null,r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,{colSpan:"5"},r.a.createElement(lt.a,{floated:"left"},r.a.createElement(lt.a.Item,null,"Viewing page ",l," of ",c)),r.a.createElement(lt.a,{floated:"right"},i&&r.a.createElement(lt.a.Item,{as:"a",icon:!0,onClick:function(){return e.handlePage(l-1)}},r.a.createElement(U.a,{name:"chevron left"})),r.a.createElement(r.a.Fragment,null,this.state.showPages.map((function(t){return r.a.createElement(lt.a.Item,{key:"page-".concat(t),onClick:function(){return e.handlePage(t)},active:l===t,disabled:l===t,as:"a"},t)}))),s&&r.a.createElement(lt.a.Item,{as:"a",icon:!0,onClick:function(){return e.handlePage(l+1)}},r.a.createElement(U.a,{name:"chevron right"})))))),r.a.createElement(de.a.Header,null,r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,null,"Name"),r.a.createElement(de.a.HeaderCell,null,"Edition"),r.a.createElement(de.a.HeaderCell,null,"Condition"),r.a.createElement(de.a.HeaderCell,null,"Qty"),r.a.createElement(de.a.HeaderCell,null,"Price"))),r.a.createElement(de.a.Body,null,a.map((function(e){return r.a.createElement(tt,Object.assign({},e,{key:"".concat(e._id).concat(e.inventory.k)}))}))),r.a.createElement(de.a.Footer,null,r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,{colSpan:"5"},r.a.createElement(lt.a,{floated:"left"},r.a.createElement(lt.a.Item,null,"Total results: ",o)),r.a.createElement(lt.a,{floated:"right"},i&&r.a.createElement(lt.a.Item,{as:"a",icon:!0,onClick:function(){return e.handlePage(l-1)}},r.a.createElement(U.a,{name:"chevron left"})),r.a.createElement(r.a.Fragment,null,this.state.showPages.map((function(t){return r.a.createElement(lt.a.Item,{key:"page-".concat(t),onClick:function(){return e.handlePage(t)},active:l===t,disabled:l===t,as:"a"},t)}))),s&&r.a.createElement(lt.a.Item,{as:"a",icon:!0,onClick:function(){return e.handlePage(l+1)}},r.a.createElement(U.a,{name:"chevron right"}))))))),!a.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),this.state.searchTouched?"No results found":"Use the filters to browse inventory")))}}]),t}(r.a.Component),ot=r.a.createContext();function it(e){var t=Object(n.useState)(!!localStorage.getItem("clubhouse_JWT")),a=Object(b.a)(t,2),l=a[0],c=a[1],o=function(){var e=Object(E.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post(x.LOGIN,{username:t.toLowerCase(),password:a},{headers:O()});case 3:if(n=e.sent,!(r=n.data).token){e.next=11;break}return localStorage.setItem("clubhouse_JWT",r.token),c(!!localStorage.getItem("clubhouse_JWT")),e.abrupt("return",{authed:!0});case 11:return e.abrupt("return",{authed:!1});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.removeItem("clubhouse_JWT"),c(!!localStorage.getItem("clubhouse_JWT")),e.abrupt("return",{authed:!1});case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ot.Provider,{value:{loggedIn:l,handleLogin:o,handleLogout:i}},e.children)}var st={username:"",password:"",btnLoading:!1},ut=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state=st,a.handleInputChange=function(e,t){var n=t.value;a.setState(Object(le.a)({},e.target.name,n))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.password,l=t.btnLoading;return r.a.createElement(ot.Consumer,null,(function(t){var c=t.loggedIn,o=t.handleLogin,i=function(){var t=Object(E.a)(f.a.mark((function t(){var a,n,r,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,n=a.username,r=a.password,e.setState({btnLoading:!0}),t.next=4,o(n,r);case 4:l=t.sent,l.authed?H({color:"green",header:"Success",message:"Enjoy your time here!"}):(e.setState(st),H({color:"red",header:"Error",message:"Username or password was incorrect"}));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c?r.a.createElement(h.a,{to:"/manage-inventory"}):r.a.createElement(T.a,null,r.a.createElement(T.a.Field,null,r.a.createElement(T.a.Input,{name:"username",placeholder:"Username",label:"Username",value:a,onChange:e.handleInputChange})),r.a.createElement(T.a.Field,null,r.a.createElement(T.a.Input,{name:"password",placeholder:"Password",type:"password",label:"Password",value:n,onChange:e.handleInputChange})),r.a.createElement(D.a,{type:"submit",onClick:function(){return i()},disabled:!a||!n,loading:l},"Submit"))}))}}]),t}(r.a.Component),mt=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(ot.Consumer,null,(function(e){var t=e.loggedIn,a=e.handleLogout;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(at.a,{fluid:!0},r.a.createElement(Z.a,{as:"h3",color:"grey"},r.a.createElement("i",null,"Until we meet again, friend...")),r.a.createElement(D.a,{onClick:Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},"Logout"))):r.a.createElement(h.a,{to:"/login"})}))}}]),t}(r.a.Component),dt=[{key:"NONFOIL",text:"Nonfoil",value:"NONFOIL"},{key:"FOIL",text:"Foil",value:"FOIL"}],ht=[{key:"NM",text:"Near Mint",value:"NM"},{key:"LP",text:"Light Play",value:"LP"},{key:"MP",text:"Moderate Play",value:"MP"},{key:"HP",text:"Heavy Play",value:"HP"}];function pt(e,t){return!e&&t?{selectedFinish:"FOIL",finishDisabled:!0}:e&&!t?{selectedFinish:"NONFOIL",finishDisabled:!0}:e&&t?{selectedFinish:"NONFOIL",finishDisabled:!1}:void 0}function ft(e){var t=Object(n.useState)(1),a=Object(b.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(0),i=Object(b.a)(o,2),s=i[0],u=i[1],m=Object(n.useState)(0),d=Object(b.a)(m,2),h=d[0],p=d[1],f=Object(n.useState)("NM"),E=Object(b.a)(f,2),v=E[0],g=E[1],y=Object(n.useState)(0),C=Object(b.a)(y,2),S=C[0],O=C[1],x=Object(n.useState)(pt(e.nonfoil,e.foil).selectedFinish),w=Object(b.a)(x,2),j=w[0],B=w[1],A=pt(e.nonfoil,e.foil).finishDisabled,M=function(e,t){var a=t.value,n=Number(a)||0;switch(n<0&&(n=0),e.target.name){case"cashInput":u(n);break;case"marketPriceInput":O(n);break;case"creditInput":p(n)}},Y=function(e){switch(e.target.name){case"cashInput":0===s&&u("");break;case"marketPriceInput":0===S&&O("");break;case"creditInput":0===h&&p("")}},q=function(e){switch(e.target.name){case"cashInput":""===s&&u(0);break;case"marketPriceInput":""===S&&O(0);break;case"creditInput":""===h&&p(0)}},G=e.image_uris,U=e.name,z=e.set_name,W=e.set,J=e.rarity,X=e.card_faces,K=e.id;return r.a.createElement(I.a,null,r.a.createElement(F.a.Group,{divided:!0},r.a.createElement(F.a,null,r.a.createElement(F.a.Image,{size:"small"},r.a.createElement(Q,{image_uris:G,card_faces:X,hover:!1})),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,{as:"h3"},U," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(W," ss-").concat(J),style:{fontSize:"30px"}}),r.a.createElement(_.a,{color:"grey"},z," (",String(W).toUpperCase(),")"),r.a.createElement(R,{inventoryQty:e.inventoryQty})," ",r.a.createElement(V,{id:K,finish:j})),r.a.createElement(F.a.Description,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Group,{widths:"12"},r.a.createElement(T.a.Field,{control:N.a,type:"number",label:"Quantity",value:l,onChange:function(e,t){var a=t.value,n=parseInt(a,10)||0;n<0&&(n=0),n>50&&(n=50),c(n)},onFocus:function(e){return e.target.select()}}),r.a.createElement(T.a.Field,{label:"Credit Price",name:"creditInput",control:N.a,type:"number",value:h,onChange:M,onFocus:Y,onBlur:q,step:"0.25"}),r.a.createElement(T.a.Field,{label:"Cash Price",name:"cashInput",control:N.a,type:"number",value:s,onChange:M,onFocus:Y,onBlur:q,step:"0.25"}),r.a.createElement(T.a.Field,{label:"Market Price",name:"marketPriceInput",control:N.a,type:"number",value:S,onChange:M,onFocus:Y,onBlur:q,step:"0.25",disabled:0===s||""===s})),r.a.createElement(T.a.Group,{widths:"12"},r.a.createElement(T.a.Field,{label:"Finish",control:P.a,value:j,options:dt,disabled:A,onChange:function(e,t){var a=t.value;return B(a)}}),r.a.createElement(T.a.Field,{label:"Condition",control:P.a,value:v,options:ht,onChange:function(e,t){var a=t.value;return g(a)}}),r.a.createElement(T.a.Button,{label:"Add to List?",control:D.a,primary:!0,disabled:function(){var e=0===l||""===l,t=!s&&!h;return s>0?e||t||(0===S||""===S):e||t}(),onClick:function(){e.addToList({quantity:l,cashPrice:s,marketPrice:S,creditPrice:h,finishCondition:"".concat(j,"_").concat(v),cardInfo:Object(L.a)({},e)}),c(1),u(0),O(0),p(0),g("NM"),B(pt(e.nonfoil,e.foil).selectedFinish),H({color:"green",header:"".concat(l,"x ").concat(e.name," added to buylist!"),duration:2e3}),k()("#searchBar").focus().select()}},"Add"))))))))}function Et(e){var t=e.cards,a=e.addToList;return t.map((function(e){return r.a.createElement(ft,Object.assign({key:e.id},e,{addToList:a}))}))}var bt="CASH",vt="CREDIT";function gt(e){var t=e.name,a=e.set,l=e.rarity,c=e.cashPrice,o=e.creditPrice,i=e.finishCondition,s=e.uuid_key,u=e.removeFromList,m=e.tradeType,d=e.activeTradeType,h=bt,p=vt,f=Object(n.useState)(!1),E=Object(b.a)(f,2),v=E[0],g=E[1];return r.a.createElement(de.a.Row,null,r.a.createElement(de.a.Cell,null,r.a.createElement("b",null,t)),r.a.createElement(de.a.Cell,{singleLine:!0},r.a.createElement("i",{className:"ss ss-fw ss-".concat(a," ss-").concat(l),style:{fontSize:"20px"}}),r.a.createElement(_.a,{color:"grey"},a.toUpperCase())),r.a.createElement(de.a.Cell,null,r.a.createElement("div",{style:{whiteSpace:"noWrap"}},"Cash ",r.a.createElement("b",null,r.a.createElement(G,{num:c}))),r.a.createElement("div",{style:{whiteSpace:"noWrap"}},"Credit ",r.a.createElement("b",null,r.a.createElement(G,{num:o}))),r.a.createElement("p",null,i.split("_")[0]," | ",i.split("_")[1])),r.a.createElement(de.a.Cell,null,r.a.createElement(D.a,{active:m===h,color:m===h?"blue":null,onClick:function(){return d(s,h)},disabled:0===c,icon:!0},r.a.createElement(U.a,{name:"dollar sign"}))),r.a.createElement(de.a.Cell,null,r.a.createElement(D.a,{active:m===p,color:m===p?"blue":null,onClick:function(){return d(s,p)},disabled:0===o,icon:!0},r.a.createElement(U.a,{name:"credit card outline"}))),r.a.createElement(de.a.Cell,null,r.a.createElement(D.a,{icon:"cancel",circular:!0,onClick:function(){return u(s)},onMouseOver:function(){return g(!0)},onMouseOut:function(){return g(!1)},color:v?"red":null})))}var yt=a(487);function Ct(e){var t=e.receivingList,a=(e.closeCashModal,y.a.chain(t).filter((function(e){return"CASH"===e.tradeType})).map((function(e){return Object(L.a)({},e,{temp_uuid:"".concat(e.id,"-").concat(e.cashPrice,"-").concat(e.marketPrice,"-").concat(e.finishCondition)})})).groupBy("temp_uuid").mapValues((function(e){return e.length})).value()),n=y.a.chain(t).filter((function(e){return"CASH"===e.tradeType})).map((function(e){return Object(L.a)({},e,{temp_uuid:"".concat(e.id,"-").concat(e.cashPrice,"-").concat(e.marketPrice,"-").concat(e.finishCondition)})})).uniqBy("temp_uuid").value().map((function(e){return Object(L.a)({},e,{tradeQty:a[e.temp_uuid]})})),l=y.a.chain(t).filter((function(e){return"CASH"===e.tradeType})).sumBy((function(e){return e.cashPrice})).value();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"cash-report"},r.a.createElement(de.a,{celled:!0},r.a.createElement(de.a.Header,null,r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,{colSpan:6},"Employee Name:")),r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,null,"Card Name"),r.a.createElement(de.a.HeaderCell,null,"Market Value"),r.a.createElement(de.a.HeaderCell,null,"Condition"),r.a.createElement(de.a.HeaderCell,null,"Quantity"),r.a.createElement(de.a.HeaderCell,null,"Cash Offer"),r.a.createElement(de.a.HeaderCell,null,"Cash Out"))),r.a.createElement(de.a.Body,null,n.map((function(e){return r.a.createElement(de.a.Row,{key:e.temp_uuid},r.a.createElement(de.a.Cell,null,e.name),r.a.createElement(de.a.Cell,null,r.a.createElement(G,{num:e.marketPrice})),r.a.createElement(de.a.Cell,null,e.finishCondition),r.a.createElement(de.a.Cell,null,e.tradeQty),r.a.createElement(de.a.Cell,null,r.a.createElement(G,{num:e.cashPrice})),r.a.createElement(de.a.Cell,null,r.a.createElement(G,{num:e.tradeQty*e.cashPrice})))}))),r.a.createElement(de.a.Footer,null,r.a.createElement(de.a.HeaderCell,{colSpan:6},"Total: ",r.a.createElement(G,{num:l}))))))}var St="CASH",Ot="CREDIT";function xt(e){var t=e.receivingList,a=e.selectAll,l=e.commitToInventory,c=St,o=Ot,i=Object(n.useState)(!1),s=Object(b.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(!1),h=Object(b.a)(d,2),p=h[0],v=h[1],g=Object(n.useState)(!1),y=Object(b.a)(g,2),C=y[0],S=y[1],O=function(){return S(!1)},x=function(){var e=Object(E.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,l();case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=t.reduce((function(e,t){return e+(t.tradeType===c?t.cashPrice:0)}),0),k=t.reduce((function(e,t){return e+(t.tradeType===o?t.creditPrice:0)}),0);return r.a.createElement(I.a,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(D.a.Group,null,r.a.createElement(D.a,{onClick:function(){return a(St)}},"Select all cash"),r.a.createElement(D.a.Or,null),r.a.createElement(D.a,{onClick:function(){return a(Ot)}},"Select all credit")),r.a.createElement("div",null,r.a.createElement(yt.a,{size:"mini"},r.a.createElement(yt.a.Label,null,"Cash Due:"),r.a.createElement(yt.a.Value,null,r.a.createElement(G,{num:w}))),r.a.createElement(yt.a,{size:"mini"},r.a.createElement(yt.a.Label,null,"Credit Due:"),r.a.createElement(yt.a.Value,null,r.a.createElement(G,{num:k}))))),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(re.a,{open:C,trigger:r.a.createElement(D.a,{color:w>0?"green":null,disabled:0===w,onClick:function(){return S(!0)}},"Generate cash report")},r.a.createElement(re.a.Content,null,r.a.createElement(Ct,{receivingList:t,closeCashModal:O})),r.a.createElement(re.a.Actions,null,r.a.createElement(D.a,{onClick:function(){S(!1),function(){var e=document.getElementById("cash-report"),t=window.open("","_blank");t.document.open(),t.document.write("<html>"),t.document.write("<head>"),t.document.write("<title>Cash Report</title>"),t.document.write("<style>".concat("\n    body {\n        font-family: 'helvetica neue', helvetica, arial, sans-serif;\n    }\n\n    table {\n        table-layout: fixed;\n        width: 100%;\n        border-collapse: collapse;\n        border: 1px solid gray;\n        text-align: left;\n    }\n\n    thead th:nth-child(1) {\n        width: 30%;\n    }\n\n    thead th:nth-child(2) {\n        width: 20%;\n    }\n\n    thead th:nth-child(3) {\n        width: 15%;\n    }\n\n    thead th:nth-child(4) {\n        width: 35%;\n    }\n\n    th, td {\n        border: 1px solid #ddd;\n        padding: 10px;\n    }\n\n    tfoot {\n        text-align: right !important;\n    }\n","</style>")),t.document.write("</head>"),t.document.write('<body onload="window.print()">'),t.document.write("".concat(e.innerHTML)),t.document.write("</body>"),t.document.write("</html>"),t.document.close()}()},color:"blue"},"Print Report"),r.a.createElement(D.a,{onClick:O},"Cancel"))),r.a.createElement(re.a,{closeOnDimmerClick:!1,trigger:r.a.createElement(D.a,{color:"blue",disabled:0===t.length,onClick:function(){return v(!0)}},"Commit to inventory"),open:p,onClose:function(){return v(!1)},basic:!0,style:{marginTop:"50px"}},r.a.createElement(Z.a,null,"Confirm receipt of new inventory?"),r.a.createElement(re.a.Content,null,r.a.createElement("p",null,r.a.createElement("b",null,"Pressing 'Submit' will commit the following items to inventory:")),r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.uuid_key},e.name," | ",e.set_name,"(",e.set.toUpperCase(),")")}))),r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("b",null,"The customer is owed: ")),r.a.createElement("ul",null,w>0?r.a.createElement("li",null,r.a.createElement(G,{num:w})," in cold, hard cash"):null,k>0?r.a.createElement("li",null,r.a.createElement(G,{num:k})," in store credit"):null))),r.a.createElement(re.a.Actions,null,r.a.createElement(D.a,{basic:!0,color:"red",inverted:!0,onClick:function(){return v(!1)}},"Cancel"),r.a.createElement(D.a,{color:"green",inverted:!0,loading:u,disabled:u,onClick:x},"Submit")))))}var wt=a(264),kt=a.n(wt),jt={CASH:"CASH",CREDIT:"CREDIT"};function Lt(e){var t=e.active,a=e.headerText;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("em",null,a))))}function It(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)([]),o=Object(b.a)(c,2),i=o[0],s=o[1],u=function(){var e=Object(E.a)(f.a.mark((function e(t){var a,n,r,c,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.get(x.GET_SCRYFALL_BULK_BY_TITLE,{params:{title:t},headers:O()});case 3:return a=e.sent,n=a.data,r=n.map((function(e){return e.id})),e.next=8,S.a.post(x.GET_CARD_QTY_FROM_INVENTORY,{scryfallIds:r},{headers:O()});case 8:c=e.sent,o=n.map((function(e){return Object(L.a)({},e,{inventoryQty:c.data[e.id]})})),l(o),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=Object(ae.a)(i);y.a.remove(t,(function(t){return t.uuid_key===e})),s(t)},d=function(e,t){var a=Object(ae.a)(i);a.find((function(t){return t.uuid_key===e})).tradeType=jt[t],s(a)},h=function(){var e=Object(E.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(ae.a)(i),a=t.map((function(e){return y.a.omit(e,["cashPrice","creditPrice","marketPrice","inventoryQty","addToList","uuid_key","tradeType","activeTradeType"])})),e.prev=2,n=a.map(function(){var e=Object(E.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post(x.ADD_CARD_TO_INVENTORY,{quantity:1,type:t.finishCondition,cardInfo:y.a.omit(t,"finishCondition")},{headers:O()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:l([]),s([]),H({color:"green",header:"".concat(i.length," cards were added to inventory!"),duration:2e3}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),H({color:"red",header:"Something went wrong...",duration:2e3});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{handleSearchSelect:u}),r.a.createElement("br",null),r.a.createElement(ne.a,{stackable:!0},r.a.createElement(ne.a.Row,null,r.a.createElement(ne.a.Column,{width:"10"},r.a.createElement(Z.a,{as:"h2",style:{display:"inline-block"}},"Card Search"),r.a.createElement(ee.a,null),r.a.createElement(Lt,{active:!a.length,headerText:"So many cards, so little time."}),r.a.createElement(Et,{cards:a,addToList:function(e){var t=e.quantity,a=e.cashPrice,n=e.marketPrice,r=e.creditPrice,l=e.finishCondition,c=e.cardInfo,o=Object(ae.a)(i),u=jt.CREDIT;r||(u=jt.CASH);var m=o.concat(y.a.times(t,(function(e){return Object(L.a)({cashPrice:a,marketPrice:n,creditPrice:r,finishCondition:l},c,{uuid_key:kt()(),tradeType:u})})));s(y.a.sortBy(m,"name"))}})),r.a.createElement(ne.a.Column,{width:"6"},r.a.createElement(Z.a,{as:"h2",style:{display:"inline-block"}},"Buylist"),i.length>0&&r.a.createElement(Z.a,{floated:"right",style:{display:"inline-block"}},"Total Cards: ",i.length),r.a.createElement(ee.a,null),r.a.createElement(Lt,{active:!i.length,headerText:"If you receive it, they will come."}),i.length>0&&r.a.createElement(de.a,{compact:!0,size:"small"},r.a.createElement(de.a.Body,null,i.map((function(e){var t=e.name,a=e.set,n=e.rarity,l=e.cashPrice,c=e.creditPrice,o=e.finishCondition,i=e.uuid_key,s=e.tradeType;return r.a.createElement(gt,{name:t,set:a,rarity:n,cashPrice:l,creditPrice:c,finishCondition:o,uuid_key:i,removeFromList:m,tradeType:s,activeTradeType:d,key:i})})))),i.length>0&&r.a.createElement(xt,{receivingList:i,selectAll:function(e){var t=Object(ae.a)(i),a=jt.CASH,n=jt.CREDIT;t.forEach((function(t,r,l){if(t.tradeType!==e){var c=t.tradeType===a?n:a;(c===a?t.cashPrice:t.creditPrice)>0&&(l[r].tradeType=c)}})),s(t)},commitToInventory:h})))))}function Ft(){var e=Object(d.a)(["\n    padding-top: 52.63px;\n    margin-left: 20px;\n    margin-right: 20px;\n"]);return Ft=function(){return e},e}var _t=be.a.div(Ft()),Tt=function(){return r.a.createElement(I.a,{placeholder:!0},r.a.createElement(Z.a,{icon:!0},r.a.createElement(U.a,{name:"exclamation circle",color:"blue"}),"A notice to our customers regarding COVID19"),r.a.createElement("span",null,"Effective immediately, we will be shutting down the entirety of our play space besides 24 seats at the 3 front tables of the store. This will be our maximum player capacity for the foreseeable future."),r.a.createElement("br",null),r.a.createElement("span",null,"In addition to our play space restriction, we will also be implementing a policy in which our tables will be available for free play during business hours, excluding those taken by our scheduled events throughout the week. If we have players here for any scheduled event (Wednesday Legacy, FNM, etc.) and you are not here to play in the event, please expect us to ask you to give up your seat for players interested in participating. Your cooperation will be greatly appreciated by fellow players and by our staff."),r.a.createElement("br",null),r.a.createElement("span",null,"Please don't hesitate to contact us with questions or concerns. We thank you all for your understanding."))};function Nt(){return r.a.createElement(_t,null,r.a.createElement("br",null),r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:Tt}),r.a.createElement(h.b,{exact:!0,path:"/manage-inventory",component:te}),r.a.createElement(h.b,{exact:!0,path:"/new-sale",component:ke}),r.a.createElement(h.b,{exact:!0,path:"/browse-sales",component:_e}),r.a.createElement(h.b,{exact:!0,path:"/browse-inventory",component:ct}),r.a.createElement(h.b,{exact:!0,path:"/public-inventory",component:Ge}),r.a.createElement(h.b,{exact:!0,path:"/receiving",component:It}),r.a.createElement(h.b,{exact:!0,path:"/login",component:ut}),r.a.createElement(h.b,{exact:!0,path:"/logout",component:mt})))}var Pt=a(265),Dt=a.n(Pt),Bt=a(40),Rt={background:"linear-gradient(#2185d0, #206ac6)",boxShadow:"0 3px 5px 0 rgba(0,0,0,.25)"},At=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname;return r.a.createElement(ot.Consumer,null,(function(t){var a=t.loggedIn;return r.a.createElement(lt.a,{inverted:!0,fixed:"top",style:Rt},r.a.createElement(lt.a.Item,{as:Bt.b,replace:!0,to:"/"},r.a.createElement("img",{src:Dt.a,style:{marginRight:"7px"},alt:"logo"}),r.a.createElement("span",null,r.a.createElement("h3",null,"Clubhouse Collection"))),r.a.createElement(lt.a.Menu,{position:"right"},r.a.createElement(lt.a.Item,{active:"/public-inventory"===e,position:"right",as:Bt.b,replace:!0,to:"/public-inventory"},"Search"),a&&r.a.createElement(ce.a,{item:!0,icon:"bars"},r.a.createElement(ce.a.Menu,null,r.a.createElement(ce.a.Item,{active:"/manage-inventory"===e,as:Bt.b,replace:!0,to:"/manage-inventory"},r.a.createElement(U.a,{name:"plus",color:"blue"}),"Manage Inventory"),r.a.createElement(ce.a.Item,{active:"/new-sale"===e,as:Bt.b,replace:!0,to:"/new-sale"},r.a.createElement(U.a,{name:"dollar sign",color:"blue"}),"New Sale"),r.a.createElement(ce.a.Item,{active:"/receiving"===e,as:Bt.b,replace:!0,to:"/receiving"},r.a.createElement(U.a,{name:"list alternate outline",color:"blue"}),"Receiving"),r.a.createElement(ce.a.Divider,null),r.a.createElement(ce.a.Item,{active:"/browse-inventory"===e,as:Bt.b,replace:!0,to:"/browse-inventory"},r.a.createElement(U.a,{name:"box",color:"blue"}),"Browse Inventory"),r.a.createElement(ce.a.Item,{active:"/browse-sales"===e,as:Bt.b,replace:!0,to:"/browse-sales"},r.a.createElement(U.a,{name:"eye",color:"blue"}),"Browse Sales"),r.a.createElement(ce.a.Divider,null),r.a.createElement(ce.a.Item,{active:"/logout"===e,as:Bt.b,replace:!0,to:"/logout"},r.a.createElement(U.a,{name:"log out",color:"blue"}),"Logout"))),!a&&r.a.createElement(lt.a.Item,{active:"/login"===e,position:"right",as:Bt.b,replace:!0,to:"/login"},"Log in")))}))}}]),t}(r.a.Component),Mt=Object(h.g)((function(e){return r.a.createElement(At,e)})),Ht=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(it,null,r.a.createElement(Mt,null),r.a.createElement(Nt,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(466);c.a.render(r.a.createElement(Bt.a,{basename:"/"},r.a.createElement(Ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[279,1,2]]]);
//# sourceMappingURL=main.1bce86b2.chunk.js.map