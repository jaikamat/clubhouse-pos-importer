{"version":3,"sources":["utils/api_resources.js","Header/logos/magic-ball.png","utils/makeAuthHeader.js","common/SearchBar.js","common/QohLabels.js","utils/parseQoh.js","common/createToast.js","common/CardImage.js","common/MarketPrice.js","utils/ScryfallCard.js","ManageInventory/ScryfallCardListItem.js","ManageInventory/ScryfallCardList.js","ManageInventory/Home.js","NewSale/BrowseCardItem.js","NewSale/BrowseCardList.js","common/Price.js","NewSale/SalePriceTotal.js","NewSale/SaleLineItem.js","NewSale/CustomerSaleList.js","NewSale/PrintList.js","NewSale/SuspendedSale.js","NewSale/Sale.js","utils/sortSaleList.js","BrowseSales/SalesListItem.js","BrowseSales/SalesList.js","BrowseSales/BrowseSales.js","PublicInventory/PublicCardItem.js","PublicInventory/PublicCardList.js","PublicInventory/PublicInventory.js","DeckboxClone/DeckboxCloneForm.js","DeckboxClone/DeckboxCloneRow.js","DeckboxClone/DeckboxClone.js","context/AuthProvider.js","Login/Login.js","Logout/Logout.js","Receiving/ReceivingSearchItem.js","Receiving/ReceivingSearchList.js","Receiving/ReceivingListItem.js","Receiving/CashReport.js","Receiving/ReceivingListTotals.js","Receiving/printCashReport.js","Receiving/Receiving.js","Reports/Reports.js","Main.js","Header/Header.js","App.js","serviceWorker.js","index.js"],"names":["env","process","REACT_APP_ENVIRONMENT","endpoints","FINISH_SALE","ADD_CARD_TO_INVENTORY","GET_INVENTORY_QUERY","GET_SALES_BY_TITLE","GET_SCRYFALL_BULK_BY_TITLE","GET_CARDS_BY_FILTER","GET_SET_NAMES","SUSPEND_SALE","LOGIN","GET_ALL_SALES","GET_CARDS_WITH_INFO","SCRYFALL_AUTOCOMPLETE","SCRYFALL_SEARCH","GET_LIVE_PRICE","module","exports","makeAuthHeader","Authorization","localStorage","getItem","SearchBar","props","useState","isLoading","setIsLoading","results","setResults","handleResultSelect","e","a","result","setTimeout","$","select","handleSearchSelect","title","console","log","Search","onSearchChange","_","debounce","value","length","axios","get","headers","data","formattedResults","map","el","slice","leading","trailing","onResultSelect","loading","placeholder","selectFirstResult","id","onFocus","target","onBlur","QohLabels","inventoryQty","foilQty","nonfoilQty","FOIL_NM","FOIL_LP","FOIL_MP","FOIL_HP","NONFOIL_NM","NONFOIL_LP","NONFOIL_MP","NONFOIL_HP","parseQoh","foilColor","color","nonfoilColor","Fragment","Label","image","Detail","createToast","header","message","duration","toaster","notify","Message","compact","Header","position","style","boxShadow","zIndex","transition","CardImage","state","hovered","mouseOver","setState","mouseOut","this","image_uris","card_faces","hover","Image","src","size","transform","onMouseOver","onMouseOut","normal","React","Component","LabelStyle","styled","foil","MarketPrice","finish","market","setMarket","median","setMedian","setLoading","isFoil","useEffect","params","scryfallId","marketPrices","medianPrices","Math","max","loader","Icon","name","displayPrice","price","toFixed","InventoryCard","card","_qoh","qoh","quantity","qtyToSell","finishCondition","quantities","set","set_name","rarity","nonfoil","colors","type_line","myImage","finishes","key","text","cardConditions","checkCardFinish","nonfoilProp","foilProp","selectedFinish","finishDisabled","ScryfallCardListItem","cardImage","setQuantity","setSelectedFinish","selectedCondition","setSelectedCondition","setFinishDisabled","submitDisable","setSubmitDisable","setInventoryQty","submitLoading","setSubmitLoading","handleInventoryAdd","post","cardInfo","focus","Segment","Item","Group","divided","Content","as","className","fontSize","String","toUpperCase","Description","Form","Field","control","Input","type","label","onChange","val","parseInt","isNaN","Select","options","disabled","Button","primary","onClick","ScryfallCardList","cards","Home","searchResults","setSearchResults","term","matchInStock","modeledData","c","Divider","icon","createConditionOptions","removeZeroedQuantites","pickBy","p","Object","entries","d","conditionFinish","qty","split","join","createInitialSelectedFinish","keysMapped","keys","k","uniq","indexOf","BrowseCardItem","selectedFinishCondition","selectedFinishConditionQty","quantityToSell","conditionOptions","handleQuantityChange","numVal","handleSelectedFinishCondition","handlePriceChange","Number","handleFocus","property","handleBlur","handleAddToSale","addToSaleList","Dropdown","selection","step","BrowseCardList","Price","num","SalePriceTotal","saleList","total","reduce","acc","SaleLineItem","deleteLineItem","setHovered","Table","Row","Cell","singleLine","circular","CustomerSaleList","removeFromSaleList","Body","PrintList","printClicked","print","window","saleListCards","display","float","div","ClearMargin","CharLimit","SuspendedSale","restoreSale","deleteSuspendedSale","saleListLength","suspendSale","sales","setSales","saleID","setSaleID","modalOpen","setModalOpen","customerName","setCustomerName","notes","setNotes","setDisabled","suspendBtn","restoreBtn","deleteBtn","loadingBtn","setLoadingBtn","getSales","clearFields","modalTrigger","submitSuspendSale","submitRestoreSale","submitDeleteSale","Modal","trigger","open","Grid","columns","stackable","relaxed","Column","width","substring","TextArea","fluid","s","_id","info","Actions","Sale","setSaleListCards","showModal","setShowModal","submit","setSubmit","searchTerm","setSearchTerm","list","suspendedSale","setSuspendedSale","resetState","response","delete","ops","finalizeSale","sale_data","floated","alignItems","newCard","oldState","modeledCard","idx","findIndex","splice","push","sortedCards","ORDER","helpSort","arrayConst","colorsLength","cardFace","includes","sort","b","localeCompare","sortSaleList","newState","reject","clearing","sub","basic","inverted","SalesListItem","saleData","quantitySold","cardList","pre","curr","moment","createTime","format","SalesList","celled","unstackable","HeaderCell","card_list","BrowseSales","salesList","cardName","Wrapper","InventoryWrapper","InventoryRow","ImageWrapper","PublicCardItem","qohParsed","displayFoil","displayNonfoil","borderRadius","gridStyle","flexWrap","alignContent","height","PublicCardList","initialState","PublicInventory","Subheader","formatDropdownOptions","priceFilterDropdownOptions","finishDropdownOptions","sortByDropdownOptions","sortByDirectionDropdownOptions","sortByColorDropdownOptions","typeLineOptions","setName","priceNum","priceFilter","sortBy","colorsArray","sortByDirection","typeLine","setNames","DeckboxCloneForm","editionDropdownOptions","handleSearchBlur","handleChange","handleDropdownChange","setNameOptions","concatWithBlankOption","concat","widths","search","multiple","defaultValue","labelPosition","handleSubmit","conditionMap","NM","LP","MP","HP","Tooltip","image_uri","posX","posY","left","background","DeckboxCloneRow","mouseInside","mouseX","mouseY","mouseEnter","clientX","offsetLeft","clientY","offsetTop","mouseLeave","mouseMove","inventory","condition","onMouseEnter","onMouseLeave","onMouseMove","cursor","v","DeckboxClone","count","currentPage","numPages","pageArray","cachedFilters","showPages","searchTouched","fetchData","filters","page","ceil","pages","range","handlePage","showLeftPageButtons","showRightPageButtons","Container","Dimmer","active","marginTop","Loader","secondary","striped","colSpan","Menu","Footer","AuthContext","createContext","AuthProvider","loggedIn","setLoggedIn","handleLogin","username","password","toLowerCase","token","setItem","authed","handleLogout","removeItem","Provider","children","LoginContainer","FormContainer","Login","useContext","handleInputChange","login","to","raised","Logout","ReceivingCardItem","cashPrice","setCashPrice","creditPrice","setCreditPrice","marketPrice","setMarketPrice","validateQty","validateTradeTypes","submitDisabled","addToList","ReceivingCardList","TRADE_TYPE","ReceivingListItem","uuid_key","removeFromList","tradeType","activeTradeType","CASH","CREDIT","whiteSpace","CashReport","receivingList","countByPriceAndID","closeCashModal","chain","filter","temp_uuid","groupBy","mapValues","mergedWithQty","uniqBy","tradeQty","totalCashOut","sumBy","ReceivingListTotals","selectAll","commitToInventory","showCashModal","setShowCashModal","submitToInventory","cashTotal","creditTotal","justifyContent","Or","Statistic","Value","divToPrint","document","getElementById","popup","write","innerHTML","close","printCashReport","closeOnDimmerClick","onClose","DefaultPlaceholder","headerText","Receiving","setReceivingList","copiedState","remove","previousState","find","promises","Promise","all","initialTradeType","times","uuid","forEach","arr","otherType","Reports","sales_data","format_legalities","groupByDay","timeStamp","startOf","dailySalesTotals","dailyAverageSales","rangeBuckets","0","1","2","3","4","5","rarityCounts","forOwn","legalityCounts","standard","nonStandard","qtySold","legalities","formattedDailySalesTotals","Date","getTime","formattedDailyAverageSales","formattedRangeBuckets","formattedRarityCounts","y","formattedLegalities","Highcharts","setOptions","lang","thousandsSep","chart","zoomType","subtitle","credits","enabled","xAxis","yAxis","legend","series","tooltip","valueDecimals","min","categories","plotOptions","bar","dataLabels","plotBackgroundColor","plotBorderWidth","plotShadow","pie","distance","operator","ContentContainer","CenterSpan","span","Alert","Main","exact","path","component","pathname","location","fixed","Link","replace","ballLogo","marginRight","alt","item","withRouter","App","Boolean","hostname","match","ReactDOM","render","basename","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.270e5336.chunk.js","sourcesContent":["// Maps all GCF and Scryfall API endpoints for code re-use\nconst { REACT_APP_ENVIRONMENT } = process.env;\n\n/**\n * Check the environment for dev - if dev, we reach out\n * to all endpoints appended by `_test` instead of production\n */\nconst env = REACT_APP_ENVIRONMENT === 'development' ? '_test' : '';\n\nconst endpoints = {\n    FINISH_SALE:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/finishSale${env}`,\n    ADD_CARD_TO_INVENTORY:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/addCardToInventory${env}`,\n    GET_INVENTORY_QUERY:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/inventorySearchQuery${env}`,\n    GET_SALES_BY_TITLE:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getSales${env}`,\n    GET_SCRYFALL_BULK_BY_TITLE:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getScryfallBulkCardsByTitle${env}`,\n    GET_CARDS_BY_FILTER:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByFilter${env}`,\n    GET_SET_NAMES:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByFilter${env}/set_names`,\n    SUSPEND_SALE:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/suspendSale${env}`,\n    LOGIN:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getJwt${env}`,\n    GET_ALL_SALES:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getSales${env}/sales`,\n    GET_CARDS_WITH_INFO:\n        `https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsWithInfo${env}`,\n    SCRYFALL_AUTOCOMPLETE: 'https://api.scryfall.com/cards/autocomplete',\n    SCRYFALL_SEARCH: 'https://api.scryfall.com/cards/search',\n    GET_LIVE_PRICE: `https://us-central1-clubhouse-collection.cloudfunctions.net/getPriceFromTcg${env}`\n};\n\nmodule.exports = endpoints;\n","module.exports = __webpack_public_path__ + \"static/media/magic-ball.c3fcddd6.png\";","/**\n * This function is a helper for Axios, it yields an object for Axios params\n */\nexport default function makeAuthHeader() {\n    const header = { Authorization: `Bearer ${localStorage.getItem('clubhouse_JWT')}` };\n    return header;\n}","import React, { useState } from 'react';\nimport { Search } from 'semantic-ui-react';\nimport _ from 'lodash';\nimport axios from 'axios';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport { SCRYFALL_AUTOCOMPLETE } from '../utils/api_resources';\nimport $ from 'jquery';\n\nexport default function SearchBar(props) {\n    const [isLoading, setIsLoading] = useState(false);\n    const [results, setResults] = useState([]);\n\n    const handleSearchChange = (e, { value }) => { // `value` is the search input string\n        if (value.length < 1) {\n            setIsLoading(false);\n            setResults([]);\n            return;\n        }\n\n        if (value.length < 3) return; // Don't search if only 2 letters in input\n\n        setIsLoading(true);\n\n        setTimeout(async () => {\n            const { data } = await axios.get(\n                `${SCRYFALL_AUTOCOMPLETE}?q=${value}`,\n                { headers: makeAuthHeader() }\n            );\n\n            const formattedResults = data.data.map(el => ({ title: el })).slice(0, 7);\n\n            setResults(formattedResults);\n            setIsLoading(false);\n        }, 100);\n    };\n\n    const handleResultSelect = async (e, { result }) => {\n        // This line is a hacky way to get around the fact that if we just select(), then\n        // when the user manually clicks the first (or any) result in the resultlist, it does not select,\n        // presumably because there is some collision between selecting the resultList element and focusing the input\n        setTimeout(() => $('#searchBar').select(), 10);\n        try {\n            setIsLoading(true);\n            await props.handleSearchSelect(result.title);\n            setIsLoading(false);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    return (\n        <Search\n            onSearchChange={_.debounce(handleSearchChange, 500, { leading: false, trailing: true })}\n            onResultSelect={handleResultSelect}\n            loading={isLoading}\n            results={results}\n            placeholder=\"Search for a card\"\n            selectFirstResult={true}\n            id=\"searchBar\"\n            onFocus={e => e.target.select()}\n            onBlur={props.onBlur} // Used to clear state in the Browse Inventory feature\n        />\n    );\n}\n","import React from 'react';\nimport { Label } from 'semantic-ui-react';\nimport parseQoh from '../utils/parseQoh';\n\n// This component parses the `qoh` object from mongo into something\n// more presentable\n\n// available entries:\n// {\n//     FOIL_NM: 0,\n//     FOIL_LP: 0,\n//     FOIL_MP: 0,\n//     FOIL_HP: 0,\n//     NONFOIL_NM: 0,\n//     NONFOIL_LP: 0,\n//     NONFOIL_MP: 0,\n//     NONFOIL_HP: 0\n// };\n\nexport default function QohLabels({ inventoryQty }) {\n    const [foilQty, nonfoilQty] = parseQoh(inventoryQty);\n\n    const foilColor = {};\n    if (foilQty > 0) { foilColor.color = 'blue'; }\n\n    const nonfoilColor = {};\n    if (nonfoilQty > 0) { nonfoilColor.color = 'blue'; }\n\n    return (\n        <React.Fragment>\n            <Label {...foilColor} image>\n                Foil\n        <Label.Detail>{foilQty}</Label.Detail>\n            </Label>\n            <Label {...nonfoilColor} image>\n                Nonfoil\n        <Label.Detail>{nonfoilQty}</Label.Detail>\n            </Label>\n        </React.Fragment>\n    );\n}\n","// This function parses the `qoh` object from mongo into something more presentable\n\n// available entries:\n// {\n//     FOIL_NM: 0,\n//     FOIL_LP: 0,\n//     FOIL_MP: 0,\n//     FOIL_HP: 0,\n//     NONFOIL_NM: 0,\n//     NONFOIL_LP: 0,\n//     NONFOIL_MP: 0,\n//     NONFOIL_HP: 0\n// };\n\nexport default function parseQoh(inventoryQty) {\n    let foilQty = 0;\n    let nonfoilQty = 0;\n\n    if (inventoryQty) { // Check to see if props exist\n        foilQty =\n            (inventoryQty.FOIL_NM || 0) +\n            (inventoryQty.FOIL_LP || 0) +\n            (inventoryQty.FOIL_MP || 0) +\n            (inventoryQty.FOIL_HP || 0);\n\n        nonfoilQty =\n            (inventoryQty.NONFOIL_NM || 0) +\n            (inventoryQty.NONFOIL_LP || 0) +\n            (inventoryQty.NONFOIL_MP || 0) +\n            (inventoryQty.NONFOIL_HP || 0);\n    }\n\n    return [foilQty, nonfoilQty];\n}","import React from 'react';\nimport { Message } from 'semantic-ui-react';\nimport toaster from 'toasted-notes';\n\nconst createToast = ({ color, header, message, duration = 2000 }) => {\n    return toaster.notify(\n        () => (\n            <Message color={color} compact>\n                <Message.Header>{header}</Message.Header>\n                {message}\n            </Message>\n        ),\n        {\n            position: 'bottom-right',\n            duration: duration\n        }\n    );\n}\n\nexport default createToast;","import React from 'react';\nimport { Image } from 'semantic-ui-react';\n\nconst style = {\n    boxShadow: '2px 2px 5px 0 rgba(0,0,0,.25)',\n    zIndex: '10',\n    transition: 'all .2s ease-in-out'\n}\n\nclass CardImage extends React.Component {\n    state = { hovered: false };\n\n    mouseOver = () => { this.setState({ hovered: true }) };\n\n    mouseOut = () => { this.setState({ hovered: false }) };\n\n    render() {\n        const { image_uris, card_faces, image, hover = true } = this.props // default prop `hover` must be true\n\n        if (image) {\n            return <Image\n                src={image}\n                size=\"tiny\"\n                style={{ ...style, transform: `${this.state.hovered ? 'scale(1.75)' : 'scale(1)'}` }}\n                onMouseOver={hover ? this.mouseOver : null}\n                onMouseOut={hover ? this.mouseOut : null}\n            />;\n        }\n\n        // TODO: This is obsolete logic that should be refactored out once all components ingest the ScryfallCard class,\n        // which manages the correct image URL itself\n        try {\n            // If normal prop `image_uris.normal` doesn't exist, move to catch block for flip card faces\n            return <Image\n                src={image_uris.normal}\n                size=\"tiny\"\n                style={{ ...style, transform: `${this.state.hovered ? 'scale(1.75)' : 'scale(1)'}` }}\n                onMouseOver={hover ? this.mouseOver : null}\n                onMouseOut={hover ? this.mouseOut : null}\n            />;\n        } catch (e) {\n            return <Image src={\n                card_faces[0].image_uris.normal}\n                size=\"tiny\"\n                style={{ ...style, transform: `${this.state.hovered ? 'scale(1.75)' : 'scale(1)'}` }}\n                onMouseOver={hover ? this.mouseOver : null}\n                onMouseOut={hover ? this.mouseOut : null}\n            />;\n        }\n    }\n};\n\nexport default CardImage;\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { GET_LIVE_PRICE } from '../utils/api_resources';\nimport { Label, Icon } from 'semantic-ui-react';\nimport styled from 'styled-components';\n\nconst LabelStyle = styled(Label)`\n    background-color: ${props => !!props.foil ? '#ffcfdf' : null} !important;\n    background-image: ${props => !!props.foil ? 'linear-gradient(90deg, #ffcfdf 0%, #b0f3f1 74%)' : null} !important;\n`;\n\nexport default function MarketPrice({ id, finish }) {\n    const [market, setMarket] = useState(null);\n    const [median, setMedian] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const isFoil = finish === 'FOIL';\n\n    useEffect(() => {\n        (async function fetchData() {\n            setLoading(true);\n\n            const { data } = await axios.get(GET_LIVE_PRICE, {\n                params: { scryfallId: id }\n            });\n            const { marketPrices, medianPrices } = data;\n            const MIN_PRICE = 0.5; // Management-set lowest price for each single card\n\n            if (isFoil) {\n                setMarket(Math.max(marketPrices.foil, MIN_PRICE));\n                setMedian(Math.max(medianPrices.foil, MIN_PRICE));\n            } else {\n                setMarket(Math.max(marketPrices.normal, MIN_PRICE));\n                setMedian(Math.max(medianPrices.normal, MIN_PRICE));\n            }\n\n            setLoading(false);\n        })();\n    }, [id, finish]);\n\n    const loader = <span>Loading <Icon loading name='spinner' /></span>;\n    const displayPrice = price => !!price ? `$${price.toFixed(2)}` : 'N/A';\n\n    return <React.Fragment>\n        <LabelStyle foil={isFoil}>\n            {loading ? loader : <span>Mkt. {displayPrice(market)}</span>}\n        </LabelStyle>\n        <LabelStyle foil={isFoil}>\n            {loading ? loader : <span>Mid. {displayPrice(median)}</span>}\n        </LabelStyle>\n    </React.Fragment>\n}\n","\n/**\n * This class wraps the Scryfall API request data and models it to something we can control.\n * Also acts as a safeguard for any future updates to Scryfall's API data model and makes\n * the code easier to maintain and debug.\n */\nexport class ScryfallCard {\n    constructor(card) {\n        this.id = card.id;\n        this.name = card.name;\n        this.set = card.set;\n        this.set_name = card.set_name;\n        this.rarity = card.rarity;\n        this.image_uris = card.image_uris ? card.image_uris : null;\n        this.card_faces = card.card_faces ? card.card_faces : null;\n        this.nonfoil = card.nonfoil;\n        this.foil = card.foil;\n        this.colors = card.colors;\n        this.type_line = card.type_line;\n    }\n\n    get cardImage() {\n        let myImage;\n\n        try {\n            // If normal prop doesn't exist, move to catch block for flip card faces\n            myImage = this.image_uris.normal;\n        } catch (e) {\n            myImage = this.card_faces[0].image_uris.normal;\n        }\n\n        return myImage;\n    }\n}\n\n/**\n * Extends the Scryfall card object and adds properties we know exist in our database.\n * Models the data and makes writing cards to Mongo a more confident process.\n */\nexport class InventoryCard extends ScryfallCard {\n    constructor(card) {\n        super(card);\n        this._qoh = card.qoh ? card.qoh : {};\n        // `quantity` and `qtyToSell` are redundant transaction props, unify them down the line\n        this.quantity = card.quantity ? card.quantity : null;\n        this.qtyToSell = card.qtyToSell ? card.qtyToSell : null;\n        this.finishCondition = card.finishCondition ? card.finishCondition : null;\n        this.price = card.price >= 0 ? card.price : null;\n    }\n\n    get qohParsed() {\n        const foilQty =\n            (this._qoh.FOIL_NM || 0) +\n            (this._qoh.FOIL_LP || 0) +\n            (this._qoh.FOIL_MP || 0) +\n            (this._qoh.FOIL_HP || 0);\n\n        const nonfoilQty =\n            (this._qoh.NONFOIL_NM || 0) +\n            (this._qoh.NONFOIL_LP || 0) +\n            (this._qoh.NONFOIL_MP || 0) +\n            (this._qoh.NONFOIL_HP || 0);\n\n        return [foilQty, nonfoilQty];\n    }\n\n    get qoh() {\n        return this._qoh;\n    }\n\n    set qoh(quantities) {\n        this._qoh = quantities ? quantities : {};\n    }\n}\n","import React, { useState } from 'react';\nimport { Segment, Input, Button, Form, Select, Label, Item } from 'semantic-ui-react';\nimport axios from 'axios';\nimport QohLabels from '../common/QohLabels';\nimport createToast from '../common/createToast';\nimport CardImage from '../common/CardImage';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport MarketPrice from '../common/MarketPrice'\nimport { ADD_CARD_TO_INVENTORY } from '../utils/api_resources';\nimport $ from 'jquery';\nimport { InventoryCard } from '../utils/ScryfallCard';\n\nconst finishes = [\n    { key: 'NONFOIL', text: 'Nonfoil', value: 'NONFOIL' },\n    { key: 'FOIL', text: 'Foil', value: 'FOIL' }\n];\n\nconst cardConditions = [\n    { key: 'NM', text: 'Near Mint', value: 'NM' },\n    { key: 'LP', text: 'Light Play', value: 'LP' },\n    { key: 'MP', text: 'Moderate Play', value: 'MP' },\n    { key: 'HP', text: 'Heavy Play', value: 'HP' }\n];\n\n/**\n * Seeds state from props. Used to determine if cards have only foil, nonfoil, or both printings\n * from their `foil` and `nonfoil`\n * @param {Boolean} nonfoilProp\n * @param {Boolean} foilProp\n */\nfunction checkCardFinish(nonfoilProp, foilProp) {\n    if (!nonfoilProp && foilProp) {\n        return { selectedFinish: 'FOIL', finishDisabled: true };\n    } else if (nonfoilProp && !foilProp) {\n        return { selectedFinish: 'NONFOIL', finishDisabled: true };\n    } else if (nonfoilProp && foilProp) {\n        return { selectedFinish: 'NONFOIL', finishDisabled: false };\n    }\n}\n\nexport default function ScryfallCardListItem({ qoh, foil, nonfoil, name, set_name, set, rarity, id, cardImage }) {\n    const [quantity, setQuantity] = useState(0);\n    const [selectedFinish, setSelectedFinish] = useState(checkCardFinish(nonfoil, foil).selectedFinish);\n    const [selectedCondition, setSelectedCondition] = useState('NM');\n    const [finishDisabled, setFinishDisabled] = useState(checkCardFinish(nonfoil, foil).finishDisabled);\n    const [submitDisable, setSubmitDisable] = useState(false);\n    const [inventoryQty, setInventoryQty] = useState(qoh);\n    const [submitLoading, setSubmitLoading] = useState(false);\n\n    const handleFinishChange = (e, { value }) => setSelectedFinish(value);\n\n    const handleConditionChange = (e, { value }) => setSelectedCondition(value);\n\n    const handleQuantityChange = (e, { value }) => {\n        const val = parseInt(value);\n        const quantity = isNaN(val) ? '' : val; // Check for NaN\n        setQuantity(quantity);\n    };\n\n    // Remove input placeholder when user tries to enter a number (to reduce user error)\n    const handleFocus = () => {\n        if (quantity === 0) setQuantity('');\n    }\n\n    // Restore input placeholder when user blurs field\n    const handleBlur = () => {\n        if (quantity === '') setQuantity(0);\n    }\n\n    const handleInventoryAdd = async (e, { value }) => {\n        // This is the identifier for quantities of different finishes/conditions in the db\n        const finishCondition = `${selectedFinish}_${selectedCondition}`;\n\n        try {\n            setSubmitDisable(true);\n            setSubmitLoading(true);\n\n            const { data } = await axios.post(ADD_CARD_TO_INVENTORY, {\n                quantity: quantity,\n                finishCondition: finishCondition,\n                cardInfo: { id, name, set_name, set },\n            }, { headers: makeAuthHeader() });\n\n            createToast({\n                color: 'green',\n                header: `${quantity}x ${name} ${quantity > 0 ? 'added' : 'removed'}!`,\n                duration: 2000\n            });\n\n            setQuantity(0);\n            setSelectedFinish(checkCardFinish(nonfoil, foil).selectedFinish);\n            setSelectedCondition('NM');\n            setFinishDisabled(checkCardFinish(nonfoil, foil).finishDisabled);\n            setSubmitDisable(false);\n            setSubmitLoading(false);\n            setInventoryQty(new InventoryCard(data).qoh);\n\n            // Highlight the input after successful card add\n            $('#searchBar').focus().select();\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    return (\n        <Segment>\n            <Item.Group divided>\n                <Item>\n                    <Item.Image size=\"tiny\">\n                        <CardImage image={cardImage} />\n                    </Item.Image>\n                    <Item.Content>\n                        <Item.Header as='h3'>\n                            {name}\n                            {' '}\n                            <i\n                                className={`ss ss-fw ss-${set} ss-${rarity}`}\n                                style={{ fontSize: '30px' }}\n                            />\n                            <Label color=\"grey\">\n                                {set_name} ({String(set).toUpperCase()})\n                                </Label>\n                            <QohLabels inventoryQty={inventoryQty} />\n                            {' '}\n                            <MarketPrice id={id} finish={selectedFinish} />\n                        </Item.Header>\n                        <Item.Description>\n                            <Form>\n                                <Form.Group>\n                                    <Form.Field\n                                        control={Input}\n                                        type=\"number\"\n                                        label=\"Quantity\"\n                                        value={quantity}\n                                        onChange={handleQuantityChange}\n                                        onFocus={handleFocus}\n                                        onBlur={handleBlur}\n                                    />\n                                    <Form.Field\n                                        label=\"Finish\"\n                                        control={Select}\n                                        value={selectedFinish}\n                                        options={finishes}\n                                        disabled={finishDisabled}\n                                        onChange={handleFinishChange}\n                                    />\n                                    <Form.Field\n                                        label=\"Condition\"\n                                        control={Select}\n                                        value={selectedCondition}\n                                        options={cardConditions}\n                                        onChange={handleConditionChange}\n                                    />\n                                    <Form.Button\n                                        label=\"Add to Inventory?\"\n                                        control={Button}\n                                        primary\n                                        disabled={\n                                            quantity === 0 ||\n                                            quantity === '' ||\n                                            submitDisable\n                                        }\n                                        onClick={handleInventoryAdd}\n                                        loading={submitLoading}\n                                    >\n                                        Submit\n                                    </Form.Button>\n                                </Form.Group>\n                            </Form>\n                        </Item.Description>\n                    </Item.Content>\n                </Item>\n            </Item.Group>\n        </Segment>\n    );\n}\n","import React from 'react';\nimport ScryfallCardListItem from './ScryfallCardListItem';\n\nexport default function ScryfallCardList(props) {\n    return props.cards.map(card => {\n        return <ScryfallCardListItem\n            key={card.id}\n            {...card}\n            cardImage={card.cardImage}\n            qoh={card.qoh}\n        />\n    });\n}\n","import React, { useState } from 'react';\nimport SearchBar from '../common/SearchBar';\nimport axios from 'axios';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport ScryfallCardList from './ScryfallCardList';\nimport { Segment, Header, Icon, Divider } from 'semantic-ui-react'\nimport { GET_CARDS_WITH_INFO } from '../utils/api_resources';\nimport { InventoryCard } from '../utils/ScryfallCard';\n\nexport default function Home() {\n    const [searchResults, setSearchResults] = useState([]);\n\n    const handleSearchSelect = async term => {\n        try {\n            const { data } = await axios.get(\n                GET_CARDS_WITH_INFO, {\n                params: { title: term, matchInStock: false },\n                headers: makeAuthHeader()\n            });\n\n            const modeledData = data.map(c => new InventoryCard(c));\n\n            setSearchResults(modeledData);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    return (\n        <React.Fragment>\n            <SearchBar handleSearchSelect={handleSearchSelect} />\n\n            <Header as=\"h2\">Manage Inventory</Header>\n            <Divider />\n\n            {!searchResults.length &&\n                <Segment placeholder>\n                    <Header icon>\n                        <Icon name=\"search\" />\n                        <em>\"Searching the future for answers often leads to further questions.\"</em>\n                    </Header>\n                </Segment>}\n\n            <ScryfallCardList cards={searchResults} />\n        </React.Fragment>\n    );\n}\n","import React from 'react';\nimport {\n    Segment,\n    Label,\n    Form,\n    Input,\n    Dropdown,\n    Button,\n    Item\n} from 'semantic-ui-react';\nimport CardImage from '../common/CardImage';\nimport MarketPrice from '../common/MarketPrice';\nimport QohLabels from '../common/QohLabels';\nimport $ from 'jquery';\nimport _ from 'lodash';\n\n/**\n * Creates a list of conditions for the dropdown menu from the `qoh`\n * Note: Is this not needed if we default select initially?\n * @param {Object} qoh\n * @param {String} id\n */\nfunction createConditionOptions(qoh, id) {\n    const removeZeroedQuantites = _.pickBy(qoh, p => p > 0); // Quantites of zero not included\n\n    return Object.entries(removeZeroedQuantites).map(d => {\n        const [conditionFinish, qty] = d;\n\n        return {\n            text: `${conditionFinish.split('_').join(' | ')} | Qty: ${qty}`,\n            value: conditionFinish,\n            key: `${id}${conditionFinish}`\n        };\n    });\n}\n\n/**\n * Creates initial selectedFinish value, used for the MarketPrice component\n * Returns FOIL or NONFOIL depending on what's in current inventory (qoh)\n * @param {Object} qoh\n */\nfunction createInitialSelectedFinish(qoh) {\n    const removeZeroedQuantites = _.pickBy(qoh, p => p > 0);\n    // Isolate only the FOIL or NONFOIL values with mapping\n    const keysMapped = _.keys(removeZeroedQuantites).map(k => k.split('_')[0]);\n    const uniqueValues = _.uniq(keysMapped);\n    return uniqueValues.indexOf('NONFOIL') > -1 ? 'NONFOIL' : 'FOIL';\n}\n\nexport default class BrowseCardItem extends React.Component {\n    state = {\n        selectedFinishCondition: '',\n        selectedFinishConditionQty: 0,\n        quantityToSell: 0,\n        price: 0,\n        // Excludes condition ex. `FOIL` rather than `FOIL_NM`. Initialize at nonfoil unless only foil printing\n        selectedFinish: createInitialSelectedFinish(this.props.qoh),\n        conditionOptions: createConditionOptions(this.props.qoh, this.props.id)\n    };\n\n    handleQuantityChange = (e, { value }) => {\n        const { selectedFinishConditionQty } = this.state;\n        let numVal = parseInt(value);\n\n        if (numVal > selectedFinishConditionQty) {\n            numVal = selectedFinishConditionQty;\n        }\n\n        if (isNaN((numVal)) || numVal < 0) { numVal = 0; }\n\n        this.setState({ quantityToSell: numVal });\n    };\n\n    handleSelectedFinishCondition = (e, { value }) => {\n        this.setState({\n            selectedFinishCondition: value,\n            selectedFinishConditionQty: this.props.qoh[value],\n            selectedFinish: value.split('_')[0] // Change selectedFinish after user selection\n        });\n    };\n\n    handlePriceChange = (e, { value }) => {\n        let numVal = Number(value);\n        if (isNaN((numVal)) || numVal < 0) { numVal = 0; }\n        this.setState({ price: numVal });\n    };\n\n    // Remove input placeholder when user tries to enter a number (to reduce user error)\n    handleFocus = (property) => {\n        if (this.state[property] === 0) {\n            this.setState({ [property]: '' })\n        }\n    }\n\n    // Restore input placeholder when user blurs field\n    handleBlur = (property) => {\n        if (this.state[property] === '') {\n            this.setState({ [property]: 0 })\n        }\n    }\n\n    handleAddToSale = () => {\n        const { selectedFinishCondition, quantityToSell, price } = this.state;\n        const { qoh, id } = this.props;\n\n        this.props.addToSaleList(\n            { ...this.props },\n            selectedFinishCondition,\n            quantityToSell,\n            price\n        );\n\n        // Reset state\n        this.setState({\n            selectedFinishCondition: '',\n            selectedFinishConditionQty: 0,\n            quantityToSell: 0,\n            price: 0,\n            conditionOptions: createConditionOptions(qoh, id),\n            selectedFinish: createInitialSelectedFinish(qoh)\n        });\n\n        // Highlight the input after successful card add\n        $('#searchBar').focus().select();\n    };\n\n    render() {\n        const {\n            name,\n            image_uris,\n            set,\n            set_name,\n            rarity,\n            qoh,\n            id,\n            card_faces\n        } = this.props;\n\n        const {\n            selectedFinishCondition,\n            selectedFinishConditionQty,\n            selectedFinish,\n            conditionOptions,\n            quantityToSell,\n            price\n        } = this.state;\n\n        return (\n            <Segment>\n                <Item.Group divided>\n                    <Item>\n                        <Item.Image size=\"tiny\">\n                            <CardImage\n                                image_uris={image_uris}\n                                card_faces={card_faces}\n                            />\n                        </Item.Image>\n                        <Item.Content>\n                            <Item.Header as=\"h3\">\n                                {name}{' '}\n                                <i\n                                    className={`ss ss-fw ss-${set} ss-${rarity}`}\n                                    style={{ fontSize: '30px' }}\n                                />\n                                <Label color=\"grey\">\n                                    {set_name} ({String(set).toUpperCase()})\n                                </Label>\n                                <QohLabels inventoryQty={qoh} />\n                                {' '}\n                                <MarketPrice id={id} finish={selectedFinish} />\n                            </Item.Header>\n                            <Item.Description>\n                                <Form>\n                                    <Form.Group>\n                                        <Form.Field\n                                            control={Dropdown}\n                                            selection\n                                            placeholder=\"Select inventory\"\n                                            options={conditionOptions}\n                                            value={selectedFinishCondition}\n                                            label=\"Select finish/condition\"\n                                            onChange={this.handleSelectedFinishCondition}\n                                        />\n                                        <Form.Field\n                                            control={Input}\n                                            type=\"number\"\n                                            label=\"Quantity to sell\"\n                                            value={quantityToSell}\n                                            onChange={this.handleQuantityChange}\n                                            disabled={!selectedFinishConditionQty}\n                                            onFocus={() => this.handleFocus('quantityToSell')}\n                                            onBlur={() => this.handleBlur('quantityToSell')}\n                                        />\n                                        <Form.Field\n                                            control={Input}\n                                            type=\"number\"\n                                            label=\"Price\"\n                                            value={price}\n                                            onChange={this.handlePriceChange}\n                                            disabled={!selectedFinishConditionQty}\n                                            onFocus={() => this.handleFocus('price')}\n                                            onBlur={() => this.handleBlur('price')}\n                                            step={0.5}\n                                        />\n                                        <Form.Button\n                                            label=\"Add to sale?\"\n                                            control={Button}\n                                            primary\n                                            onClick={this.handleAddToSale}\n                                            disabled={!quantityToSell}\n                                        >\n                                            Sell\n                                    </Form.Button>\n                                    </Form.Group>\n                                </Form>\n                            </Item.Description>\n                        </Item.Content>\n                    </Item>\n                </Item.Group>\n            </Segment>\n        );\n    }\n}\n","import React from 'react';\nimport BrowseCardItem from './BrowseCardItem';\n\nexport default function BrowseCardList(props) {\n    const { cards, addToSaleList } = props;\n\n    return cards.map(card => {\n        return (\n            <BrowseCardItem\n                key={card.id}\n                {...card}\n                qoh={card.qoh}\n                addToSaleList={addToSaleList}\n            />\n        );\n    });\n}\n","import React from 'react';\n\nconst Price = ({ num }) => {\n    const price = Number(num).toFixed(2);\n    if (isNaN(price)) return <span>$0.00</span>;\n    return <span>${price}</span>;\n};\n\nexport default Price;\n","import React from 'react';\nimport Price from '../common/Price';\n\nconst SalePriceTotal = ({ saleList }) => {\n    const total = saleList.length\n        ? saleList.reduce(\n            (acc, val) => acc + parseInt(val.qtyToSell) * Number(val.price),\n            0\n        )\n        : 0;\n\n    return <Price num={total} />;\n};\n\nexport default SalePriceTotal;\n","import React, { useState } from 'react';\nimport { Button, Label, Table } from 'semantic-ui-react';\nimport Price from '../common/Price';\n\nexport default function SaleLineItem(props) {\n    const {\n        name,\n        set,\n        finishCondition,\n        qtyToSell,\n        price,\n        rarity,\n        deleteLineItem,\n        id\n    } = props;\n\n    const [hovered, setHovered] = useState(false);\n\n    return (\n        <Table.Row>\n            <Table.Cell><h4>{name}</h4></Table.Cell>\n            <Table.Cell singleLine>\n                <i\n                    className={`ss ss-fw ss-${set} ss-${rarity}`}\n                    style={{ fontSize: '20px' }}\n                />\n                <Label color=\"grey\">{set.toUpperCase()}</Label>\n            </Table.Cell>\n            <Table.Cell>\n                {qtyToSell}x @ <Price num={price} /> | {finishCondition}\n            </Table.Cell>\n            <Table.Cell>\n                <Button\n                    icon=\"cancel\"\n                    circular\n                    onClick={() => deleteLineItem(id, finishCondition)}\n                    onMouseOver={() => setHovered(true)}\n                    onMouseOut={() => setHovered(false)}\n                    color={hovered ? 'red' : null}\n                >\n                </Button>\n            </Table.Cell>\n        </Table.Row>\n    );\n}\n","import React from 'react';\nimport SaleLineItem from './SaleLineItem';\nimport { Table } from 'semantic-ui-react';\n\nconst CustomerSaleList = ({ saleList, removeFromSaleList }) => {\n    return <Table>\n        <Table.Body>\n            {saleList.map(card => {\n                return <SaleLineItem\n                    {...card}\n                    key={`${card.id}${card.finishCondition}${card.qtyToSell}`}\n                    deleteLineItem={removeFromSaleList}\n                />\n            })}\n        </Table.Body>\n    </Table>\n\n};\n\nexport default CustomerSaleList;","import React from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\nimport Price from '../common/Price';\nimport './PrintList.css';\nimport SalePriceTotal from './SalePriceTotal';\n\nconst Row = ({ id, name, qtyToSell, finishCondition, set_name, price }) => {\n    return <li key={id}>\n        <b>{name} | x{qtyToSell} | {finishCondition} | {set_name} | <Price num={price} /></b>\n    </li>\n}\n\nexport default class PrintList extends React.Component {\n    state = { printClicked: false }\n\n    print = () => {\n        this.setState({ printClicked: true }, () => {\n            window.print();\n            this.setState({ printClicked: false })\n        });\n    }\n\n    render() {\n        const { saleListCards } = this.props;\n        const { printClicked } = this.state;\n\n        if (saleListCards.length > 0) { // Ensure print is hidden if no cards in list\n            return (\n                <React.Fragment>\n                    <Button style={{ display: 'inline-block', float: 'right' }} onClick={this.print} icon>\n                        <Icon name=\"print\" />\n                    </Button>\n\n                    <div id=\"printme\" style={{ display: printClicked ? 'inline-block' : 'none' }}>\n                        <ul>{saleListCards.map(c => Row(c))}</ul>\n                        <span><b>Subtotal: <SalePriceTotal saleList={saleListCards} /></b></span>\n                    </div>\n                </React.Fragment >\n            )\n        } else {\n            return null;\n        }\n    }\n}","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { SUSPEND_SALE } from '../utils/api_resources';\nimport { Modal, Button, Grid, Form, Message } from 'semantic-ui-react';\nimport styled from 'styled-components';\n\nconst Divider = styled.div`\n    border-left: 1px solid rgba(0, 0, 0, 0.2);\n    height: 100%;\n`;\n\nconst ClearMargin = styled.div`\n    margin-top: 0px;\n    margin-bottom: 0px;\n`;\n\nconst CharLimit = styled.p`\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.2);\n    float: right;\n`;\n\nexport default function SuspendedSale({ restoreSale, deleteSuspendedSale, saleListLength, suspendSale, id }) {\n    const [sales, setSales] = useState([]);\n    const [saleID, setSaleID] = useState('');\n    const [modalOpen, setModalOpen] = useState(false);\n    const [customerName, setCustomerName] = useState('');\n    const [notes, setNotes] = useState('');\n    const [disabled, setDisabled] = useState(false);\n    const [loadingBtn, setLoadingBtn] = useState({\n        suspendBtn: false,\n        restoreBtn: false,\n        deleteBtn: false\n    });\n\n    const getSales = async () => {\n        const { data } = await axios.get(SUSPEND_SALE);\n        setSales(data);\n    }\n\n    const clearFields = () => {\n        setCustomerName('');\n        setNotes('')\n        setSaleID('');\n    }\n\n    // Get the previously suspended sales on mount and parent state (_id) change\n    useEffect(() => { getSales(); }, [id]); // If the parent-level suspended-sale _id changes, we fetch again\n\n    const modalTrigger = <Button\n        style={{ display: 'inline-block', float: 'right' }}\n        onClick={() => setModalOpen(true)}\n        icon=\"ellipsis horizontal\" />\n\n    const submitSuspendSale = async () => {\n        setDisabled(true);\n        setLoadingBtn({ suspendBtn: true });\n        await suspendSale({ customerName, notes });\n        setModalOpen(false); // Close the modal to avoid \"flicker\" when state re-renders\n        await getSales(); // Parent _id does not change, re-fetch sales\n        clearFields();\n        setDisabled(false);\n        setLoadingBtn({ suspendBtn: false });\n    }\n\n    const submitRestoreSale = async () => {\n        setDisabled(true);\n        setLoadingBtn({ restoreBtn: true });\n        await restoreSale(saleID);\n        setModalOpen(false);\n        clearFields();\n        setDisabled(false);\n        setLoadingBtn({ restoreBtn: false });\n    }\n\n    const submitDeleteSale = async () => {\n        setDisabled(true);\n        setLoadingBtn({ deleteBtn: true });\n        await deleteSuspendedSale();\n        setModalOpen(false);\n        clearFields();\n        setDisabled(false);\n        setLoadingBtn({ deleteBtn: false });\n    }\n\n    return <React.Fragment>\n        <Modal trigger={modalTrigger} open={modalOpen}>\n            <Modal.Header>Sales menu</Modal.Header>\n            <Modal.Content>\n                <Grid columns={2} stackable relaxed=\"very\">\n                    {saleListLength > 0 && <React.Fragment>\n                        <Grid.Column width=\"7\">\n                            <h3>Suspend Sale</h3>\n                            <Form>\n                                <ClearMargin>\n                                    <Form.Input\n                                        label=\"Customer Name\"\n                                        placeholder=\"Jace, the Mind Sculptor\"\n                                        value={customerName}\n                                        onChange={(e, { value }) => setCustomerName(value.substring(0, 50))} />\n                                </ClearMargin>\n                                <ClearMargin>\n                                    <CharLimit>{customerName.length}/50</CharLimit>\n                                </ClearMargin>\n                                <ClearMargin>\n                                    <Form.TextArea\n                                        label=\"Notes\"\n                                        placeholder=\"Sometimes, I forget things...\"\n                                        value={notes}\n                                        onChange={(e, { value }) => setNotes(value.substring(0, 150))} />\n                                </ClearMargin>\n                                <ClearMargin>\n                                    <CharLimit>{notes.length}/150</CharLimit>\n                                </ClearMargin>\n                                <Form.Button primary disabled={disabled || !customerName} loading={loadingBtn.suspendBtn} onClick={submitSuspendSale}>Suspend Sale</Form.Button>\n                            </Form>\n                        </Grid.Column>\n                        <Grid.Column width=\"1\"><Divider /></Grid.Column>\n                    </React.Fragment>}\n                    <Grid.Column width=\"7\">\n                        <h3>Restore Sale</h3>\n                        {sales.length > 0 && <React.Fragment>\n                            <Form>\n                                <Form.Select\n                                    fluid\n                                    label=\"Previously suspended sales\"\n                                    options={sales.map(s => {\n                                        return {\n                                            key: s._id,\n                                            text: s.name,\n                                            value: s._id\n                                        }\n                                    })}\n                                    placeholder=\"Select a sale\"\n                                    onChange={(e, { value }) => setSaleID(value)}\n                                />\n                                <Form.Button primary disabled={disabled || !saleID} loading={loadingBtn.restoreBtn} onClick={submitRestoreSale}>Restore Sale</Form.Button>\n                            </Form>\n                        </React.Fragment>}\n                        {sales.length === 0 && <Message info>\n                            <Message.Header>No sales</Message.Header>\n                            Suspend a sale first\n                        </Message>}\n                    </Grid.Column>\n                </Grid>\n            </Modal.Content>\n            <Modal.Actions>\n                {!!id && <Button color=\"red\" disabled={disabled} loading={loadingBtn.deleteBtn} onClick={submitDeleteSale}>Delete current Sale</Button>}\n                <Button primary disabled={disabled} onClick={() => setModalOpen(false)}>Cancel</Button>\n            </Modal.Actions>\n        </Modal>\n    </React.Fragment >\n}","import React, { useState } from 'react';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport $ from 'jquery';\nimport { Grid, Segment, Header, Button, Modal, Icon, Divider } from 'semantic-ui-react';\nimport { GET_CARDS_WITH_INFO, FINISH_SALE, SUSPEND_SALE } from '../utils/api_resources';\nimport SearchBar from '../common/SearchBar';\nimport BrowseCardList from './BrowseCardList';\nimport SalePriceTotal from './SalePriceTotal';\nimport CustomerSaleList from './CustomerSaleList';\nimport PrintList from './PrintList';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport createToast from '../common/createToast';\nimport SuspendedSale from './SuspendedSale';\nimport sortSaleList from '../utils/sortSaleList';\nimport { InventoryCard } from '../utils/ScryfallCard';\n\nexport default function Sale() {\n    const [searchResults, setSearchResults] = useState([]);\n    const [saleListCards, setSaleListCards] = useState([]);\n    const [showModal, setShowModal] = useState(false);\n    const [submit, setSubmit] = useState({ loading: false, disabled: false });\n    const [searchTerm, setSearchTerm] = useState('');\n    const [suspendedSale, setSuspendedSale] = useState({\n        _id: '',\n        name: '',\n        notes: '',\n        list: []\n    });\n\n    const resetState = () => {\n        setSearchResults([]);\n        setSaleListCards([]);\n        setShowModal(false);\n        setSubmit({ loading: false, disabled: false });\n        setSearchTerm('');\n        setSuspendedSale({\n            _id: '',\n            name: '',\n            notes: '',\n            list: []\n        })\n    };\n\n    const handleResultSelect = async term => {\n        try {\n            const { data } = await axios.get(GET_CARDS_WITH_INFO, {\n                params: { title: term, matchInStock: true },\n                headers: makeAuthHeader()\n            });\n\n            const modeledData = data.map(c => new InventoryCard(c));\n\n            setSearchResults(modeledData);\n            setSearchTerm(term);\n\n            if (data.length === 0) { $('#searchBar').focus().select() }\n        } catch (e) {\n            console.log(e.response);\n        }\n    };\n\n    /**\n     * Adds product to the sale list\n     */\n    const addToSaleList = (card, finishCondition, qtyToSell, price) => {\n        const newCard = { ...card, finishCondition, qtyToSell, price };\n        const oldState = [...saleListCards];\n        const modeledCard = new InventoryCard(newCard);\n\n        // Need to make sure same ID's with differing conditions are separate line-items\n        const idx = oldState.findIndex(el => {\n            return (\n                el.id === newCard.id && el.finishCondition === finishCondition\n            );\n        });\n\n        if (idx !== -1) {\n            oldState.splice(idx, 1, modeledCard);\n        } else {\n            oldState.push(modeledCard);\n        }\n\n        // Sorting the saleList cards here, on add\n        const sortedCards = sortSaleList(oldState);\n\n        setSaleListCards(sortedCards);\n    };\n\n    /**\n     * Removes product from the sale list (this function is passed to the sale line items through props)\n     */\n    const removeFromSaleList = (id, finishCondition) => {\n        const newState = _.reject([...saleListCards], el => {\n            return el.id === id && el.finishCondition === finishCondition;\n        });\n\n        setSaleListCards(newState);\n    };\n\n    /**\n     * Restores a sale (assigns a saleList to state) from a suspended sale from the db\n     */\n    const restoreSale = async (id) => {\n        try {\n            const { data } = await axios.get(`${SUSPEND_SALE}/${id}`);\n            const modeledData = data.list.map(c => new InventoryCard(c));\n\n            setSaleListCards(modeledData);\n            setSuspendedSale(data);\n\n            createToast({ color: 'green', header: `You are viewing ${data.name}'s sale` });\n        } catch (e) {\n            console.log(e.response);\n            createToast({ color: 'red', header: `Error` });\n        }\n    }\n\n    /**\n     * Suspends a sale (persists it to mongo) via the SuspendedSale component and API\n     */\n    const suspendSale = async ({ customerName, notes }) => {\n        const { _id } = suspendedSale;\n\n        try {\n            if (!!_id) await axios.delete(`${SUSPEND_SALE}/${_id}`); // If we're suspended, delete the previous to replace\n\n            const { data } = await axios.post(SUSPEND_SALE, {\n                customerName: customerName,\n                notes: notes,\n                saleList: saleListCards\n            })\n\n            resetState();\n\n            createToast({ color: 'green', header: `${data.ops[0].name}'s sale was suspended` });\n        } catch (e) {\n            console.log(e.response);\n            createToast({ color: 'red', header: `Error`, message: `${e.response.data}` });\n        }\n    }\n\n    const deleteSuspendedSale = async () => {\n        try {\n            const { _id, name } = suspendedSale;\n            await axios.delete(`${SUSPEND_SALE}/${_id}`);\n\n            resetState();\n\n            createToast({ color: 'green', header: `${name}'s sale was deleted` });\n        } catch (e) {\n            console.log(e.response);\n            createToast({ color: 'red', header: `Error` });\n        }\n    }\n\n    /**\n     * Extracts the saleList state and uses it to complete sale\n     */\n    const finalizeSale = async () => {\n        const { _id } = suspendedSale;\n\n        try {\n            setSubmit({ loading: true, disabled: true });\n\n            // Must delete currently suspended sale to faithfully restore inventory prior to sale\n            if (!!_id) await axios.delete(`${SUSPEND_SALE}/${_id}`);\n\n            const { data } = await axios.post(FINISH_SALE, { cards: saleListCards }, { headers: makeAuthHeader() });\n\n            const saleID = data.sale_data.Sale.saleID;\n\n            createToast({\n                color: 'green',\n                header: 'Sale created in Lightspeed!',\n                message: `The id number is #${saleID}`,\n            });\n\n            resetState();\n        } catch (e) {\n            createToast({\n                color: 'red',\n                header: 'Error',\n                message: `Sale was not created`,\n            });\n\n            resetState();\n            console.log(e.response);\n        }\n    };\n\n    // Creates text to notify the user of zero-result searches\n    const searchNotification = () => {\n        if (searchTerm && !searchResults.length) { // Check to make sure the user has searched and no results\n            return <p>Zero results for <em>{searchTerm}</em></p>\n        }\n        return <p>Search for inventory to sell</p>; // Default text before search\n    }\n\n    const modalTrigger = <Button floated=\"right\" primary\n        onClick={() => setShowModal(true)}>\n        Finalize sale\n        </Button>\n\n    return (\n        <React.Fragment>\n            <Grid.Row style={{ display: 'flex', alignItems: 'center' }}>\n                <SearchBar handleSearchSelect={handleResultSelect} />\n            </Grid.Row>\n            <br />\n            <Grid stackable={true}>\n                <Grid.Row>\n                    <Grid.Column width=\"11\">\n                        <Header as=\"h2\" style={{ display: \"inline-block\" }}>Inventory</Header>\n                        <Divider />\n\n                        {!searchResults.length &&\n                            <Segment placeholder>\n                                <Header icon>\n                                    <Icon name=\"search\" />\n                                    <span>{searchNotification()}</span>\n                                </Header>\n                            </Segment>}\n\n                        <BrowseCardList\n                            cards={searchResults}\n                            addToSaleList={addToSaleList}\n                        />\n                    </Grid.Column>\n                    <Grid.Column width=\"5\">\n                        <Header as=\"h2\" style={{ display: 'inline-block' }}>\n                            {suspendedSale.name === '' ? 'Sale Items' : `${suspendedSale.name}'s Items`}\n                        </Header>\n\n                        <SuspendedSale\n                            restoreSale={restoreSale}\n                            suspendSale={suspendSale}\n                            saleListLength={saleListCards.length}\n                            deleteSuspendedSale={deleteSuspendedSale}\n                            id={suspendedSale._id}\n                        />\n                        <PrintList saleListCards={saleListCards} />\n\n                        <Divider />\n\n                        {saleListCards.length === 0 &&\n                            <Segment placeholder>\n                                <Header icon>\n                                    <Icon name=\"plus\" />\n                                    View and manage customer sale list here\n                                </Header>\n                            </Segment>}\n\n                        {saleListCards.length > 0 && <React.Fragment>\n                            <CustomerSaleList\n                                removeFromSaleList={removeFromSaleList}\n                                saleList={saleListCards}\n                            />\n                        </React.Fragment>}\n\n                        {saleListCards.length > 0 && (\n                            <Segment clearing>\n                                <Header floated=\"left\">\n                                    <Header sub>Subtotal</Header>\n                                    <SalePriceTotal\n                                        saleList={saleListCards}\n                                    />\n                                </Header>\n                                <Modal\n                                    basic\n                                    open={showModal}\n                                    trigger={modalTrigger}>\n                                    <Modal.Content>\n                                        <Header inverted as=\"h2\">\n                                            Finalize this sale?\n                                            </Header>\n                                        <p>\n                                            Click 'Yes' to create a sale\n                                            in Lightspeed. Ensure that\n                                            you have all cards pulled and double-checked\n                                            the customer list. Undoing this action will require manual data entry!\n                                            </p>\n                                    </Modal.Content>\n                                    <Modal.Actions>\n                                        <Button\n                                            basic\n                                            color=\"red\"\n                                            inverted\n                                            onClick={() => setShowModal(false)}>\n                                            <Icon name=\"remove\" /> No\n                                            </Button>\n                                        <Button\n                                            color=\"green\"\n                                            inverted\n                                            onClick={finalizeSale}\n                                            loading={submit.loading}\n                                            disabled={submit.disabled}>\n                                            <Icon name=\"checkmark\" /> Yes\n                                            </Button>\n                                    </Modal.Actions>\n                                </Modal>\n                            </Segment>)}\n                    </Grid.Column>\n                </Grid.Row >\n            </Grid >\n        </React.Fragment >\n    );\n}\n","/**\n * Takes in an unordered group of cards and sorts them according to The Clubhouse's specs:\n * WUBRG, then multicolor, then colorless, then land, alphabetically within each color/category\n */\nexport default function sortSaleList(cards) {\n    const ORDER = ['W', 'U', 'B', 'R', 'G', 'MULTI', 'COLORLESS', 'LAND'];\n\n    /**\n     * Main helper function that manages sort order\n     * @param {Object} card\n     */\n    function helpSort(card) {\n        let arrayConst = null;\n\n        let colorsLength = null;\n        let cardFace = null;\n\n        try {\n            // If colors don't exist, it's a flip card or storybook frame\n            colorsLength = card.colors.length;\n            cardFace = card;\n        } catch (e) {\n            try {\n                // Storybook frames from Eldraine may throw error\n                colorsLength = card.card_faces[0].colors.length;\n                cardFace = card.card_faces[0];\n            } catch (e) {\n                colorsLength = card.colors.length;\n                cardFace = card;\n            }\n        }\n\n        // Apply logic to return correct constant enum\n        if (colorsLength === 0) {\n            arrayConst = 'COLORLESS';\n        } else if (colorsLength === 1) {\n            arrayConst = cardFace.colors[0];\n        } else if (colorsLength > 1) {\n            arrayConst = 'MULTI';\n        }\n\n        // Drill into colorless cards, if they are lands or not\n        if (arrayConst === 'COLORLESS') {\n            if (cardFace.type_line.includes('Land')) {\n                arrayConst = 'LAND';\n            }\n        }\n\n        // Final check to guard against a null arrayConst\n        if (!arrayConst) { arrayConst = 'LAND' }\n\n        return arrayConst;\n    }\n\n    const alphaSort = cards.sort((a, b) => {\n        return a.name.localeCompare(b.name);\n    });\n\n    const sorted = alphaSort.sort((a, b) => {\n        return ORDER.indexOf(helpSort(a)) - ORDER.indexOf(helpSort(b));\n    });\n\n    return sorted;\n}","import React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport moment from 'moment';\n\nconst SalesListItem = ({ saleData, cardList }) => {\n    const quantitySold = cardList.reduce(\n        (pre, curr) => pre + curr.qtyToSell,\n        0\n    );\n\n    return (\n        <Table.Row>\n            <Table.Cell>{saleData.saleID}</Table.Cell>\n            <Table.Cell>\n                {moment(saleData.createTime).format('MM/DD/YYYY - h:mm A')}\n            </Table.Cell>\n            <Table.Cell>{quantitySold}</Table.Cell>\n        </Table.Row>\n    );\n};\n\nexport default SalesListItem;\n","import React from 'react';\nimport SalesListItem from './SalesListItem';\nimport { Table } from 'semantic-ui-react';\n\nconst SalesList = ({ list }) => {\n    return (\n        <Table celled unstackable compact>\n            <Table.Header>\n                <Table.Row>\n                    <Table.HeaderCell>Sale ID</Table.HeaderCell>\n                    <Table.HeaderCell>Date of Sale</Table.HeaderCell>\n                    <Table.HeaderCell>Quantity Sold</Table.HeaderCell>\n                </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n                {list.map(({ sale_data, card_list, _id }) => (\n                    <SalesListItem\n                        saleData={sale_data}\n                        cardList={card_list}\n                        key={_id}\n                    />\n                ))}\n            </Table.Body>\n        </Table>\n    );\n};\n\nexport default SalesList;\n","import React, { Component } from 'react';\nimport SearchBar from '../common/SearchBar';\nimport SalesList from './SalesList';\nimport axios from 'axios';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport { GET_SALES_BY_TITLE } from '../utils/api_resources';\nimport { Header, Divider } from 'semantic-ui-react';\n\nclass BrowseSales extends Component {\n    state = { salesList: [], cardName: '' };\n\n    handleSearchSelect = async cardName => {\n        const { data } = await axios.get(GET_SALES_BY_TITLE, {\n            params: { cardName: cardName },\n            headers: makeAuthHeader()\n        });\n\n        this.setState({ salesList: data, cardName: cardName });\n    };\n\n    render() {\n        const { salesList, cardName } = this.state;\n\n        return (\n            <div>\n                <SearchBar handleSearchSelect={this.handleSearchSelect} />\n\n                <Header as=\"h2\">Browse Sales</Header>\n                <Divider />\n\n                <span>\n                    <em>\n                        {cardName !== '' && (\n                            <h4>\n                                {salesList.length} results for {cardName}\n                            </h4>\n                        )}\n                    </em>\n                </span>\n                <SalesList list={salesList} />\n            </div>\n        );\n    }\n}\n\nexport default BrowseSales;\n","import React from 'react';\nimport { Image, Label } from 'semantic-ui-react';\nimport MarketPrice from '../common/MarketPrice';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n    display: inline-block;\n    margin: 10px 10px 10px 10px;\n`;\n\nconst InventoryWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 5px;\n    background-color: rgba(0, 0, 0, 0.9);\n    border-radius: 10px 10px 10px 10px;\n    box-shadow: 2px 2px 5px 0 rgba(0, 0, 0, 0.25);\n`;\n\nconst InventoryRow = styled.div`\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    margin: 5px;\n`;\n\nconst ImageWrapper = styled.div`\n    width: 300px;\n    height: 418.3px;\n    box-shadow: 2px 2px 5px 0 rgba(0, 0, 0, 0.25);\n    background: repeating-linear-gradient(45deg, #bfbfbf, #bfbfbf 10px, #b0b0b0 10px, #b0b0b0 20px);\n    border-radius: 15px;\n`;\n\nexport default function PublicCardItem({ card }) {\n    const { id, cardImage } = card;\n    const [foilQty, nonfoilQty] = card.qohParsed;\n\n    const displayFoil = (\n        <InventoryRow>\n            <Label color='blue' image>Foil<Label.Detail>{foilQty}</Label.Detail></Label>\n            <MarketPrice id={id} finish=\"FOIL\" />\n        </InventoryRow>\n    );\n\n    const displayNonfoil = (\n        <InventoryRow>\n            <Label color='blue' image>Nonfoil<Label.Detail>{nonfoilQty}</Label.Detail></Label>\n            <MarketPrice id={id} />\n        </InventoryRow>\n    );\n\n    return <React.Fragment>\n        <Wrapper>\n            <ImageWrapper>\n                <Image src={cardImage} size=\"medium\" style={{ borderRadius: '15px' }} />\n            </ImageWrapper>\n            <InventoryWrapper>\n                {foilQty > 0 ? displayFoil : null}\n                {nonfoilQty > 0 ? displayNonfoil : null}\n            </InventoryWrapper>\n        </Wrapper>\n    </React.Fragment>\n}","import React from 'react';\nimport PublicCardItem from './PublicCardItem';\nimport { Grid } from 'semantic-ui-react';\n\nconst gridStyle = {\n    display: 'flex',\n    flexWrap: 'wrap',\n    alignContent: 'space-evenly',\n    height: '100%'\n};\n\nexport default function PublicCardList({ cards }) {\n    return <Grid style={gridStyle} >\n        {cards.map(c =>\n            <PublicCardItem\n                key={c.id}\n                card={c}\n            />\n        )}\n    </ Grid>\n}\n","import React from 'react';\nimport axios from 'axios';\nimport {\n    Grid,\n    Segment,\n    Header,\n    Icon,\n    Divider,\n} from 'semantic-ui-react';\nimport SearchBar from '../common/SearchBar';\nimport PublicCardList from './PublicCardList';\nimport { GET_CARDS_WITH_INFO } from '../utils/api_resources';\nimport { InventoryCard } from '../utils/ScryfallCard';\n\nconst initialState = {\n    searchResults: [],\n    saleListCards: [],\n    searchTerm: ''\n};\n\nexport default class PublicInventory extends React.Component {\n    state = initialState;\n\n    handleResultSelect = async term => {\n        try {\n            const { data } = await axios.get(GET_CARDS_WITH_INFO, {\n                params: { title: term, matchInStock: true }\n            });\n\n            const modeledData = data.map(c => new InventoryCard(c));\n\n            this.setState({ searchResults: modeledData, searchTerm: term });\n        } catch (err) {\n            console.log(err);\n        }\n    };\n\n    render() {\n        const {\n            searchResults,\n            searchTerm\n        } = this.state;\n\n        // Creates text to notify the user of zero-result searches\n        const searchNotification = () => {\n            if (searchTerm && !searchResults.length) { // Check to make sure the user has searched and no results\n                return <p><em>{searchTerm}</em> is out of stock</p>\n            }\n            return <p>Search for a card</p>; // Default text before search\n        }\n\n        return (\n            <React.Fragment>\n                <Grid.Row style={{ display: 'flex', alignItems: 'center' }}>\n                    <SearchBar handleSearchSelect={this.handleResultSelect} />\n                </Grid.Row>\n                <br />\n                <Grid stackable={true}>\n                    <Grid.Column>\n                        <Header as=\"h2\">\n                            Inventory Search\n                            <Header.Subheader>\n                                <em>Card prices subject to change. Consult a Clubhouse employee for final estimates</em>\n                            </Header.Subheader>\n                        </Header>\n\n                        <Divider />\n\n                        {!searchResults.length &&\n                            <Segment placeholder>\n                                <Header icon>\n                                    <Icon name=\"search\" />\n                                    <span>{searchNotification()}</span>\n                                </Header>\n                            </Segment>}\n\n                        <PublicCardList cards={searchResults} />\n                    </Grid.Column>\n                </Grid >\n            </React.Fragment >\n        );\n    }\n}\n","import React from 'react';\nimport SearchBar from '../common/SearchBar';\nimport { GET_SET_NAMES } from '../utils/api_resources';\nimport axios from 'axios';\nimport { Form, Input, Select, Dropdown, Segment } from 'semantic-ui-react';\n\nconst formatDropdownOptions = [\n    { key: 'qw', value: \"\", text: \"None\" },\n    { key: 'we', value: \"standard\", text: \"Standard\" },\n    { key: 'er', value: \"future\", text: \"Future\" },\n    { key: 'rt', value: \"historic\", text: \"Historic\" },\n    { key: 'ty', value: \"pioneer\", text: \"Pioneer\" },\n    { key: 'yu', value: \"modern\", text: \"Modern\" },\n    { key: 'ui', value: \"legacy\", text: \"Legacy\" },\n    { key: 'io', value: \"pauper\", text: \"Pauper\" },\n    { key: 'op', value: \"vintage\", text: \"Vintage\" },\n    { key: 'as', value: \"penny\", text: \"Penny\" },\n    { key: 'sd', value: \"commander\", text: \"Commander\" },\n    { key: 'df', value: \"brawl\", text: \"Brawl\" },\n    { key: 'fg', value: \"duel\", text: \"Duel\" },\n    { key: 'gh', value: \"oldschool\", text: \"Oldschool\" }\n];\n\nconst priceFilterDropdownOptions = [\n    { key: 'gte', value: 'gte', text: '>=' },\n    { key: 'lte', value: 'lte', text: '<=' },\n    { key: 'gtx', value: 'gt', text: '>' },\n    { key: 'ltx', value: 'lt', text: '<' }\n];\n\nconst finishDropdownOptions = [\n    { key: 'nonfoil_foil', value: '', text: 'None' },\n    { key: 'nonfoil', value: 'NONFOIL', text: 'Nonfoil' },\n    { key: 'foil', value: 'FOIL', text: 'Foil' }\n];\n\nconst sortByDropdownOptions = [\n    { key: 'pricesort', value: 'price', text: 'Price' },\n    { key: 'alphasort', value: 'name', text: 'Card Name' }\n];\n\nconst sortByDirectionDropdownOptions = [\n    { key: 'descdirsort', value: 1, text: 'Ascending' },\n    { key: 'ascdirsort', value: -1, text: 'Descending' }\n];\n\nconst sortByColorDropdownOptions = [\n    { key: 'w', value: 'W', text: 'White' },\n    { key: 'u', value: 'U', text: 'Blue' },\n    { key: 'b', value: 'B', text: 'Black' },\n    { key: 'r', value: 'R', text: 'Red' },\n    { key: 'g', value: 'G', text: 'Green' }\n];\n\nconst typeLineOptions = [\n    { key: 'na', value: '', text: 'None' },\n    { key: 'artifact', value: 'Artifact', text: 'Artifact' },\n    { key: 'creature', value: 'Creature', text: 'Creature' },\n    { key: 'enchantment', value: 'Enchantment', text: 'Enchantment' },\n    { key: 'instant', value: 'Instant', text: 'Instant' },\n    { key: 'land', value: 'Land', text: 'Land' },\n    { key: 'planeswalker', value: 'Planeswalker', text: 'Planeswalker' },\n    { key: 'sorcery', value: 'Sorcery', text: 'Sorcery' },\n    { key: 'tribal', value: 'Tribal', text: 'Tribal' }\n];\n\nconst initialState = {\n    title: '',\n    setName: '',\n    format: '',\n    priceNum: '',\n    priceFilter: 'gte',\n    finish: '',\n    sortBy: 'price',\n    colorsArray: [],\n    sortByDirection: -1,\n    typeLine: '',\n    setNames: []\n}\n\nexport default class DeckboxCloneForm extends React.Component {\n    state = { editionDropdownOptions: [], ...initialState };\n\n    handleSearchSelect = name => this.setState({ title: name });\n\n    // When the user blurs the search field, we need to re-set state. Otherwise it won't clear from handleSearchSelect()\n    handleSearchBlur = (e, d) => this.setState({ title: e.target.value });\n\n    handleChange = (e, { value }) => this.setState({ [e.target.name]: value });\n\n    handleDropdownChange = (e, data) => this.setState({ [data.name]: data.value });\n\n    async componentDidMount() {\n        const { data } = await axios.get(GET_SET_NAMES);\n        const setNameOptions = data.map((d, idx) => {\n            return { key: `set${idx}`, value: d, text: d };\n        })\n        const concatWithBlankOption = [{ key: 'snull', value: \"\", text: \"None\" }].concat(setNameOptions);\n        this.setState({ editionDropdownOptions: concatWithBlankOption });\n    }\n\n    render() {\n        const {\n            title,\n            setName,\n            format,\n            priceNum,\n            priceFilter,\n            finish,\n            sortBy,\n            sortByDirection,\n            colorsArray,\n            typeLine\n        } = this.state;\n\n        // Sort the colors here and concat prior to sending to the backend\n        const colors = colorsArray.sort().join('');\n\n        return (\n            <Segment>\n                <h3>Filters</h3>\n                <Form>\n                    <Form.Group widths=\"4\">\n                        <Form.Field>\n                            <label>Card Name</label>\n                            <SearchBar\n                                handleSearchSelect={this.handleSearchSelect}\n                                value={this.state.title}\n                                name=\"title\"\n                                onBlur={this.handleSearchBlur}\n                            />\n                        </Form.Field>\n                        <Form.Field\n                            control={Select}\n                            label=\"Format\"\n                            placeholder=\"Format\"\n                            options={formatDropdownOptions}\n                            name=\"format\"\n                            onChange={this.handleDropdownChange}\n                        />\n                        <Form.Field\n                            control={Select}\n                            label=\"Edition\"\n                            placeholder=\"Edition\"\n                            search\n                            options={this.state.editionDropdownOptions}\n                            name=\"setName\"\n                            onChange={this.handleDropdownChange}\n                        />\n                        <Form.Field\n                            control={Select}\n                            label=\"Finish\"\n                            placeholder=\"Finish\"\n                            options={finishDropdownOptions}\n                            name=\"finish\"\n                            onChange={this.handleDropdownChange}\n                        />\n                    </Form.Group>\n                    <Form.Group widths=\"4\">\n\n                        <Form.Field\n                            control={Select}\n                            multiple\n                            label=\"Colors\"\n                            placeholder=\"Colors\"\n                            options={sortByColorDropdownOptions}\n                            name=\"colorsArray\"\n                            onChange={this.handleDropdownChange}\n                        />\n\n                        <Form.Field\n                            control={Select}\n                            label=\"Type Line\"\n                            placeholder=\"Type Line\"\n                            options={typeLineOptions}\n                            name=\"typeLine\"\n                            onChange={this.handleDropdownChange} />\n\n                        <Form.Field>\n                            <label>Price Filter</label>\n                            <Input\n                                label={<Dropdown\n                                    options={priceFilterDropdownOptions}\n                                    name=\"priceFilter\"\n                                    defaultValue=\"gte\"\n                                    onChange={this.handleDropdownChange}\n                                />}\n                                placeholder=\"Enter a price\"\n                                labelPosition=\"left\"\n                                name=\"priceNum\"\n                                type=\"number\"\n                                onChange={this.handleDropdownChange}\n                            />\n                        </Form.Field>\n                    </Form.Group>\n\n                    <h3>{\"Sort & Order\"}</h3>\n\n                    <Form.Group>\n                        <Form.Field\n                            control={Select}\n                            label=\"Sort By\"\n                            placeholder=\"\"\n                            options={sortByDropdownOptions}\n                            defaultValue='price'\n                            name=\"sortBy\"\n                            onChange={this.handleDropdownChange}\n                        />\n                        <Form.Field\n                            control={Select}\n                            label=\"Order\"\n                            options={sortByDirectionDropdownOptions}\n                            defaultValue={-1}\n                            name=\"sortByDirection\"\n                            onChange={this.handleDropdownChange}\n                        />\n                    </Form.Group>\n\n                    <Form.Group>\n                        <Form.Button primary onClick={() => this.props.handleSubmit({\n                            title,\n                            setName,\n                            format,\n                            priceNum,\n                            priceFilter,\n                            finish,\n                            sortBy,\n                            sortByDirection,\n                            colors,\n                            type: typeLine\n                        })}>Submit</Form.Button>\n                    </Form.Group>\n                </Form>\n            </Segment>\n        )\n    }\n}","import React from 'react';\nimport { Table, Icon, Image } from 'semantic-ui-react';\nimport Price from '../common/Price';\n\nconst conditionMap = {\n    NM: 'Near Mint',\n    LP: 'Light Play',\n    MP: 'Moderate Play',\n    HP: 'Heavy Play',\n};\n\nconst Tooltip = ({ image_uri, posX, posY }) => {\n    return (\n        <div style={{\n            position: 'absolute',\n            left: `${posX}px`,\n            width: '150px', // Width of the image when size=\"small\"\n            height: '209px', // Height of the image when size=\"small\"\n            borderRadius: '7px 7px 7px 7px',\n            boxShadow: '2px 2px 5px 0 rgba(0, 0, 0, 0.25)',\n            background: 'repeating-linear-gradient(45deg, #bfbfbf, #bfbfbf 10px, #b0b0b0 10px, #b0b0b0 20px)'\n        }}>\n            <Image\n                style={{ borderRadius: '7px 7px 7px 7px' }}\n                size=\"small\"\n                src={image_uri}\n            />\n        </div>\n    )\n}\n\nexport default class DeckboxCloneRow extends React.Component {\n    state = { mouseInside: false, mouseX: 0, mouseY: 0 };\n\n    mouseEnter = (e) => {\n        const mouseX = e.clientX - e.target.offsetLeft\n        const mouseY = e.clientY - e.target.offsetTop;\n        this.setState({ mouseInside: true, mouseX, mouseY });\n    }\n\n    mouseLeave = (e) => this.setState({ mouseInside: false });\n\n    mouseMove = (e) => {\n        const mouseX = e.clientX - e.target.offsetLeft\n        const mouseY = e.clientY - e.target.offsetTop;\n        this.setState({ mouseX, mouseY });\n    };\n\n    render() {\n        const { inventory, name, set_name, price, set, rarity, image_uri } = this.props;\n        const { mouseInside, mouseX, mouseY } = this.state;\n        const finish = inventory.k.split('_')[0];\n        const condition = inventory.k.split('_')[1];\n\n        return <Table.Row>\n            <Table.Cell>\n                <span\n                    onMouseEnter={this.mouseEnter}\n                    onMouseLeave={this.mouseLeave}\n                    onMouseMove={this.mouseMove}\n                    style={{ cursor: 'help' }}\n                >\n                    {name}{' '}\n                </span>\n                {finish === 'FOIL' && <Icon name=\"star\" color=\"blue\" />}\n                {mouseInside && <Tooltip image_uri={image_uri} posX={mouseX} posY={mouseY} />}\n            </Table.Cell>\n            <Table.Cell><i className={`ss ss-fw ss-${set} ss-${rarity}`} style={{ fontSize: '20px' }} />{\" \"}{set_name}</Table.Cell>\n            <Table.Cell>{conditionMap[condition]}</Table.Cell>\n            <Table.Cell>{inventory.v}</Table.Cell>\n            <Table.Cell><Price num={price} /></Table.Cell>\n        </Table.Row>\n    }\n}","import React from 'react'\nimport { GET_CARDS_BY_FILTER } from '../utils/api_resources';\nimport DeckboxCloneForm from './DeckboxCloneForm';\nimport DeckboxCloneRow from './DeckboxCloneRow';\nimport axios from 'axios';\nimport { Table, Menu, Icon, Dimmer, Loader, Segment, Header, Container } from 'semantic-ui-react';\nimport _ from 'lodash';\nconst LIMIT = 100 // Matching the backend for now\n\nexport default class DeckboxClone extends React.Component {\n    state = {\n        data: [],\n        count: 0,\n        currentPage: 0,\n        numPages: 0,\n        pageArray: [],\n        isLoading: false,\n        cachedFilters: {},\n        showPages: [],\n        searchTouched: false // Tracks whether the user has initially searched for the 'no results' message\n    }\n\n    fetchData = async (filters, page) => {\n        try {\n            this.setState({ isLoading: true });\n\n            const { data } = await axios.get(GET_CARDS_BY_FILTER, {\n                params: { ...filters, page }\n            });\n\n            const numPages = Math.ceil(data.total / LIMIT);\n            const pages = _.range(1, numPages + 1);\n            let showPages;\n\n            // Logic that controls the visibility of page number links \n            // Default max number pages to display is 5\n            if (page <= 3) {\n                showPages = pages.slice(0, 5);\n            } else if (page >= numPages - 2) {\n                showPages = pages.slice(numPages - 5, numPages);\n            } else {\n                showPages = pages.slice(page - 2, page + 3);\n            }\n\n            this.setState({\n                data: data.cards,\n                count: data.total,\n                isLoading: false,\n                numPages: numPages,\n                currentPage: page,\n                showPages: showPages,\n                searchTouched: true\n            });\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    handleSubmit = async (filters) => {\n        this.setState({ cachedFilters: filters }); // Set the filters for pagination requests later\n        await this.fetchData(filters, 1); // On submit, starting page mut always be 1\n    }\n\n    handlePage = async (page) => {\n        await this.fetchData(this.state.cachedFilters, page)\n        this.setState({ currentPage: page });\n    };\n\n    render() {\n        const { data, isLoading, currentPage, numPages, count } = this.state;\n        const showLeftPageButtons = !(currentPage === 1);\n        const showRightPageButtons = !(currentPage === numPages);\n\n        return <Container>\n            <Dimmer active={isLoading} inverted page style={{ marginTop: '52.63px' }}>\n                <Loader size=\"large\">Loading</Loader>\n            </Dimmer>\n            <Segment secondary>\n                <Icon name=\"exclamation triangle\" color=\"blue\" />\n                Prices from this table are updated weekly and are subject to fluctuations. Consult 'New Sale' or 'Manage Inventory' for up-to-date values\n            </Segment>\n            <DeckboxCloneForm handleSubmit={this.handleSubmit} />\n\n            {!!data.length && <Table celled striped compact>\n                <Table.Header>\n                    <Table.Row>\n                        <Table.HeaderCell colSpan='5'>\n                            <Menu floated=\"left\">\n                                <Menu.Item>Viewing page {currentPage} of {numPages}</Menu.Item>\n                            </Menu>\n                            <Menu floated=\"right\">\n                                {showLeftPageButtons && <Menu.Item as=\"a\" icon onClick={() => this.handlePage(currentPage - 1)} >\n                                    <Icon name='chevron left' />\n                                </Menu.Item>}\n\n                                <React.Fragment>\n                                    {this.state.showPages.map(p => {\n                                        return (\n                                            <Menu.Item\n                                                key={`page-${p}`}\n                                                onClick={() => this.handlePage(p)}\n                                                active={currentPage === p}\n                                                disabled={currentPage === p}\n                                                as=\"a\">\n                                                {p}\n                                            </Menu.Item>\n                                        )\n                                    })}\n                                </React.Fragment>\n\n                                {showRightPageButtons && <Menu.Item as=\"a\" icon onClick={() => this.handlePage(currentPage + 1)}>\n                                    <Icon name='chevron right' />\n                                </Menu.Item>}\n                            </Menu>\n                        </Table.HeaderCell>\n                    </Table.Row>\n                </Table.Header>\n\n                <Table.Header>\n                    <Table.Row>\n                        <Table.HeaderCell>Name</Table.HeaderCell>\n                        <Table.HeaderCell>Edition</Table.HeaderCell>\n                        <Table.HeaderCell>Condition</Table.HeaderCell>\n                        <Table.HeaderCell>Qty</Table.HeaderCell>\n                        <Table.HeaderCell>Price</Table.HeaderCell>\n                    </Table.Row>\n                </Table.Header>\n\n                <Table.Body>\n                    {data.map(d => <DeckboxCloneRow {...d} key={`${d._id}${d.inventory.k}`} />)}\n                </Table.Body>\n\n                <Table.Footer>\n                    <Table.Row>\n                        <Table.HeaderCell colSpan='5'>\n                            <Menu floated=\"left\">\n                                <Menu.Item>Total results: {count}</Menu.Item>\n                            </Menu>\n                            <Menu floated=\"right\">\n                                {showLeftPageButtons && <Menu.Item\n                                    as=\"a\"\n                                    icon\n                                    onClick={() => this.handlePage(currentPage - 1)}\n                                >\n                                    <Icon name='chevron left' />\n                                </Menu.Item>}\n\n                                <React.Fragment>\n                                    {this.state.showPages.map(p => {\n                                        return (\n                                            <Menu.Item\n                                                key={`page-${p}`}\n                                                onClick={() => this.handlePage(p)}\n                                                active={currentPage === p}\n                                                disabled={currentPage === p}\n                                                as=\"a\">\n                                                {p}\n                                            </Menu.Item>\n                                        )\n                                    })}\n                                </React.Fragment>\n\n                                {showRightPageButtons && <Menu.Item\n                                    as=\"a\"\n                                    icon\n                                    onClick={() => this.handlePage(currentPage + 1)}\n                                >\n                                    <Icon name='chevron right' />\n                                </Menu.Item>}\n                            </Menu>\n                        </Table.HeaderCell>\n                    </Table.Row>\n                </Table.Footer>\n            </Table>}\n\n            {!data.length &&\n                <Segment placeholder>\n                    <Header icon>\n                        <Icon name=\"search\" />\n                        {this.state.searchTouched ?\n                            'No results found' :\n                            'Use the filters to browse inventory'\n                        }\n                    </Header>\n                </Segment>}\n        </Container>\n    }\n}","import React, { useState } from 'react';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport { LOGIN } from '../utils/api_resources';\nimport axios from 'axios';\n\nexport const AuthContext = React.createContext();\n\nexport default function AuthProvider(props) {\n    const [loggedIn, setLoggedIn] = useState(!!localStorage.getItem('clubhouse_JWT'));\n\n    const handleLogin = async (username, password) => {\n        try {\n            const { data } = await axios.post(LOGIN, {\n                username: username.toLowerCase(),\n                password: password\n            }, { headers: makeAuthHeader() });\n\n            if (data.token) {\n                localStorage.setItem('clubhouse_JWT', data.token);\n                setLoggedIn(!!localStorage.getItem('clubhouse_JWT'))\n\n                return { authed: true };\n            } else {\n                return { authed: false };\n            }\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    const handleLogout = async () => {\n        try {\n            localStorage.removeItem('clubhouse_JWT');\n            setLoggedIn(!!localStorage.getItem('clubhouse_JWT'));\n\n            return { authed: false };\n        } catch (err) {\n            console.log(err);\n        }\n    }\n\n    return <AuthContext.Provider value={{ loggedIn, handleLogin, handleLogout }}>\n        {props.children}\n    </AuthContext.Provider>\n}\n","import React, { useState, useContext } from 'react';\nimport createToast from '../common/createToast';\nimport { Form, Button, Segment } from 'semantic-ui-react';\nimport { Redirect } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthProvider';\nimport styled from 'styled-components';\n\nconst LoginContainer = styled.div`\n    margin-top: 15px;\n    display: flex;\n    justify-content: center;\n`;\n\nconst FormContainer = styled(Segment)`\n    width: 400px;\n    padding: 25px 25px 25px 25px !important;\n`;\n\nconst initialState = { username: '', password: '', loading: false };\n\nexport default function Login() {\n    const [state, setState] = useState(initialState);\n    const { loggedIn, handleLogin } = useContext(AuthContext);\n\n    const handleInputChange = (e, { value }) => setState({ ...state, [e.target.name]: value });\n\n    const login = async () => {\n        setState({ loading: true });\n\n        const { authed } = await handleLogin(state.username, state.password);\n\n        if (authed) {\n            // Do not set state here to mitigate React setState warning after component unmounted due to redirect\n            createToast({\n                color: 'green',\n                header: 'Success',\n                message: `Enjoy your time here!`,\n            });\n        } else {\n            setState(initialState);\n            createToast({\n                color: 'red',\n                header: 'Error',\n                message: `Username or password was incorrect`,\n            });\n        }\n    };\n\n    if (loggedIn) return <Redirect to=\"/manage-inventory\" />\n\n    return <LoginContainer>\n        <FormContainer raised loading={state.loading}>\n            <Form>\n                <Form.Field>\n                    <Form.Input\n                        className=\"username-input\"\n                        name=\"username\"\n                        placeholder=\"Username\"\n                        label=\"Username\"\n                        value={state.username || ''}\n                        onChange={handleInputChange}\n                    />\n                </Form.Field>\n                <Form.Field>\n                    <Form.Input\n                        className=\"password-input\"\n                        name=\"password\"\n                        placeholder=\"Password\"\n                        type=\"password\"\n                        label=\"Password\"\n                        value={state.password || ''}\n                        onChange={handleInputChange}\n                    />\n                </Form.Field>\n                <Button\n                    primary\n                    fluid\n                    floated=\"right\"\n                    type=\"submit\"\n                    onClick={login}\n                    className=\"login-btn\"\n                    disabled={!state.username || !state.password}>\n                    Submit\n            </Button>\n            </Form>\n        </FormContainer>\n    </LoginContainer>\n}\n","import React, { useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthProvider';\n\nfunction Logout() {\n    const { handleLogout } = useContext(AuthContext);\n\n    handleLogout();\n\n    return <Redirect to=\"/login\" />\n};\n\nexport default Logout;\n","import React, { useState } from 'react';\nimport {\n    Segment,\n    Input,\n    Button,\n    Form,\n    Select,\n    Label,\n    Item\n} from 'semantic-ui-react';\nimport QohLabels from '../common/QohLabels';\nimport CardImage from '../common/CardImage';\nimport MarketPrice from '../common/MarketPrice'\nimport $ from 'jquery';\nimport createToast from '../common/createToast';\n\nconst finishes = [\n    { key: 'NONFOIL', text: 'Nonfoil', value: 'NONFOIL' },\n    { key: 'FOIL', text: 'Foil', value: 'FOIL' }\n];\n\nconst cardConditions = [\n    { key: 'NM', text: 'Near Mint', value: 'NM' },\n    { key: 'LP', text: 'Light Play', value: 'LP' },\n    { key: 'MP', text: 'Moderate Play', value: 'MP' },\n    { key: 'HP', text: 'Heavy Play', value: 'HP' }\n];\n\n/**\n * Seeds state from props. Used to determine if cards have only foil, nonfoil, or both printings\n * from their `foil` and `nonfoil`\n * @param {Boolean} nonfoilProp\n * @param {Boolean} foilProp\n */\nfunction checkCardFinish(nonfoil, foil) {\n    if (!nonfoil && foil) {\n        return { selectedFinish: 'FOIL', finishDisabled: true };\n    } else if (nonfoil && !foil) {\n        return { selectedFinish: 'NONFOIL', finishDisabled: true };\n    } else if (nonfoil && foil) {\n        return { selectedFinish: 'NONFOIL', finishDisabled: false };\n    }\n}\n\nexport default function ReceivingCardItem(props) {\n    const [quantity, setQuantity] = useState(1);\n    const [cashPrice, setCashPrice] = useState(0);\n    const [creditPrice, setCreditPrice] = useState(0);\n    const [selectedCondition, setSelectedCondition] = useState('NM');\n    const [marketPrice, setMarketPrice] = useState(0);\n    const [selectedFinish, setSelectedFinish] = useState(\n        checkCardFinish(props.nonfoil, props.foil).selectedFinish // seed state from props\n    );\n\n    // Determines whether the select finish dropdown is permanently disabled, seeded from props\n    const finishDisabled = checkCardFinish(props.nonfoil, props.foil).finishDisabled;\n\n    const handleFinishChange = (e, { value }) => setSelectedFinish(value);\n\n    const handleConditionChange = (e, { value }) => setSelectedCondition(value);\n\n    // Validates/sanitizes user inputs by tracking the `name` attribute of the input element\n    const handlePriceChange = (e, { value }) => {\n        let val = Number(value) || 0;\n        if (val < 0) val = 0;\n\n        switch (e.target.name) {\n            case \"cashInput\":\n                setCashPrice(val);\n                break;\n            case \"marketPriceInput\":\n                setMarketPrice(val);\n                break;\n            case \"creditInput\":\n                setCreditPrice(val);\n                break;\n            default:\n                break;\n        }\n    }\n\n    const handleQuantityChange = (e, { value }) => {\n        let val = parseInt(value, 10) || 0;\n        if (val < 0) val = 0; // cannot receive less than 0\n        if (val > 50) val = 50 // set max to 50 cards per single transaction\n        setQuantity(val);\n    };\n\n\n    const handleFocus = e => {\n        switch (e.target.name) {\n            case \"cashInput\":\n                if (cashPrice === 0) setCashPrice('');\n                break;\n            case \"marketPriceInput\":\n                if (marketPrice === 0) setMarketPrice('');\n                break;\n            case \"creditInput\":\n                if (creditPrice === 0) setCreditPrice('');\n                break;\n            default:\n                break;\n        }\n    }\n\n    const handleBlur = e => {\n        switch (e.target.name) {\n            case \"cashInput\":\n                if (cashPrice === '') setCashPrice(0);\n                break;\n            case \"marketPriceInput\":\n                if (marketPrice === '') setMarketPrice(0);\n                break;\n            case \"creditInput\":\n                if (creditPrice === '') setCreditPrice(0);\n                break;\n            default:\n                break;\n        }\n    }\n\n    const handleInventoryAdd = () => {\n        props.addToList({\n            quantity,\n            cashPrice,\n            marketPrice,\n            creditPrice,\n            finishCondition: `${selectedFinish}_${selectedCondition}`, // ex. NONFOIL_NM\n            cardInfo: { ...props }\n        })\n\n        setQuantity(1);\n        setCashPrice(0);\n        setMarketPrice(0);\n        setCreditPrice(0);\n        setSelectedCondition('NM');\n        setSelectedFinish(checkCardFinish(props.nonfoil, props.foil).selectedFinish);\n\n        createToast({\n            color: 'green',\n            header: `${quantity}x ${props.name} added to buylist!`,\n            duration: 2000\n        });\n\n        // Highlight the input after successful card add\n        $('#searchBar').focus().select();\n    };\n\n    /**\n     * Determines whether the `Add` button should be disabled\n     */\n    const submitDisabled = () => {\n        const validateQty = quantity === 0 || quantity === '';\n        const validateTradeTypes = !cashPrice && !creditPrice;\n        const validateMarketPrice = marketPrice === 0 || marketPrice === '';\n\n        if (cashPrice > 0) {\n            return validateQty || validateTradeTypes || validateMarketPrice;\n        }\n\n        return validateQty || validateTradeTypes;\n    }\n\n    const {\n        image_uris,\n        name,\n        set_name,\n        set,\n        rarity,\n        card_faces,\n        id\n    } = props;\n\n    return (\n        <Segment>\n            <Item.Group divided>\n                <Item>\n                    <Item.Image size=\"small\">\n                        <CardImage\n                            image_uris={image_uris}\n                            card_faces={card_faces}\n                            hover={false}\n                        />\n                    </Item.Image>\n                    <Item.Content>\n                        <Item.Header as='h3'>\n                            {name}\n                            {' '}\n                            <i\n                                className={`ss ss-fw ss-${set} ss-${rarity}`}\n                                style={{ fontSize: '30px' }}\n                            />\n                            <Label color=\"grey\">\n                                {set_name} ({String(set).toUpperCase()})\n                                </Label>\n                            <QohLabels inventoryQty={props.qoh} />\n                            {' '}\n                            <MarketPrice id={id} finish={selectedFinish} />\n                        </Item.Header>\n                        <Item.Description>\n                            <Form>\n                                <Form.Group widths=\"12\">\n                                    <Form.Field\n                                        control={Input}\n                                        type=\"number\"\n                                        label=\"Quantity\"\n                                        value={quantity}\n                                        onChange={handleQuantityChange}\n                                        onFocus={e => e.target.select()}\n                                    />\n                                    <Form.Field\n                                        label=\"Credit Price\"\n                                        name=\"creditInput\"\n                                        control={Input}\n                                        type=\"number\"\n                                        value={creditPrice}\n                                        onChange={handlePriceChange}\n                                        onFocus={handleFocus}\n                                        onBlur={handleBlur}\n                                        step=\"0.25\"\n                                    />\n                                    <Form.Field\n                                        label=\"Cash Price\"\n                                        name=\"cashInput\"\n                                        control={Input}\n                                        type=\"number\"\n                                        value={cashPrice}\n                                        onChange={handlePriceChange}\n                                        onFocus={handleFocus}\n                                        onBlur={handleBlur}\n                                        step=\"0.25\"\n                                    />\n                                    <Form.Field\n                                        label=\"Market Price\"\n                                        name=\"marketPriceInput\"\n                                        control={Input}\n                                        type=\"number\"\n                                        value={marketPrice}\n                                        onChange={handlePriceChange}\n                                        onFocus={handleFocus}\n                                        onBlur={handleBlur}\n                                        step=\"0.25\"\n                                        disabled={cashPrice === 0 || cashPrice === ''}\n                                    />\n                                </Form.Group>\n                                <Form.Group widths=\"12\">\n                                    <Form.Field\n                                        label=\"Finish\"\n                                        control={Select}\n                                        value={selectedFinish}\n                                        options={finishes}\n                                        disabled={finishDisabled}\n                                        onChange={handleFinishChange}\n                                    />\n                                    <Form.Field\n                                        label=\"Condition\"\n                                        control={Select}\n                                        value={selectedCondition}\n                                        options={cardConditions}\n                                        onChange={handleConditionChange}\n                                    />\n                                    <Form.Button\n                                        label=\"Add to List?\"\n                                        control={Button}\n                                        primary\n                                        disabled={submitDisabled()}\n                                        onClick={handleInventoryAdd}\n                                    >\n                                        Add\n                                    </Form.Button>\n                                </Form.Group>\n                            </Form>\n                        </Item.Description>\n                    </Item.Content>\n                </Item>\n            </Item.Group>\n        </Segment>\n    );\n}","import React from 'react';\nimport ReceivingCardItem from './ReceivingSearchItem';\n\nexport default function ReceivingCardList({ cards, addToList }) {\n    return cards.map(c => {\n        return <ReceivingCardItem\n            key={c.id}\n            {...c}\n            addToList={addToList}\n        />\n    });\n}\n","import React, { useState } from 'react';\nimport { Table, Button, Label, Icon } from 'semantic-ui-react';\nimport Price from '../common/Price';\n\n// Defines whether it uses cash or credit for trade types\nconst TRADE_TYPE = { CASH: 'CASH', CREDIT: 'CREDIT' };\n\nexport default function ReceivingListItem({ name, set, rarity, cashPrice, creditPrice, finishCondition, uuid_key, removeFromList, tradeType, activeTradeType }) {\n    const { CASH, CREDIT } = TRADE_TYPE;\n    const [hovered, setHovered] = useState(false);\n\n    return (\n        <Table.Row>\n            <Table.Cell><b>{name}</b></Table.Cell>\n            <Table.Cell singleLine>\n                <i\n                    className={`ss ss-fw ss-${set} ss-${rarity}`}\n                    style={{ fontSize: '20px' }}\n                />\n                <Label color=\"grey\">{set.toUpperCase()}</Label>\n            </Table.Cell>\n            <Table.Cell>\n                <div style={{ whiteSpace: 'noWrap' }}>\n                    Cash <b><Price num={cashPrice} /></b>\n                </div>\n                <div style={{ whiteSpace: 'noWrap' }}>\n                    Credit <b><Price num={creditPrice} /></b>\n                </div>\n                <p>{finishCondition.split('_')[0]} | {finishCondition.split('_')[1]}</p>\n            </Table.Cell>\n            <Table.Cell>\n                <Button\n                    active={tradeType === CASH}\n                    color={tradeType === CASH ? 'blue' : null}\n                    onClick={() => activeTradeType(uuid_key, CASH)}\n                    disabled={cashPrice === 0}\n                    icon\n                >\n                    <Icon name=\"dollar sign\"></Icon>\n                </Button>\n            </Table.Cell>\n            <Table.Cell>\n                <Button\n                    active={tradeType === CREDIT}\n                    color={tradeType === CREDIT ? 'blue' : null}\n                    onClick={() => activeTradeType(uuid_key, CREDIT)}\n                    disabled={creditPrice === 0}\n                    icon\n                >\n                    <Icon name=\"credit card outline\"></Icon>\n                </Button>\n            </Table.Cell>\n            <Table.Cell>\n                <Button\n                    icon=\"cancel\"\n                    circular\n                    onClick={() => removeFromList(uuid_key)}\n                    onMouseOver={() => setHovered(true)}\n                    onMouseOut={() => setHovered(false)}\n                    color={hovered ? 'red' : null}\n                >\n                </Button>\n            </Table.Cell>\n        </Table.Row>\n    );\n}","import React from 'react';\nimport _ from 'lodash';\nimport Price from '../common/Price';\nimport { Table } from 'semantic-ui-react';\n\n// Am I crazy or is this logic really convoluted?\n// Perhaps look at this down the line for improvement...\nexport default function CashReport({ receivingList, closeCashModal }) {\n    // If id, cashPrice and marketPrice are the same, goes in one bucket\n    const countByPriceAndID = _.chain(receivingList)\n        .filter(c => c.tradeType === 'CASH')\n        .map(c => {\n            // Note: We're creating a unique uuid-esque comparator string based on:\n            // `id`, `cashPrice`, `marketPrice`, and `finishCondition`\n            return { ...c, temp_uuid: `${c.id}-${c.cashPrice}-${c.marketPrice}-${c.finishCondition}` }\n        })\n        .groupBy(\"temp_uuid\")\n        .mapValues(val => val.length)\n        .value();\n\n    const uniqLineItems = _.chain(receivingList)\n        .filter(c => c.tradeType === 'CASH')\n        .map(c => {\n            return { ...c, temp_uuid: `${c.id}-${c.cashPrice}-${c.marketPrice}-${c.finishCondition}` }\n        })\n        .uniqBy('temp_uuid')\n        .value();\n\n    const mergedWithQty = uniqLineItems.map(c => {\n        return { ...c, tradeQty: countByPriceAndID[c.temp_uuid] } // Add a trade quantity referencing the previous count\n    });\n\n    const totalCashOut = _.chain(receivingList)\n        .filter(c => c.tradeType === 'CASH')\n        .sumBy(c => c.cashPrice)\n        .value();\n\n    return <React.Fragment>\n        <div id=\"cash-report\">\n            <Table celled>\n                <Table.Header>\n                    <Table.Row>\n                        <Table.HeaderCell colSpan={6}>Employee Name:</Table.HeaderCell>\n                    </Table.Row>\n                    <Table.Row>\n                        <Table.HeaderCell>Card Name</Table.HeaderCell>\n                        <Table.HeaderCell>Market Value</Table.HeaderCell>\n                        <Table.HeaderCell>Condition</Table.HeaderCell>\n                        <Table.HeaderCell>Quantity</Table.HeaderCell>\n                        <Table.HeaderCell>Cash Offer</Table.HeaderCell>\n                        <Table.HeaderCell>Cash Out</Table.HeaderCell>\n                    </Table.Row>\n                </Table.Header>\n                <Table.Body>\n                    {mergedWithQty.map(c => {\n                        return <Table.Row key={c.temp_uuid}>\n                            <Table.Cell>{c.name}</Table.Cell>\n                            <Table.Cell><Price num={c.marketPrice} /></Table.Cell>\n                            <Table.Cell>{c.finishCondition}</Table.Cell>\n                            <Table.Cell>{c.tradeQty}</Table.Cell>\n                            <Table.Cell><Price num={c.cashPrice} /></Table.Cell>\n                            <Table.Cell><Price num={c.tradeQty * c.cashPrice} /></Table.Cell>\n                        </Table.Row>\n                    })}\n                </Table.Body>\n                <Table.Footer>\n                    <Table.HeaderCell colSpan={6}>Total: <Price num={totalCashOut} /></Table.HeaderCell>\n                </Table.Footer>\n            </Table>\n        </div>\n    </React.Fragment>\n}","import React, { useState } from 'react';\nimport { Segment, Statistic, Button, Modal, Header } from 'semantic-ui-react';\nimport Price from '../common/Price';\nimport CashReport from './CashReport';\nimport printCashReport from './printCashReport';\n\nconst TRADE_TYPE = { CASH: 'CASH', CREDIT: 'CREDIT' };\n\nexport default function ReceivingListTotals({ receivingList, selectAll, commitToInventory }) {\n    const { CASH, CREDIT } = TRADE_TYPE;\n    const [loading, setLoading] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const [showCashModal, setShowCashModal] = useState(false);\n\n    const openCashModal = () => setShowCashModal(true);\n\n    const closeCashModal = () => setShowCashModal(false);\n\n    const submitToInventory = async () => {\n        setLoading(true);\n        await commitToInventory();\n        setLoading(false);\n    }\n\n    const handlePrintCashReport = () => {\n        setShowCashModal(false); // Close the modal so users don't have to after printing in new tab\n        printCashReport();\n    }\n\n    const cashTotal = receivingList.reduce((acc, curr) => {\n        let cashVal = curr.tradeType === CASH ? curr.cashPrice : 0;\n        return acc + cashVal;\n    }, 0);\n\n    const creditTotal = receivingList.reduce((acc, curr) => {\n        let creditVal = curr.tradeType === CREDIT ? curr.creditPrice : 0;\n        return acc + creditVal;\n    }, 0);\n\n    return <Segment>\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Button.Group>\n                <Button onClick={() => selectAll(TRADE_TYPE.CASH)}>Select all cash</Button>\n                <Button.Or />\n                <Button onClick={() => selectAll(TRADE_TYPE.CREDIT)}>Select all credit</Button>\n            </Button.Group>\n            <div>\n                <Statistic size=\"mini\">\n                    <Statistic.Label>Cash Due:</Statistic.Label>\n                    <Statistic.Value><Price num={cashTotal} /></Statistic.Value>\n                </Statistic>\n                <Statistic size=\"mini\">\n                    <Statistic.Label>Credit Due:</Statistic.Label>\n                    <Statistic.Value><Price num={creditTotal} /></Statistic.Value>\n                </Statistic>\n            </div>\n        </div>\n\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <Modal\n                open={showCashModal}\n                trigger={\n                    <Button\n                        color={cashTotal > 0 ? 'green' : null}\n                        disabled={cashTotal === 0}\n                        onClick={openCashModal}>\n                        Generate cash report\n                    </Button>\n                }>\n                <Modal.Content>\n                    <CashReport\n                        receivingList={receivingList}\n                        closeCashModal={closeCashModal} />\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button onClick={handlePrintCashReport} color=\"blue\">Print Report</Button>\n                    <Button onClick={closeCashModal}>Cancel</Button>\n                </Modal.Actions>\n            </Modal>\n\n            <Modal\n                closeOnDimmerClick={false}\n                trigger={\n                    <Button\n                        color=\"blue\"\n                        disabled={receivingList.length === 0}\n                        onClick={() => setShowModal(true)}>\n                        Commit to inventory\n                    </Button>\n                }\n                open={showModal}\n                onClose={() => setShowModal(false)}\n                basic style={{ marginTop: '50px' }} >\n                <Header>Confirm receipt of new inventory?</Header>\n                <Modal.Content>\n                    <p><b>Pressing 'Submit' will commit the following items to inventory:</b></p>\n                    <ul>\n                        {receivingList.map(c => {\n                            return <li key={c.uuid_key}>{c.name} | {c.set_name}({c.set.toUpperCase()})</li>\n                        })}\n                    </ul>\n                    <div>\n                        <p><b>The customer is owed: </b></p>\n                        <ul>\n                            {cashTotal > 0 ? <li><Price num={cashTotal} /> in cold, hard cash</li> : null}\n                            {creditTotal > 0 ? <li><Price num={creditTotal} /> in store credit</li> : null}\n                        </ul>\n                    </div>\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button basic color=\"red\" inverted onClick={() => setShowModal(false)}>Cancel</Button>\n                    <Button color=\"green\" inverted loading={loading} disabled={loading} onClick={submitToInventory}>Submit</Button>\n                </Modal.Actions>\n            </Modal>\n        </div>\n    </Segment>\n}","const printStyle = `\n    body {\n        font-family: 'helvetica neue', helvetica, arial, sans-serif;\n    }\n\n    table {\n        table-layout: fixed;\n        width: 100%;\n        border-collapse: collapse;\n        border: 1px solid gray;\n        text-align: left;\n    }\n\n    thead th:nth-child(1) {\n        width: 30%;\n    }\n\n    thead th:nth-child(2) {\n        width: 20%;\n    }\n\n    thead th:nth-child(3) {\n        width: 15%;\n    }\n\n    thead th:nth-child(4) {\n        width: 35%;\n    }\n\n    th, td {\n        border: 1px solid #ddd;\n        padding: 10px;\n    }\n\n    tfoot {\n        text-align: right !important;\n    }\n`;\n\n/**\n     * We're creating a new tab here for the modal table and writing CSS to it - not the most elegant solution from a UX and\n     * code standpoint, but time was of the essence for this release. Refactor down the road.\n     * \n     * The id cash-report is found on the cash report table\n     */\nexport default function printCashReport() {\n    const divToPrint = document.getElementById('cash-report');\n    const popup = window.open('', '_blank');\n    popup.document.open();\n    popup.document.write(`<html>`);\n    popup.document.write(`<head>`);\n    popup.document.write(`<title>Cash Report</title>`)\n    popup.document.write(`<style>${printStyle}</style>`);\n    popup.document.write(`</head>`);\n    popup.document.write(`<body onload=\"window.print()\">`);\n    popup.document.write(`${divToPrint.innerHTML}`);\n    popup.document.write(`</body>`);\n    popup.document.write(`</html>`);\n    popup.document.close();\n}","import React, { useState } from 'react';\nimport SearchBar from '../common/SearchBar';\nimport axios from 'axios';\nimport makeAuthHeader from '../utils/makeAuthHeader';\nimport ReceivingSearchList from './ReceivingSearchList';\nimport { Segment, Header, Icon, Grid, Divider, Table } from 'semantic-ui-react'\nimport { ADD_CARD_TO_INVENTORY, GET_CARDS_WITH_INFO } from '../utils/api_resources';\nimport ReceivingListItem from './ReceivingListItem';\nimport ReceivingListTotals from './ReceivingListTotals';\nimport createToast from '../common/createToast';\nimport _ from 'lodash';\nimport uuid from 'uuid'; // Used to crete unique keys for the list\n\n// Defines whether the receivingListItem uses cash or credit for trade types\nconst TRADE_TYPE = { CASH: 'CASH', CREDIT: 'CREDIT' };\n\nfunction DefaultPlaceholder({ active, headerText }) {\n    return (\n        <React.Fragment>\n            {active &&\n                <Segment placeholder>\n                    <Header icon>\n                        <Icon name=\"search\" />\n                        <em>{headerText}</em>\n                    </Header>\n                </Segment>}\n        </React.Fragment>\n    )\n}\n\nexport default function Receiving() {\n    const [searchResults, setSearchResults] = useState([]);\n    const [receivingList, setReceivingList] = useState([]);\n\n    /**\n     * Fetches cards from the DB by title when a user selects a title after querying.\n     * This function merges the data (inventory quantity and card objects) from two endpoints into one array.\n     * \n     * @param {String} term - the search term\n     */\n    const handleSearchSelect = async term => {\n        try {\n            const { data } = await axios.get(GET_CARDS_WITH_INFO, {\n                params: { title: term, matchInStock: false },\n                headers: makeAuthHeader()\n            });\n\n            setSearchResults(data);\n        } catch (e) {\n            console.log(e);\n        }\n    };\n\n    /**\n     * Adds a card to the receiving list, with a unique uuid for identification\n     */\n    const addToList = ({ quantity, cashPrice, marketPrice, creditPrice, finishCondition, cardInfo }) => {\n\n        const previousState = [...receivingList];\n        let initialTradeType = TRADE_TYPE.CREDIT;\n\n        // If the creditPrice is 0 default to cash\n        if (!creditPrice) initialTradeType = TRADE_TYPE.CASH;\n\n        // Each line-item represents one card. Use _.times() to repeat\n        const newState = previousState.concat(_.times(quantity, idx => {\n            return { cashPrice, marketPrice, creditPrice, finishCondition, ...cardInfo, uuid_key: uuid(), tradeType: initialTradeType }\n        }))\n\n        setReceivingList(_.sortBy(newState, 'name'));\n    }\n\n    /**\n     * Removes a card from the receiving list using the uuid\n     */\n    const removeFromList = (uuid_key) => {\n        const copiedState = [...receivingList];\n        _.remove(copiedState, e => e.uuid_key === uuid_key); // Mutates array\n        setReceivingList(copiedState);\n    }\n\n    /**\n     * Determines whether line-items use cash or credit. Changes the tradeType by reference in the receivingList array\n     * which changes the button color/active prop in ReceivingListItem\n     */\n    const activeTradeType = (uuid_key, tradeType) => {\n        const previousState = [...receivingList];\n        const card = previousState.find(e => e.uuid_key === uuid_key);\n        card.tradeType = TRADE_TYPE[tradeType];\n        setReceivingList(previousState);\n    }\n\n    /**\n     * Selects all items by their tradeType, if possible\n     * \n     * @param {String} tradeType - `CASH` or `CREDIT`\n     */\n    const selectAll = (tradeType) => {\n        const oldState = [...receivingList];\n        const { CASH, CREDIT } = TRADE_TYPE;\n\n        oldState.forEach((card, idx, arr) => {\n            if (card.tradeType !== tradeType) { // if the line-items tradeType is not the one passed\n                const otherType = card.tradeType === CASH ? CREDIT : CASH; // determine the tradeType and set it to other one (toggle)\n                const otherTypeValue = otherType === CASH ? card.cashPrice : card.creditPrice; // see what the value of the other is\n                // if the other is greater than 0, we mutate array in-place\n                if (otherTypeValue > 0) arr[idx].tradeType = otherType;\n            }\n        })\n\n        setReceivingList(oldState);\n    }\n\n    /**\n     * Persists all passed cards to inventory via Promise.all() using the addCardToInventory backend method\n     */\n    const commitToInventory = async () => {\n        try {\n            const promises = receivingList.map(async card => {\n                return await axios.post(ADD_CARD_TO_INVENTORY, {\n                    quantity: 1,\n                    finishCondition: card.finishCondition,\n                    cardInfo: card\n                }, { headers: makeAuthHeader() });\n            })\n\n            await Promise.all(promises);\n\n            setSearchResults([]);\n            setReceivingList([]);\n\n            createToast({\n                color: 'green',\n                header: `${receivingList.length} cards were added to inventory!`,\n                duration: 2000\n            });\n        } catch (e) {\n            console.log(e);\n            createToast({\n                color: 'red',\n                header: `Something went wrong...`,\n                duration: 2000\n            });\n        }\n    }\n\n    return (\n        <React.Fragment>\n            <SearchBar handleSearchSelect={handleSearchSelect} />\n            <br />\n            <Grid stackable={true}>\n                <Grid.Row>\n                    <Grid.Column width=\"10\">\n                        <Header as=\"h2\" style={{ display: \"inline-block\" }}>Card Search</Header>\n                        <Divider />\n                        <DefaultPlaceholder\n                            active={!searchResults.length}\n                            headerText={\"So many cards, so little time.\"}\n                        />\n                        <ReceivingSearchList\n                            cards={searchResults}\n                            addToList={addToList}\n                        />\n                    </Grid.Column>\n                    <Grid.Column width=\"6\">\n                        <Header as=\"h2\" style={{ display: \"inline-block\" }}>Buylist</Header>\n                        {receivingList.length > 0 &&\n                            <Header floated=\"right\" style={{ display: \"inline-block\" }}>Total Cards: {receivingList.length}</Header>\n                        }\n                        <Divider />\n                        <DefaultPlaceholder\n                            active={!receivingList.length}\n                            headerText={\"If you receive it, they will come.\"}\n                        />\n                        {receivingList.length > 0 && <Table compact size=\"small\">\n                            <Table.Body>\n                                {receivingList.map(({ name, set, rarity, cashPrice, creditPrice, finishCondition, uuid_key, tradeType }) => {\n                                    return <ReceivingListItem\n                                        name={name}\n                                        set={set}\n                                        rarity={rarity}\n                                        cashPrice={cashPrice}\n                                        creditPrice={creditPrice}\n                                        finishCondition={finishCondition}\n                                        uuid_key={uuid_key}\n                                        removeFromList={removeFromList}\n                                        tradeType={tradeType}\n                                        activeTradeType={activeTradeType}\n                                        key={uuid_key}\n                                    />\n                                })}\n                            </Table.Body>\n                        </Table>}\n                        {receivingList.length > 0 && <ReceivingListTotals\n                            receivingList={receivingList}\n                            selectAll={selectAll}\n                            commitToInventory={commitToInventory}\n                        />}\n                    </Grid.Column>\n                </Grid.Row>\n            </Grid>\n        </React.Fragment>\n    );\n}\n","import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { GET_ALL_SALES } from '../utils/api_resources';\nimport { Segment, Icon, Grid } from 'semantic-ui-react';\nimport Highcharts from 'highcharts';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nexport default function Reports() {\n    // const [salesData, setSalesData] = useState([]);\n    const [loading, setLoading] = useState(false);\n\n    useEffect(() => {\n        (async () => {\n            setLoading(true);\n\n            const { data } = await axios.get(GET_ALL_SALES);\n            const { sales_data, format_legalities } = data;\n\n            const groupByDay = _.groupBy(sales_data, d => moment(d.sale_data.timeStamp).startOf('day').format());\n\n            const dailySalesTotals = {};\n            const dailyAverageSales = {};\n            const rangeBuckets = {\n                0: 0, // $0.50 to $0.99\n                1: 0, // $1.00 to $4.99 \n                2: 0, // $5.00 to $9.99\n                3: 0, // $10.00 to $19.99\n                4: 0, // $20.00 to $49.99\n                5: 0, // $50.00 and above\n            };\n            const rarityCounts = {};\n\n            // Create daily sales totals\n            _.forOwn(groupByDay, (val, key) => {\n                dailySalesTotals[key] = val.reduce((acc, curr) => acc + curr.sale_data.total, 0);\n            });\n\n            // Create average sales totals\n            _.forOwn(groupByDay, (val, key) => {\n                dailyAverageSales[key] = val.reduce((acc, curr) => acc + curr.sale_data.total, 0) / val.length;\n            });\n\n            // Create range buckets for card prices\n            const cards = [];\n            sales_data.forEach(d => cards.push(...d.card_list));\n            cards.forEach(c => {\n                if (c.price >= 0.5 && c.price < 1) rangeBuckets[0] += c.qtyToSell;\n                if (c.price >= 1 && c.price < 5) rangeBuckets[1] += c.qtyToSell;\n                if (c.price >= 5 && c.price < 10) rangeBuckets[2] += c.qtyToSell;\n                if (c.price >= 10 && c.price < 20) rangeBuckets[3] += c.qtyToSell;\n                if (c.price >= 20 && c.price < 50) rangeBuckets[4] += c.qtyToSell;\n                if (c.price >= 50) rangeBuckets[5] += c.qtyToSell;\n            });\n\n            // Create rarity sales counts\n            cards.forEach(c => {\n                if (rarityCounts[c.rarity]) {\n                    rarityCounts[c.rarity] += c.qtyToSell\n                } else {\n                    rarityCounts[c.rarity] = c.qtyToSell;\n                }\n            });\n\n            // Create format legality data\n            const legalityCounts = { standard: 0, nonStandard: 0 };\n\n            format_legalities.forEach(c => {\n                const qtySold = c.qtyToSell;\n\n                if (!c.legalities) return; // Some cards may not link via mongo $lookup\n\n                if (c.legalities.standard === \"legal\") {\n                    legalityCounts.standard += qtySold;\n                } else {\n                    legalityCounts.nonStandard += qtySold;\n                }\n            });\n\n            // Format data for consumption by Highcharts API\n            const formattedDailySalesTotals = Object.entries(dailySalesTotals).map(el => [new Date(el[0]).getTime(), el[1]]);\n\n            const formattedDailyAverageSales = Object.entries(dailyAverageSales).map(el => [new Date(el[0]).getTime(), el[1]]);\n\n            const formattedRangeBuckets = Object.entries(rangeBuckets).map(d => d[1]);\n\n            const formattedRarityCounts = Object.entries(rarityCounts).map(d => ({ name: d[0], y: d[1] }));\n\n            const formattedLegalities = Object.entries(legalityCounts).map(d => ({ name: d[0], y: d[1] }));\n\n            setLoading(false);\n\n            Highcharts.setOptions({\n                lang: {\n                    thousandsSep: ','\n                }\n            });\n\n            Highcharts.chart('daily-sales', {\n                chart: {\n                    zoomType: 'x'\n                },\n                title: {\n                    text: 'Sales Over Time'\n                },\n                subtitle: {\n                    text: 'Click and drag to zoom'\n                },\n                credits: {\n                    enabled: false\n                },\n                xAxis: {\n                    type: 'datetime',\n                    title: {\n                        text: 'Date'\n                    }\n                },\n                yAxis: {\n                    title: {\n                        text: 'USD ($)'\n                    }\n                },\n                legend: {\n                    enabled: true\n                },\n                series: [{\n                    type: 'spline',\n                    data: formattedDailySalesTotals,\n                    name: 'Total Sales',\n                    tooltip: {\n                        valueDecimals: 2\n                    }\n                }, {\n                    type: 'spline',\n                    data: formattedDailyAverageSales,\n                    name: 'Average Sales',\n                    tooltip: {\n                        valueDecimals: 2\n                    }\n                }]\n            });\n\n            Highcharts.chart('price-buckets', {\n                chart: {\n                    type: 'bar'\n                },\n                title: {\n                    text: 'Cards Sold Per Price Range'\n                },\n                subtitle: {\n                    text: 'All-time'\n                },\n                yAxis: {\n                    min: 0,\n                    title: {\n                        text: 'Number sold'\n                    }\n                },\n                xAxis: {\n                    categories: [\n                        '$0.50 - $0.99',\n                        '$1.00 - $4.99',\n                        '$5.00 - $9.99',\n                        '$10.00 - $19.99',\n                        '$20.00 - $49.99',\n                        '$50.00 +'\n                    ]\n                },\n                plotOptions: {\n                    bar: {\n                        dataLabels: {\n                            enabled: true\n                        }\n                    }\n                },\n                legend: {\n                    enabled: false\n                },\n                credits: {\n                    enabled: false\n                },\n                series: [{\n                    name: \"Total cards\",\n                    data: formattedRangeBuckets\n                }]\n            });\n\n            Highcharts.chart('rarity-sales', {\n                chart: {\n                    plotBackgroundColor: null,\n                    plotBorderWidth: null,\n                    plotShadow: null,\n                    type: 'pie'\n                },\n                title: {\n                    text: 'Cards Sold Per Rarity'\n                },\n                subtitle: {\n                    text: 'All-time'\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: true,\n                            format: '<b>{point.name}</b><br>{point.percentage:.0f} %',\n                            distance: -50,\n                            filter: {\n                                property: 'percentage',\n                                operator: '>',\n                                value: 4\n                            }\n                        },\n                        colors: ['#7bb5ed', '#6798c8', '#4b769f', '#2d567c']\n                    }\n                },\n                legend: {\n                    enabled: false\n                },\n                credits: {\n                    enabled: false\n                },\n                series: [{\n                    name: \"Cards Sold\",\n                    data: formattedRarityCounts\n                }]\n            })\n\n            Highcharts.chart('format-legalities', {\n                chart: {\n                    plotBackgroundColor: null,\n                    plotBorderWidth: null,\n                    plotShadow: null,\n                    type: 'pie'\n                },\n                title: {\n                    text: 'Standard vs Non-Standard Sales'\n                },\n                subtitle: {\n                    text: 'All-time'\n                },\n                plotOptions: {\n                    pie: {\n                        dataLabels: {\n                            enabled: true,\n                            format: '<b>{point.name}</b><br>{point.percentage:.0f} %',\n                            distance: -50,\n                            filter: {\n                                property: 'percentage',\n                                operator: '>',\n                                value: 4\n                            }\n                        },\n                        colors: ['#7bb5ed', '#6798c8', '#4b769f', '#2d567c']\n                    }\n                },\n                legend: {\n                    enabled: false\n                },\n                credits: {\n                    enabled: false\n                },\n                series: [{\n                    name: \"Cards Sold\",\n                    data: formattedLegalities\n                }]\n            })\n        })();\n    }, []);\n\n    return (\n        <React.Fragment>\n            <Segment secondary>\n                <Icon name=\"exclamation triangle\" color=\"blue\" />\n                This feature is currently in beta. Metrics may not be entirely accurate. Please contact your development team if you have any feedback!\n            </Segment>\n            <Segment loading={loading}>\n                <div id=\"daily-sales\" style={{ width: \"100%\", height: \"400px\" }} />\n            </Segment>\n            <Grid columns={2} stackable={true}>\n                <Grid.Column>\n                    <Segment loading={loading}>\n                        <div id=\"price-buckets\" style={{ width: \"100%\", height: \"400px\" }} />\n                    </Segment>\n                </Grid.Column>\n                <Grid.Column>\n                    <Segment loading={loading}>\n                        <div id=\"rarity-sales\" style={{ width: \"100%\", height: \"400px\" }} />\n                    </Segment>\n                </Grid.Column>\n                <Grid.Column>\n                    <Segment loading={loading}>\n                        <div id=\"format-legalities\" style={{ width: \"100%\", height: \"400px\" }} />\n                    </Segment>\n                </Grid.Column>\n            </Grid>\n        </React.Fragment>\n    );\n}","import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport Home from './ManageInventory/Home';\nimport Sale from './NewSale/Sale';\nimport BrowseSales from './BrowseSales/BrowseSales';\nimport PublicInventory from './PublicInventory/PublicInventory';\nimport DeckboxClone from './DeckboxClone/DeckboxClone';\nimport Login from './Login/Login';\nimport Logout from './Logout/Logout';\nimport Receiving from './Receiving/Receiving';\nimport Reports from './Reports/Reports'\nimport styled from 'styled-components';\nimport { Segment, Icon, Header } from 'semantic-ui-react';\n\nconst ContentContainer = styled.div`\n    padding-top: 52.63px;\n    margin-left: 20px;\n    margin-right: 20px;\n`;\n\nconst CenterSpan = styled.span`\n    text-align: center;\n`;\n\nconst Alert = () => {\n    return <Segment placeholder>\n        <Header icon>\n            <Icon name=\"exclamation circle\" color=\"blue\" />\n            The Clubhouse is open 🎉\n        </Header>\n        <CenterSpan>It's official! We are now open 7 days a week. Until further notice, our hours are 12 pm to 6 pm - the play space is still closed however. We look forward to seeing you soon!</CenterSpan>\n    </Segment>\n}\n\nexport default function Main() {\n    return (\n        <ContentContainer>\n            <br />\n\n            <Switch>\n                <Route exact path=\"/\" component={Alert} />\n                <Route exact path=\"/manage-inventory\" component={Home} />\n                <Route exact path=\"/new-sale\" component={Sale} />\n                <Route exact path=\"/browse-sales\" component={BrowseSales} />\n                <Route exact path=\"/browse-inventory\" component={DeckboxClone} />\n                <Route exact path=\"/public-inventory\" component={PublicInventory} />\n                <Route exact path=\"/receiving\" component={Receiving} />\n                <Route exact path=\"/reports\" component={Reports} />\n                <Route exact path=\"/login\" component={Login} />\n                <Route exact path=\"/logout\" component={Logout} />\n            </Switch>\n        </ContentContainer>\n    )\n}","import React, { useContext } from 'react';\nimport ballLogo from './logos/magic-ball.png'\nimport { Menu, Icon, Dropdown } from 'semantic-ui-react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthProvider';\n\nconst style = {\n    background: \"linear-gradient(#2185d0, #206ac6)\",\n    boxShadow: '0 3px 5px 0 rgba(0,0,0,.25)'\n}\n\nfunction Header(props) {\n    const { loggedIn } = useContext(AuthContext);\n    const { pathname } = props.location;\n\n    return <Menu inverted fixed=\"top\" style={style}>\n        <Menu.Item as={Link} replace to=\"/\">\n            <img src={ballLogo} style={{ marginRight: '7px' }} alt=\"logo\" />\n            <span><h3>Clubhouse Collection</h3></span>\n        </Menu.Item>\n        <Menu.Menu position=\"right\">\n            <Menu.Item active={pathname === '/public-inventory'} position=\"right\" as={Link} replace to=\"/public-inventory\">\n                Search\n            </Menu.Item>\n            {loggedIn && <Dropdown item icon=\"bars\">\n                <Dropdown.Menu>\n                    <Dropdown.Item active={pathname === '/manage-inventory'} as={Link} replace to=\"/manage-inventory\">\n                        <Icon name=\"plus\" color=\"blue\" />Manage Inventory\n                    </Dropdown.Item>\n                    <Dropdown.Item active={pathname === '/new-sale'} as={Link} replace to=\"/new-sale\" >\n                        <Icon name=\"dollar sign\" color=\"blue\" />New Sale\n                    </Dropdown.Item>\n                    <Dropdown.Item active={pathname === '/receiving'} as={Link} replace to=\"/receiving\" >\n                        <Icon name=\"list alternate outline\" color=\"blue\" />Receiving\n                    </Dropdown.Item>\n\n                    <Dropdown.Divider />\n\n                    <Dropdown.Item active={pathname === '/browse-inventory'} as={Link} replace to=\"/browse-inventory\" >\n                        <Icon name=\"box\" color=\"blue\" />Browse Inventory\n                    </Dropdown.Item>\n                    <Dropdown.Item active={pathname === '/browse-sales'} as={Link} replace to=\"/browse-sales\" >\n                        <Icon name=\"eye\" color=\"blue\" />Browse Sales\n                    </Dropdown.Item>\n                    <Dropdown.Item active={pathname === '/reports'} as={Link} replace to=\"/reports\" >\n                        <Icon name=\"chart bar\" color=\"blue\" />Reporting (Beta)\n                    </Dropdown.Item>\n\n                    <Dropdown.Divider />\n\n                    <Dropdown.Item active={pathname === '/logout'} as={Link} replace to=\"/logout\" >\n                        <Icon name=\"log out\" color=\"blue\" />Log out\n                    </Dropdown.Item>\n                </Dropdown.Menu>\n            </Dropdown>}\n            {!loggedIn && <Menu.Item active={pathname === '/login'} position=\"right\" as={Link} replace to=\"/login\">\n                Log in\n                </Menu.Item>}\n        </Menu.Menu>\n    </Menu >\n}\n\nexport default withRouter(props => <Header {...props} />);\n","import React from 'react';\nimport Main from './Main';\nimport Header from './Header/Header';\nimport AuthProvider from './context/AuthProvider';\n\nclass App extends React.Component {\n    render() {\n        return (\n            <AuthProvider>\n                <Header />\n                <Main />\n            </AuthProvider>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { HashRouter } from 'react-router-dom';\nimport 'semantic-ui-css/semantic.min.css';\n\nReactDOM.render(\n    <HashRouter basename='/'>\n        <App />\n    </HashRouter>,\n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}