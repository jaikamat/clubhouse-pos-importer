(this["webpackJsonpclubhouse-pos-importer"]=this["webpackJsonpclubhouse-pos-importer"]||[]).push([[0],{255:function(e,t,a){e.exports=a.p+"static/media/magic-ball.c3fcddd6.png"},267:function(e,t,a){e.exports=a(453)},272:function(e,t,a){},32:function(e,t){e.exports={GET_CARDS_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByTitle",GET_CARDS_FROM_INVENTORY:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsFromInventory",FINISH_SALE:"https://us-central1-clubhouse-collection.cloudfunctions.net/finishSale",ADD_CARD_TO_INVENTORY:"https://us-central1-clubhouse-collection.cloudfunctions.net/addCardToInventory",GET_INVENTORY_QUERY:"https://us-central1-clubhouse-collection.cloudfunctions.net/inventorySearchQuery",GET_SALES_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getSales",LOGIN:"https://us-central1-clubhouse-collection.cloudfunctions.net/getJwt",SCRYFALL_AUTOCOMPLETE:"https://api.scryfall.com/cards/autocomplete",SCRYFALL_SEARCH:"https://api.scryfall.com/cards/search",SCRYFALL_ID_SEARCH:"https://api.scryfall.com/cards/"}},453:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(42),o=a.n(l),c=(a(272),a(23)),i=a.n(c),s=a(29),u=a(16),d=a(20),h=a(19),m=a(17),p=a(18),f=a(63),g=a(471),b=a(123),E=a.n(b),v=a(31),y=a.n(v);function O(){return{Authorization:"Bearer ".concat(localStorage.getItem("clubhouse_JWT"))}}var S=a(32),C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,term:"",autocomplete:[],results:[],defaultSearchValue:"Search for a card"},a.handleSearchChange=function(e,t){var n=t.value;if(a.setState({isLoading:!0,term:n}),a.state.term.length<1)return a.setState({isLoading:!1,term:"",results:[],autocomplete:[],defaultSearchValue:"Search for a card"});setTimeout(Object(s.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat(S.SCRYFALL_AUTOCOMPLETE,"?q=").concat(a.state.term),{headers:O()});case 2:t=e.sent,n=t.data,r=n.data.map((function(e){return{title:e}})),a.setState({results:r,isLoading:!1});case 6:case"end":return e.stop()}}),e)}))),300)},a.handleResultSelect=function(e,t){var n=t.result;a.props.handleSearchSelect(n.title)},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.results,a=e.isLoading,n=e.defaultSearchValue;return r.a.createElement(g.a,{onSearchChange:E.a.debounce(this.handleSearchChange,300,{trailing:!0}),onResultSelect:this.handleResultSelect,loading:a,results:t,placeholder:n,selectFirstResult:!0})}}]),t}(r.a.Component),L=a(472),j=a(33),w=a(469),I=a(466),F=a(93),_=a(464),k=a(461),T=a(462),x=a(454);function N(e){var t=e.inventoryQty;if(!t)return"Foil: 0 | Nonfoil: 0";var a=(t.FOIL_NM||0)+(t.FOIL_LP||0)+(t.FOIL_MP||0)+(t.FOIL_HP||0),n=(t.NONFOIL_NM||0)+(t.NONFOIL_LP||0)+(t.NONFOIL_MP||0)+(t.NONFOIL_HP||0);return"Foil: ".concat(a," | Nonfoil: ").concat(n)}var D=a(81),P=function(e){var t=e.num,a=Number(t).toFixed(2);return r.a.createElement("span",null,"$",a)},A=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={price:"not found"},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.id,e.next=3,y.a.get("".concat(S.SCRYFALL_ID_SEARCH).concat(t),{headers:O()});case 3:a=e.sent,n=a.data,this.setState({price:Number(n.prices.usd)});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.price;return r.a.createElement("span",null,"Est. price ",0===e?"not found":r.a.createElement(P,{num:e}))}}]),t}(r.a.Component),R=a(257),M=function(e){var t=e.image_uris,a=e.card_faces;try{return r.a.createElement(R.a,{src:t.normal,size:"tiny"})}catch(n){return r.a.createElement(R.a,{src:a[0].image_uris.normal,size:"tiny"})}};function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=[{key:"NONFOIL",text:"Nonfoil",value:"NONFOIL"},{key:"FOIL",text:"Foil",value:"FOIL"}],H=[{key:"NM",text:"Near Mint",value:"NM"},{key:"LP",text:"Light Play",value:"LP"},{key:"MP",text:"Moderate Play",value:"MP"},{key:"HP",text:"Heavy Play",value:"HP"}];function z(e,t){return!e&&t?{selectedFinish:"FOIL",finishDisabled:!0}:e&&!t?{selectedFinish:"NONFOIL",finishDisabled:!0}:e&&t?{selectedFinish:"NONFOIL",finishDisabled:!1}:void 0}var G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={quantity:0,selectedFinish:z(a.props.nonfoil,a.props.foil).selectedFinish,selectedCondition:"NM",finishDisabled:z(a.props.nonfoil,a.props.foil).finishDisabled,submitDisable:!1,inventoryQty:a.props.inventoryQty,submitLoading:!1},a.handleFinishChange=function(e,t){var n=t.value;a.setState({selectedFinish:n},(function(){console.log(a.state)}))},a.handleConditionChange=function(e,t){var n=t.value;a.setState({selectedCondition:n},(function(){console.log(a.state)}))},a.handleQuantityChange=function(e,t){var n=t.value,r=parseInt(n),l=isNaN(r)?"":r;a.setState({quantity:l})},a.handleInventoryAdd=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var l,o,c,s,u,d,h,m,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.value,l=a.state,o=l.quantity,c=l.selectedFinish,s=l.selectedCondition,u=a.props.name,d="".concat(c,"_").concat(s),e.prev=4,a.setState({submitDisable:!0,submitLoading:!0}),e.next=8,y.a.post(S.ADD_CARD_TO_INVENTORY,{quantity:o,type:d,cardInfo:Q({},a.props)},{headers:O()});case 8:h=e.sent,m=h.data,p=r.a.createElement(w.a,{positive:!0,compact:!0},r.a.createElement(w.a.Header,null,o,"x ",u," ",o>0?"added":"removed","!")),D.a.notify((function(){return p}),{position:"bottom-right",duration:2e3}),a.setState({quantity:0,selectedFinish:z(a.props.nonfoil,a.props.foil).selectedFinish,selectedCondition:"NM",finishDisabled:z(a.props.nonfoil,a.props.foil).finishDisabled,submitDisable:!1,inventoryQty:m.qoh,submitLoading:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.selectedFinish,a=e.selectedCondition,n=e.finishDisabled,l=e.quantity,o=e.submitDisable,c=e.inventoryQty,i=e.submitLoading,s=this.props,u=s.image_uris,d=s.name,h=s.set_name,m=s.set,p=s.rarity,f=s.id,g=s.card_faces;return r.a.createElement(L.a,null,r.a.createElement(I.a.Group,{divided:!0},r.a.createElement(I.a,null,r.a.createElement(I.a.Image,{size:"tiny"},r.a.createElement(M,{image_uris:u,card_faces:g})),r.a.createElement(I.a.Content,null,r.a.createElement(I.a.Header,{as:"h3"},d," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(m," ss-").concat(p),style:{fontSize:"30px"}}),r.a.createElement(F.a,{horizontal:!0},h," (",String(m).toUpperCase(),")"),r.a.createElement(N,{inventoryQty:c})," ",r.a.createElement(F.a,{horizontal:!0},r.a.createElement(A,{id:f}))),r.a.createElement(I.a.Description,null,r.a.createElement(_.a,null,r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Field,{control:k.a,type:"number",label:"Quantity",value:l,onChange:this.handleQuantityChange}),r.a.createElement(_.a.Field,{label:"Finish",control:T.a,value:t,options:Y,disabled:n,onChange:this.handleFinishChange}),r.a.createElement(_.a.Field,{label:"Condition",control:T.a,value:a,options:H,onChange:this.handleConditionChange}),r.a.createElement(_.a.Button,{label:"Add to Inventory?",control:x.a,primary:!0,disabled:0===l||""===l||o,onClick:this.handleInventoryAdd,loading:i},"Submit"))))))))}}]),t}(n.Component);var B=function(e){var t=e.cards.map((function(t){return r.a.createElement(G,Object.assign({showImage:e.showImages,key:t.id},t,{inventoryQty:e.quantities[t.id]}))}));return r.a.createElement(L.a.Group,null,t)},U=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={searchResults:[],inventoryQuantities:[],showImages:!0},a.handleSearchSelect=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI('"'.concat(t,'"')),e.prev=1,e.next=4,y.a.get("".concat(S.SCRYFALL_SEARCH,"?q=!").concat(n,"%20unique%3Aprints%20game%3Apaper"),{headers:O()});case 4:return r=e.sent,l=r.data.data.map((function(e){return e.id})),e.next=8,y.a.post(S.GET_CARDS_FROM_INVENTORY,{scryfallIds:l},{headers:O()});case 8:o=e.sent,console.log(r.data),console.log(o.data),a.setState({searchResults:r.data.data,inventoryQuantities:o.data}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),a.handleImageToggle=function(){a.setState({showImages:!a.state.showImages})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(C,{handleSearchSelect:this.handleSearchSelect})),r.a.createElement(B,{showImages:this.state.showImages,cards:this.state.searchResults,quantities:this.state.inventoryQuantities}))}}]),t}(r.a.Component),J=a(46),V=a(474),W=a(473),$=a(463),K=a(70),X=a(92),Z=a(94);function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function te(e,t){return Object.entries(e).map((function(e){var a,n=Object(X.a)(e,2),r=n[0],l=n[1];return{text:"".concat((a=r,a.split("_").join(" | "))," | Qty: ").concat(l),value:r,key:"".concat(t).concat(r)}}))}var ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedFinishCondition:"",selectedFinishConditionQty:0,quantityToSell:0,price:0,conditionOptions:te(a.props.qoh,a.props.id)},a.handleQuantityChange=function(e,t){var n=t.value,r=a.state.selectedFinishConditionQty;n>r&&(n=r),n<0&&(n=0),a.setState({quantityToSell:parseInt(n)})},a.handleSelectedFinishCondition=function(e,t){var n=t.value;a.setState({selectedFinishCondition:n,selectedFinishConditionQty:a.props.qoh[n]})},a.handlePriceChange=function(e,t){var n=t.value;a.setState({price:n})},a.handleAddToSale=function(){var e=a.props,t=(e.id,e.name,e.set,a.state),n=t.selectedFinishCondition,r=t.quantityToSell,l=t.price;a.props.addToSaleList(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props),n,r,l),a.setState({selectedFinishCondition:"",selectedFinishConditionQty:0,quantityToSell:0,price:0,conditionOptions:te(a.props.qoh,a.props.id)})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.image_uris,n=e.set,l=e.set_name,o=e.rarity,c=e.qoh,i=e.id,s=e.card_faces,u=this.state,d=u.selectedFinishCondition,h=u.selectedFinishConditionQty,m=u.conditionOptions,p=u.quantityToSell,f=u.price;return r.a.createElement(L.a,null,r.a.createElement(I.a.Group,{divided:!0},r.a.createElement(I.a,null,r.a.createElement(I.a.Image,{size:"tiny"},r.a.createElement(M,{image_uris:a,card_faces:s})),r.a.createElement(I.a.Content,null,r.a.createElement(I.a.Header,{as:"h3"},t," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(n," ss-").concat(o),style:{fontSize:"30px"}}),r.a.createElement(F.a,{horizontal:!0},l," (",String(n).toUpperCase(),")"),r.a.createElement(N,{inventoryQty:c})," ",r.a.createElement(F.a,{horizontal:!0},r.a.createElement(A,{id:i}))),r.a.createElement(I.a.Description,null,r.a.createElement(_.a,null,r.a.createElement(_.a.Group,null,r.a.createElement(_.a.Field,{control:Z.a,selection:!0,placeholder:"Select inventory",options:m,value:d,label:"Select finish/condition",onChange:this.handleSelectedFinishCondition}),r.a.createElement(_.a.Field,{control:k.a,type:"number",label:"Quantity to sell",value:p,onChange:this.handleQuantityChange,disabled:!h}),r.a.createElement(_.a.Field,{control:k.a,type:"number",label:"Price",value:f,onChange:this.handlePriceChange,disabled:!h}),r.a.createElement(_.a.Button,{label:"Add to sale?",control:x.a,primary:!0,onClick:this.handleAddToSale,disabled:!p},"Sell"))))))))}}]),t}(r.a.Component);function ne(e){return e.cards.map((function(t){return r.a.createElement(ae,Object.assign({key:t.id},t,{addToSaleList:e.addToSaleList}))}))}var re=a(468);function le(e){var t=e.name,a=e.set,n=e.set_name,l=e.finishCondition,o=e.qtyToSell,c=e.price,i=e.rarity,s=e.deleteLineItem,u=e.id;return r.a.createElement(re.a,{fluid:!0},r.a.createElement(re.a.Content,null,r.a.createElement(re.a.Header,{as:"h4"},t," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(a," ss-").concat(i),style:{fontSize:"30px"}}),r.a.createElement(F.a,{horizontal:!0},n," (",a.toUpperCase(),")")),r.a.createElement("span",null,o,"x @ ",r.a.createElement(P,{num:c})," | ",l),r.a.createElement(re.a.Description,null)),r.a.createElement(x.a,{style:{color:"D3D3D3"},icon:!0,onClick:function(){return s(u,l)}},r.a.createElement(K.a,{name:"cancel"})))}var oe=function(e){var t=e.saleList,a=t.length?t.reduce((function(e,t){return e+parseInt(t.qtyToSell)*Number(t.price)}),0):0;return r.a.createElement(P,{num:a})};function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ie=function(e){var t=e.color,a=e.header,n=e.message,l=e.position;return D.a.notify((function(){return r.a.createElement(w.a,{color:t,compact:!0},r.a.createElement(w.a.Header,null,a),n)}),{position:l})},se={searchResults:[],saleListCards:[],showModal:!1,submitLoading:!1},ue=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=se,a.handleResultSelect=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get(S.GET_CARDS_BY_TITLE,{params:{title:t},headers:O()});case 3:n=e.sent,r=n.data,a.setState({searchResults:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a.addToSaleList=function(e,t,n,r){var l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach((function(t){Object(j.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{finishCondition:t,qtyToSell:n,price:r}),o=Object(J.a)(a.state.saleListCards),c=o.findIndex((function(e){return e.id===l.id&&e.finishCondition===t}));-1!==c?o.splice(c,1,l):o.push(l),a.setState({saleListCards:o})},a.removeFromSaleList=function(e,t){var n=E.a.reject(Object(J.a)(a.state.saleListCards),(function(a){return a.id===e&&a.finishCondition===t}));a.setState({saleListCards:n})},a.finalizeSale=Object(s.a)(i.a.mark((function e(){var t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({submitLoading:!0}),e.next=4,y.a.post(S.FINISH_SALE,{cards:a.state.saleListCards},{headers:O()});case 4:t=e.sent,n=t.data,r=n.sale_data.Sale.saleID,ie({color:"green",header:"Sale created in Lightspeed!",message:"The id number is #".concat(r),position:"bottom-right"}),a.setState(se),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),ie({color:"red",header:"Error!",message:"Sale was not created",position:"bottom-right"}),a.setState(se),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),a.closeModal=function(){a.setState({showModal:!1})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.searchResults,n=t.saleListCards,l=t.showModal,o=t.submitLoading,c=n.map((function(t){return r.a.createElement(le,Object.assign({},t,{key:"".concat(t.id).concat(t.finishCondition).concat(t.qtyToSell),deleteLineItem:e.removeFromSaleList}))}));return r.a.createElement("div",null,r.a.createElement(C,{handleSearchSelect:this.handleResultSelect}),r.a.createElement(V.a,{stackable:!0},r.a.createElement(V.a.Row,null,r.a.createElement(V.a.Column,{width:"11"},r.a.createElement(W.a,{as:"h2"},"Inventory"),r.a.createElement(L.a,null,r.a.createElement(ne,{cards:a,addToSaleList:this.addToSaleList}))),r.a.createElement(V.a.Column,{width:"5"},r.a.createElement(W.a,{as:"h2"},"Sale Items"),r.a.createElement(L.a,null,c),n.length>0&&r.a.createElement(L.a,{clearing:!0},r.a.createElement(W.a,{floated:"left"},r.a.createElement(W.a,{sub:!0},"Subtotal"),r.a.createElement(oe,{saleList:n})),r.a.createElement($.a,{basic:!0,open:l,trigger:r.a.createElement(x.a,{floated:"right",primary:!0,onClick:function(){e.setState({showModal:!0})}},"Finalize sale")},r.a.createElement($.a.Content,null,r.a.createElement(W.a,{inverted:!0,as:"h2"},"Finalize this sale for Lightspeed?"),r.a.createElement("p",null,"Click 'Yes' to complete the sale in Lightspeed. Undoing this action will be quite painful")),r.a.createElement($.a.Actions,null,r.a.createElement(x.a,{basic:!0,color:"red",inverted:!0,onClick:this.closeModal},r.a.createElement(K.a,{name:"remove"})," No"),r.a.createElement(x.a,{color:"green",inverted:!0,onClick:this.finalizeSale,loading:o},r.a.createElement(K.a,{name:"checkmark"})," Yes"))))))))}}]),t}(r.a.Component),de=a(467),he=a(252),me=a.n(he),pe=function(e){var t=e.saleData,a=e.cardList.reduce((function(e,t){return e+t.qtyToSell}),0);return r.a.createElement(de.a.Row,null,r.a.createElement(de.a.Cell,null,t.saleID),r.a.createElement(de.a.Cell,null,me()(t.createTime).format("MM/DD/YYYY - h:mm A")),r.a.createElement(de.a.Cell,null,a))},fe=function(e){var t=e.list;return r.a.createElement(de.a,{celled:!0,unstackable:!0,compact:!0},r.a.createElement(de.a.Header,null,r.a.createElement(de.a.Row,null,r.a.createElement(de.a.HeaderCell,null,"Sale ID"),r.a.createElement(de.a.HeaderCell,null,"Date of Sale"),r.a.createElement(de.a.HeaderCell,null,"Quantity Sold"))),r.a.createElement(de.a.Body,null,t.map((function(e){var t=e.sale_data,a=e.card_list,n=e._id;return r.a.createElement(pe,{saleData:t,cardList:a,key:n})}))))},ge=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={salesList:[],cardName:""},a.handleSearchSelect=function(){var e=Object(s.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get(S.GET_SALES_BY_TITLE,{params:{cardName:t},headers:O()});case 2:n=e.sent,r=n.data,a.setState({salesList:r,cardName:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.salesList,a=e.cardName;return r.a.createElement("div",null,r.a.createElement(C,{handleSearchSelect:this.handleSearchSelect}),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("em",null,""!==a&&r.a.createElement("h4",null,t.length," results for ",a))),r.a.createElement(fe,{list:t}))}}]),t}(n.Component),be=function(e){var t=e.color,a=e.header,n=e.message,l=e.position;return D.a.notify((function(){return r.a.createElement(w.a,{color:t,compact:!0},r.a.createElement(w.a.Header,null,a),n)}),{position:l})},Ee={username:"",password:"",btnLoading:!1},ve=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Ee,a.handleInputChange=function(e,t){var n=t.value;a.setState(Object(j.a)({},e.target.name,n))},a.login=Object(s.a)(i.a.mark((function e(){var t,n,r,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.username,r=t.password,a.setState({btnLoading:!0}),e.next=4,a.props.handleLogin(n,r);case 4:l=e.sent,o=l.authed,a.setState({btnLoading:!1}),o?(a.setState(Ee),be({color:"green",header:"Success!",message:"You were logged in",position:"bottom-right"})):(a.setState(Ee),be({color:"red",header:"Error",message:"Login failed",position:"bottom-right"}));case 8:case"end":return e.stop()}}),e)}))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.btnLoading;return this.props.loggedIn?r.a.createElement(f.a,{to:"/manage-inventory"}):r.a.createElement(_.a,null,r.a.createElement(_.a.Field,null,r.a.createElement(_.a.Input,{name:"username",placeholder:"Username",label:"Username",value:t,onChange:this.handleInputChange})),r.a.createElement(_.a.Field,null,r.a.createElement(_.a.Input,{name:"password",placeholder:"Password",type:"password",label:"Password",value:a,onChange:this.handleInputChange})),r.a.createElement(x.a,{type:"submit",onClick:this.login,disabled:!t||!a,loading:n},"Submit"))}}]),t}(r.a.Component),ye=function(e){return e.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{as:"h4"},r.a.createElement("i",null,"Until we meet again, friend...")),r.a.createElement(x.a,{onClick:function(){return e.handleLogin("","")}},"Logout")):r.a.createElement(f.a,{to:"/login"})};var Oe=function(e){var t=e.handleLogin,a=e.loggedIn;return r.a.createElement("div",{style:{marginTop:"52.63px",marginLeft:"20px",marginRight:"20px"}},r.a.createElement("br",null),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/manage-inventory",component:U}),r.a.createElement(f.b,{exact:!0,path:"/new-sale",component:ue}),r.a.createElement(f.b,{exact:!0,path:"/browse-sales",component:ge}),r.a.createElement(f.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(ve,{handleLogin:t,loggedIn:a})}}),r.a.createElement(f.b,{exact:!0,path:"/logout",render:function(){return r.a.createElement(ye,{handleLogin:t,loggedIn:a})}})))},Se=a(255),Ce=a.n(Se),Le=a(470),je=a(44),we=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.loggedIn;return r.a.createElement(Le.a,{inverted:!0,color:"blue",fixed:"top",style:{boxShadow:"0 3px 5px 0 rgba(0,0,0,.25)"}},r.a.createElement(Le.a.Item,null,r.a.createElement("img",{src:Ce.a,style:{marginRight:"7px"}}),r.a.createElement("span",null,r.a.createElement("h3",null,"Clubhouse Collection"))),r.a.createElement(Le.a.Menu,{position:"right"},e&&r.a.createElement(Z.a,{item:!0,icon:"bars"},r.a.createElement(Z.a.Menu,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a.Item,{as:je.b,to:"/manage-inventory"},r.a.createElement(K.a,{name:"plus"}),"Manage Inventory"),r.a.createElement(Z.a.Item,{as:je.b,to:"/new-sale"},r.a.createElement(K.a,{name:"dollar sign"}),"New Sale"),r.a.createElement(Z.a.Item,{as:je.b,to:"/browse-sales"},r.a.createElement(K.a,{name:"eye"}),"Browse Sales"),r.a.createElement(Z.a.Item,{as:je.b,to:"/logout"},r.a.createElement(K.a,{name:"log out"}),"Logout")))),!e&&r.a.createElement(Le.a.Item,{position:"right",as:je.b,to:"/login"},"Log in")))}}]),t}(r.a.Component),Ie=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!!localStorage.getItem("clubhouse_JWT")},a.handleLogin=function(){var e=Object(s.a)(i.a.mark((function e(t,n){var r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.post(S.LOGIN,{username:t.toLowerCase(),password:n},{headers:O()});case 3:if(r=e.sent,!(l=r.data).token){e.next=11;break}return localStorage.setItem("clubhouse_JWT",l.token),a.setState({loggedIn:!!localStorage.getItem("clubhouse_JWT")}),e.abrupt("return",{authed:!0});case 11:return localStorage.clear(),a.setState({loggedIn:!!localStorage.getItem("clubhouse_JWT")}),e.abrupt("return",{authed:!1});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(we,{loggedIn:this.state.loggedIn}),r.a.createElement(Oe,{handleLogin:this.handleLogin,loggedIn:this.state.loggedIn}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(452);o.a.render(r.a.createElement(je.a,null,r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[267,1,2]]]);
//# sourceMappingURL=main.498d0185.chunk.js.map