(this["webpackJsonpclubhouse-pos-importer"]=this["webpackJsonpclubhouse-pos-importer"]||[]).push([[0],{255:function(e,t,a){e.exports=a.p+"static/media/magic-ball.c3fcddd6.png"},268:function(e,t,a){e.exports=a(454)},273:function(e,t,a){},30:function(e,t){var a="development"===Object({NODE_ENV:"production",PUBLIC_URL:"/clubhouse-pos-importer"}).REACT_APP_ENVIRONMENT?"_test":"",n={GET_CARDS_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsByTitle".concat(a),GET_CARD_QTY_FROM_INVENTORY:"https://us-central1-clubhouse-collection.cloudfunctions.net/getCardsFromInventory".concat(a),FINISH_SALE:"https://us-central1-clubhouse-collection.cloudfunctions.net/finishSale".concat(a),ADD_CARD_TO_INVENTORY:"https://us-central1-clubhouse-collection.cloudfunctions.net/addCardToInventory".concat(a),GET_INVENTORY_QUERY:"https://us-central1-clubhouse-collection.cloudfunctions.net/inventorySearchQuery".concat(a),GET_SALES_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getSales".concat(a),GET_SCRYFALL_BULK_BY_TITLE:"https://us-central1-clubhouse-collection.cloudfunctions.net/getScryfallBulkCardsByTitle".concat(a),LOGIN:"https://us-central1-clubhouse-collection.cloudfunctions.net/getJwt".concat(a),SCRYFALL_AUTOCOMPLETE:"https://api.scryfall.com/cards/autocomplete",SCRYFALL_SEARCH:"https://api.scryfall.com/cards/search",SCRYFALL_ID_SEARCH:"https://api.scryfall.com/cards/"};e.exports=n},454:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(43),c=a.n(l),o=(a(273),a(22)),s=a.n(o),i=a(28),u=a(16),d=a(20),m=a(18),h=a(17),p=a(19),f=a(66),g=a(473),b=a(54),E=a.n(b),y=a(29),v=a.n(y);function O(){return{Authorization:"Bearer ".concat(localStorage.getItem("clubhouse_JWT"))}}var S=a(30),L=a(63),C=a.n(L),j=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,term:"",autocomplete:[],results:[],defaultSearchValue:"Search for a card"},a.handleSearchChange=function(e,t){var n=t.value;if(a.setState({term:n}),a.state.term.length<1)return a.setState({isLoading:!1,term:"",results:[],autocomplete:[],defaultSearchValue:"Search for a card"});a.state.term.length<3||(a.setState({isLoading:!0}),setTimeout(Object(i.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(S.SCRYFALL_AUTOCOMPLETE,"?q=").concat(a.state.term),{headers:O()});case 2:t=e.sent,n=t.data,r=n.data.map((function(e){return{title:e}})).slice(0,7),a.setState({results:r,isLoading:!1});case 6:case"end":return e.stop()}}),e)}))),100))},a.handleResultSelect=function(e,t){var n=t.result;a.props.handleSearchSelect(n.title)},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.results,a=e.isLoading,n=e.defaultSearchValue;return r.a.createElement(g.a,{onSearchChange:E.a.debounce(this.handleSearchChange,500,{leading:!1,trailing:!0}),onResultSelect:this.handleResultSelect,loading:a,results:t,placeholder:n,selectFirstResult:!0,id:"searchBar",onFocus:function(){C()("#searchBar").select()}})}}]),t}(r.a.Component),w=a(27),I=a(474),F=a(469),_=a(96),T=a(467),x=a(462),k=a(463),N=a(455);function R(e){var t=e.inventoryQty,a=0,n=0;t&&(a=(t.FOIL_NM||0)+(t.FOIL_LP||0)+(t.FOIL_MP||0)+(t.FOIL_HP||0),n=(t.NONFOIL_NM||0)+(t.NONFOIL_LP||0)+(t.NONFOIL_MP||0)+(t.NONFOIL_HP||0));var l={};a>0&&(l.color="blue");var c={};return n>0&&(c.color="blue"),r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,Object.assign({},l,{image:!0}),"Foil",r.a.createElement(_.a.Detail,null,a)),r.a.createElement(_.a,Object.assign({},c,{image:!0}),"Nonfoil",r.a.createElement(_.a.Detail,null,n)))}var D=a(471),P=a(257),A=function(e){var t=e.color,a=e.header,n=e.message,l=e.duration,c=void 0===l?2e3:l;return P.a.notify((function(){return r.a.createElement(D.a,{color:t,compact:!0},r.a.createElement(D.a.Header,null,a),n)}),{position:"bottom-right",duration:c})},B=a(258);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q={boxShadow:"2px 2px 5px 0 rgba(0,0,0,.25)",zIndex:"10",transition:"all .2s ease-in-out"},Y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={hovered:!1},a.mouseOver=function(){a.setState({hovered:!0})},a.mouseOut=function(){a.setState({hovered:!1})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.image_uris,a=e.card_faces;try{return r.a.createElement(B.a,{src:t.normal,size:"tiny",style:M({},Q,{transform:"".concat(this.state.hovered?"scale(1.75)":"scale(1)")}),onMouseOver:this.mouseOver,onMouseOut:this.mouseOut})}catch(n){return r.a.createElement(B.a,{src:a[0].image_uris.normal,size:"tiny",style:M({},Q,{transform:"".concat(this.state.hovered?"scale(1.75)":"scale(1)")}),onMouseOver:this.mouseOver,onMouseOut:this.mouseOut})}}}]),t}(r.a.Component),G=a(65),H=function(e){var t=e.num,a=Number(t).toFixed(2);return r.a.createElement("span",null,"$",a)},U=a(73),z={backgroundColor:"#ffcfdf",backgroundImage:"linear-gradient(90deg, #ffcfdf 0%, #b0f3f1 74%)"};function V(e){var t=e.id,a=e.finish,l=Object(n.useState)(null),c=Object(G.a)(l,2),o=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(G.a)(d,2),h=m[0],p=m[1];return Object(n.useEffect)((function(){!function(){var e=Object(i.a)(s.a.mark((function e(){var n,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,v.a.get("".concat(S.SCRYFALL_ID_SEARCH).concat(t),{headers:O()});case 3:n=e.sent,r=n.data,l="usd","FOIL"===a&&(l+="_foil"),u(Number(r.prices[l])),p(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t,a]),r.a.createElement(_.a,{tag:!0,style:"FOIL"===a?z:null},h?r.a.createElement(U.a,{loading:!0,name:"spinner"}):r.a.createElement("span",null,"Est. ",o?r.a.createElement(H,{num:o}):"not found"))}function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var K=[{key:"NONFOIL",text:"Nonfoil",value:"NONFOIL"},{key:"FOIL",text:"Foil",value:"FOIL"}],$=[{key:"NM",text:"Near Mint",value:"NM"},{key:"LP",text:"Light Play",value:"LP"},{key:"MP",text:"Moderate Play",value:"MP"},{key:"HP",text:"Heavy Play",value:"HP"}];function Z(e,t){return!e&&t?{selectedFinish:"FOIL",finishDisabled:!0}:e&&!t?{selectedFinish:"NONFOIL",finishDisabled:!0}:e&&t?{selectedFinish:"NONFOIL",finishDisabled:!1}:void 0}var X=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={quantity:0,selectedFinish:Z(a.props.nonfoil,a.props.foil).selectedFinish,selectedCondition:"NM",finishDisabled:Z(a.props.nonfoil,a.props.foil).finishDisabled,submitDisable:!1,inventoryQty:a.props.inventoryQty,submitLoading:!1},a.handleFinishChange=function(e,t){var n=t.value;a.setState({selectedFinish:n},(function(){console.log(a.state)}))},a.handleConditionChange=function(e,t){var n=t.value;a.setState({selectedCondition:n},(function(){console.log(a.state)}))},a.handleQuantityChange=function(e,t){var n=t.value,r=parseInt(n),l=isNaN(r)?"":r;a.setState({quantity:l})},a.handleFocus=function(){0===a.state.quantity&&a.setState({quantity:""})},a.handleBlur=function(){""===a.state.quantity&&a.setState({quantity:0})},a.handleInventoryAdd=function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r,l,c,o,i,u,d,m,h,p,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.value,r=a.state,l=r.quantity,c=r.selectedFinish,o=r.selectedCondition,i=a.props,u=i.name,d=i.nonfoil,m=i.foil,h="".concat(c,"_").concat(o),e.prev=4,a.setState({submitDisable:!0,submitLoading:!0}),e.next=8,v.a.post(S.ADD_CARD_TO_INVENTORY,{quantity:l,type:h,cardInfo:J({},a.props)},{headers:O()});case 8:p=e.sent,f=p.data,A({color:"green",header:"".concat(l,"x ").concat(u," ").concat(l>0?"added":"removed","!"),duration:2e3}),a.setState({quantity:0,selectedFinish:Z(d,m).selectedFinish,selectedCondition:"NM",finishDisabled:Z(d,m).finishDisabled,submitDisable:!1,inventoryQty:f.qoh,submitLoading:!1}),C()("#searchBar").focus().select(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.selectedFinish,a=e.selectedCondition,n=e.finishDisabled,l=e.quantity,c=e.submitDisable,o=e.inventoryQty,s=e.submitLoading,i=this.props,u=i.image_uris,d=i.name,m=i.set_name,h=i.set,p=i.rarity,f=i.card_faces,g=i.id;return r.a.createElement(I.a,null,r.a.createElement(F.a.Group,{divided:!0},r.a.createElement(F.a,null,r.a.createElement(F.a.Image,{size:"tiny"},r.a.createElement(Y,{image_uris:u,card_faces:f})),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,{as:"h3"},d," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(h," ss-").concat(p),style:{fontSize:"30px"}}),r.a.createElement(_.a,{color:"grey"},m," (",String(h).toUpperCase(),")"),r.a.createElement(R,{inventoryQty:o})," ",r.a.createElement(V,{id:g,finish:t})),r.a.createElement(F.a.Description,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Field,{control:x.a,type:"number",label:"Quantity",value:l,onChange:this.handleQuantityChange,onFocus:this.handleFocus,onBlur:this.handleBlur}),r.a.createElement(T.a.Field,{label:"Finish",control:k.a,value:t,options:K,disabled:n,onChange:this.handleFinishChange}),r.a.createElement(T.a.Field,{label:"Condition",control:k.a,value:a,options:$,onChange:this.handleConditionChange}),r.a.createElement(T.a.Button,{label:"Add to Inventory?",control:N.a,primary:!0,disabled:0===l||""===l||c,onClick:this.handleInventoryAdd,loading:s},"Submit"))))))))}}]),t}(n.Component);var ee=function(e){return e.cards.map((function(t){return r.a.createElement(X,Object.assign({showImage:e.showImages,key:t.id},t,{inventoryQty:e.quantities[t.id]}))}))},te=a(476),ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={searchResults:[],inventoryQuantities:[],showImages:!0},a.handleSearchSelect=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r,l,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(S.GET_SCRYFALL_BULK_BY_TITLE,{params:{title:t},headers:O()});case 3:return n=e.sent,r=n.data,l=r.map((function(e){return e.id})),e.next=8,v.a.post(S.GET_CARD_QTY_FROM_INVENTORY,{scryfallIds:l},{headers:O()});case 8:c=e.sent,a.setState({searchResults:r,inventoryQuantities:c.data}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a.handleImageToggle=function(){a.setState({showImages:!a.state.showImages})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.searchResults;return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{handleSearchSelect:this.handleSearchSelect}),!e.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(te.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("em",null,'"Searching the future for answers often leads to further questions."'))),r.a.createElement(ee,{showImages:this.state.showImages,cards:this.state.searchResults,quantities:this.state.inventoryQuantities}))}}]),t}(r.a.Component),ne=a(46),re=a(475),le=a(464),ce=a(466),oe=a(97);function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ie(e,t){var a=E.a.pickBy(e,(function(e){return e>0}));return Object.entries(a).map((function(e){var a=Object(G.a)(e,2),n=a[0],r=a[1];return{text:"".concat(n.split("_").join(" | ")," | Qty: ").concat(r),value:n,key:"".concat(t).concat(n)}}))}function ue(e){var t=E.a.pickBy(e,(function(e){return e>0})),a=E.a.keys(t).map((function(e){return e.split("_")[0]}));return E.a.uniq(a).indexOf("NONFOIL")>-1?"NONFOIL":"FOIL"}var de=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={selectedFinishCondition:"",selectedFinishConditionQty:0,quantityToSell:0,price:0,selectedFinish:ue(a.props.qoh),conditionOptions:ie(a.props.qoh,a.props.id)},a.handleQuantityChange=function(e,t){var n=t.value,r=a.state.selectedFinishConditionQty,l=parseInt(n);l>r&&(l=r),(isNaN(l)||l<0)&&(l=0),a.setState({quantityToSell:l})},a.handleSelectedFinishCondition=function(e,t){var n=t.value;a.setState({selectedFinishCondition:n,selectedFinishConditionQty:a.props.qoh[n],selectedFinish:n.split("_")[0]})},a.handlePriceChange=function(e,t){var n=t.value,r=Number(n);(isNaN(r)||r<0)&&(r=0),a.setState({price:r})},a.handleFocus=function(e){0===a.state[e]&&a.setState(Object(w.a)({},e,""))},a.handleBlur=function(e){""===a.state[e]&&a.setState(Object(w.a)({},e,0))},a.handleAddToSale=function(){var e=a.state,t=e.selectedFinishCondition,n=e.quantityToSell,r=e.price,l=a.props,c=l.qoh,o=l.id;a.props.addToSaleList(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a.props),t,n,r),a.setState({selectedFinishCondition:"",selectedFinishConditionQty:0,quantityToSell:0,price:0,conditionOptions:ie(c,o),selectedFinish:ue(c)}),C()("#searchBar").focus().select()},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.image_uris,l=t.set,c=t.set_name,o=t.rarity,s=t.qoh,i=t.id,u=t.card_faces,d=this.state,m=d.selectedFinishCondition,h=d.selectedFinishConditionQty,p=d.selectedFinish,f=d.conditionOptions,g=d.quantityToSell,b=d.price;return r.a.createElement(I.a,null,r.a.createElement(F.a.Group,{divided:!0},r.a.createElement(F.a,null,r.a.createElement(F.a.Image,{size:"tiny"},r.a.createElement(Y,{image_uris:n,card_faces:u})),r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,{as:"h3"},a," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(l," ss-").concat(o),style:{fontSize:"30px"}}),r.a.createElement(_.a,{color:"grey"},c," (",String(l).toUpperCase(),")"),r.a.createElement(R,{inventoryQty:s})," ",r.a.createElement(V,{id:i,finish:p})),r.a.createElement(F.a.Description,null,r.a.createElement(T.a,null,r.a.createElement(T.a.Group,null,r.a.createElement(T.a.Field,{control:oe.a,selection:!0,placeholder:"Select inventory",options:f,value:m,label:"Select finish/condition",onChange:this.handleSelectedFinishCondition}),r.a.createElement(T.a.Field,{control:x.a,type:"number",label:"Quantity to sell",value:g,onChange:this.handleQuantityChange,disabled:!h,onFocus:function(){return e.handleFocus("quantityToSell")},onBlur:function(){return e.handleBlur("quantityToSell")}}),r.a.createElement(T.a.Field,{control:x.a,type:"number",label:"Price",value:b,onChange:this.handlePriceChange,disabled:!h,onFocus:function(){return e.handleFocus("price")},onBlur:function(){return e.handleBlur("price")},step:.5}),r.a.createElement(T.a.Button,{label:"Add to sale?",control:N.a,primary:!0,onClick:this.handleAddToSale,disabled:!g},"Sell"))))))))}}]),t}(r.a.Component);function me(e){var t=e.cards,a=e.addToSaleList;return 0===t.length&&C()("#searchBar").focus().select(),t.map((function(e){return r.a.createElement(de,Object.assign({key:e.id},e,{addToSaleList:a}))}))}var he=function(e){var t=e.saleList,a=t.length?t.reduce((function(e,t){return e+parseInt(t.qtyToSell)*Number(t.price)}),0):0;return r.a.createElement(H,{num:a})};function pe(e){var t=e.name,a=e.set,n=e.finishCondition,l=e.qtyToSell,c=e.price,o=e.rarity,s=e.deleteLineItem,i=e.id;return r.a.createElement(I.a,null,r.a.createElement(F.a.Group,null,r.a.createElement(F.a,null,r.a.createElement(F.a.Content,null,r.a.createElement(F.a.Header,{as:"h4"},t," ",r.a.createElement("i",{className:"ss ss-fw ss-".concat(a," ss-").concat(o),style:{fontSize:"30px"}}),r.a.createElement(_.a,{color:"grey"},a.toUpperCase())),r.a.createElement(F.a.Meta,null,r.a.createElement("span",null,l,"x @ ",r.a.createElement(H,{num:c})," | ",n),r.a.createElement(N.a,{floated:"right",icon:!0,onClick:function(){return s(i,n)}},r.a.createElement(U.a,{name:"cancel"})))))))}var fe=function(e){var t=e.saleList,a=e.removeFromSaleList;return function(e){var t=["W","U","B","R","G","MULTI","COLORLESS","LAND"];function a(e){var t=null,a=null,n=null;try{a=e.colors.length,n=e}catch(r){try{a=e.card_faces[0].colors.length,n=e.card_faces[0]}catch(r){a=e.colors.length,n=e}}return 0===a?t="COLORLESS":1===a?t=n.colors[0]:a>1&&(t="MULTI"),"COLORLESS"===t&&n.type_line.includes("Land")&&(t="LAND"),t||(t="LAND"),t}return e.sort((function(e,t){return e.name.localeCompare(t.name)})).sort((function(e,n){return t.indexOf(a(e))-t.indexOf(a(n))}))}(t).map((function(e){return r.a.createElement(pe,Object.assign({},e,{key:"".concat(e.id).concat(e.finishCondition).concat(e.qtyToSell),deleteLineItem:a}))}))};function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var be={searchResults:[],saleListCards:[],showModal:!1,submitLoading:!1,searchTerm:""},Ee=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=be,a.handleResultSelect=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(S.GET_CARDS_BY_TITLE,{params:{title:t},headers:O()});case 3:n=e.sent,r=n.data,a.setState({searchResults:r,searchTerm:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a.addToSaleList=function(e,t,n,r){var l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(w.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{finishCondition:t,qtyToSell:n,price:r}),c=Object(ne.a)(a.state.saleListCards),o=c.findIndex((function(e){return e.id===l.id&&e.finishCondition===t}));-1!==o?c.splice(o,1,l):c.push(l),a.setState({saleListCards:c})},a.removeFromSaleList=function(e,t){var n=E.a.reject(Object(ne.a)(a.state.saleListCards),(function(a){return a.id===e&&a.finishCondition===t}));a.setState({saleListCards:n})},a.finalizeSale=Object(i.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({submitLoading:!0}),e.next=4,v.a.post(S.FINISH_SALE,{cards:a.state.saleListCards},{headers:O()});case 4:t=e.sent,n=t.data,r=n.sale_data.Sale.saleID,A({color:"green",header:"Sale created in Lightspeed!",message:"The id number is #".concat(r)}),a.setState(be),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),A({color:"red",header:"Error!",message:"Sale was not created"}),a.setState(be),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),a.closeModal=function(){a.setState({showModal:!1})},a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.searchResults,n=t.saleListCards,l=t.showModal,c=t.submitLoading,o=t.searchTerm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a.Row,{style:{display:"flex",alignItems:"center"}},r.a.createElement(j,{handleSearchSelect:this.handleResultSelect})),r.a.createElement("br",null),r.a.createElement(re.a,{stackable:!0},r.a.createElement(re.a.Row,null,r.a.createElement(re.a.Column,{width:"11"},r.a.createElement(te.a,{as:"h2"},"Inventory"),r.a.createElement(le.a,null),!a.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(te.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("span",null,o&&!a.length?r.a.createElement("p",null,"Zero results for ",r.a.createElement("em",null,o)):r.a.createElement("p",null,"Search for inventory to sell")))),r.a.createElement(me,{cards:a,addToSaleList:this.addToSaleList})),r.a.createElement(re.a.Column,{width:"5"},r.a.createElement(te.a,{as:"h2"},"Sale Items"),r.a.createElement(le.a,null),!n.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(te.a,{icon:!0},r.a.createElement(U.a,{name:"plus"}),"View and manage customer sale list here")),r.a.createElement(r.a.Fragment,null,r.a.createElement(fe,{removeFromSaleList:this.removeFromSaleList,saleList:n})),n.length>0&&r.a.createElement(I.a,{clearing:!0},r.a.createElement(te.a,{floated:"left"},r.a.createElement(te.a,{sub:!0},"Subtotal"),r.a.createElement(he,{saleList:n})),r.a.createElement(ce.a,{basic:!0,open:l,trigger:r.a.createElement(N.a,{floated:"right",primary:!0,onClick:function(){e.setState({showModal:!0})}},"Finalize sale")},r.a.createElement(ce.a.Content,null,r.a.createElement(te.a,{inverted:!0,as:"h2"},"Finalize this sale?"),r.a.createElement("p",null,"Click 'Yes' to create a sale in Lightspeed. Ensure that you have all cards pulled and double-checked the customer list. Undoing this action will require manual data entry!")),r.a.createElement(ce.a.Actions,null,r.a.createElement(N.a,{basic:!0,color:"red",inverted:!0,onClick:this.closeModal},r.a.createElement(U.a,{name:"remove"})," No"),r.a.createElement(N.a,{color:"green",inverted:!0,onClick:this.finalizeSale,loading:c},r.a.createElement(U.a,{name:"checkmark"})," Yes"))))))))}}]),t}(r.a.Component),ye=a(470),ve=a(252),Oe=a.n(ve),Se=function(e){var t=e.saleData,a=e.cardList.reduce((function(e,t){return e+t.qtyToSell}),0);return r.a.createElement(ye.a.Row,null,r.a.createElement(ye.a.Cell,null,t.saleID),r.a.createElement(ye.a.Cell,null,Oe()(t.createTime).format("MM/DD/YYYY - h:mm A")),r.a.createElement(ye.a.Cell,null,a))},Le=function(e){var t=e.list;return r.a.createElement(ye.a,{celled:!0,unstackable:!0,compact:!0},r.a.createElement(ye.a.Header,null,r.a.createElement(ye.a.Row,null,r.a.createElement(ye.a.HeaderCell,null,"Sale ID"),r.a.createElement(ye.a.HeaderCell,null,"Date of Sale"),r.a.createElement(ye.a.HeaderCell,null,"Quantity Sold"))),r.a.createElement(ye.a.Body,null,t.map((function(e){var t=e.sale_data,a=e.card_list,n=e._id;return r.a.createElement(Se,{saleData:t,cardList:a,key:n})}))))},Ce=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={salesList:[],cardName:""},a.handleSearchSelect=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(S.GET_SALES_BY_TITLE,{params:{cardName:t},headers:O()});case 2:n=e.sent,r=n.data,a.setState({salesList:r,cardName:t});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.salesList,a=e.cardName;return r.a.createElement("div",null,r.a.createElement(j,{handleSearchSelect:this.handleSearchSelect}),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("em",null,""!==a&&r.a.createElement("h4",null,t.length," results for ",a))),r.a.createElement(Le,{list:t}))}}]),t}(n.Component),je={position:"relative",display:"inline-block"},we={backgroundColor:"rgba(0,0,0,0.8)",padding:"9px 9px 9px 9px",zIndex:"1",borderRadius:"10px 10px 0 0",position:"absolute",width:"300px",bottom:"0"},Ie={display:"inline-block"},Fe={display:"inline-block",float:"right"},_e={borderRadius:"15px"},Te=function(e,t){try{return r.a.createElement(B.a,{src:e.normal,size:"medium",style:_e})}catch(a){return r.a.createElement(B.a,{src:t[0].image_uris.normal,size:"medium",style:_e})}};function xe(e){var t=e.image_uris,a=e.card_faces,n=e.qoh,l=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:je},Te(t,a),r.a.createElement("div",{style:we},r.a.createElement("div",{style:Ie},r.a.createElement(R,{inventoryQty:n})),r.a.createElement("div",{style:Fe},r.a.createElement(V,{id:l})))))}var ke={display:"flex",flexWrap:"wrap",alignContent:"space-evenly",height:"100%"};function Ne(e){var t=e.cards,a=e.addToSaleList;return r.a.createElement(re.a,{style:ke},t.map((function(e){return r.a.createElement(xe,Object.assign({key:e.id},e,{addToSaleList:a}))})))}var Re={searchResults:[],saleListCards:[],searchTerm:""},De=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Re,a.handleResultSelect=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get(S.GET_CARDS_BY_TITLE,{params:{title:t}});case 3:n=e.sent,r=n.data,a.setState({searchResults:r,searchTerm:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.searchResults,a=e.searchTerm;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a.Row,{style:{display:"flex",alignItems:"center"}},r.a.createElement(j,{handleSearchSelect:this.handleResultSelect})),r.a.createElement("br",null),r.a.createElement(re.a,{stackable:!0},r.a.createElement(re.a.Column,null,r.a.createElement(te.a,{as:"h2"},"Inventory Search",r.a.createElement(te.a.Subheader,null,r.a.createElement("em",null,"Card prices based on non-premium printings and are subject to change"))),r.a.createElement(le.a,null),!t.length&&r.a.createElement(I.a,{placeholder:!0},r.a.createElement(te.a,{icon:!0},r.a.createElement(U.a,{name:"search"}),r.a.createElement("span",null,a&&!t.length?r.a.createElement("p",null,r.a.createElement("em",null,a)," is out of stock"):r.a.createElement("p",null,"Search for a card")))),r.a.createElement(Ne,{cards:t,addToSaleList:this.addToSaleList}))))}}]),t}(r.a.Component),Pe={username:"",password:"",btnLoading:!1},Ae=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Pe,a.handleInputChange=function(e,t){var n=t.value;a.setState(Object(w.a)({},e.target.name,n))},a.login=Object(i.a)(s.a.mark((function e(){var t,n,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.username,r=t.password,a.setState({btnLoading:!0}),e.next=4,a.props.handleLogin(n,r);case 4:l=e.sent,l.authed?A({color:"green",header:"Success",message:"Enjoy your time here!"}):(a.setState(Pe),A({color:"red",header:"Error",message:"Username or password was incorrect"}));case 7:case"end":return e.stop()}}),e)}))),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.btnLoading;return this.props.loggedIn?r.a.createElement(f.a,{to:"/manage-inventory"}):r.a.createElement(T.a,null,r.a.createElement(T.a.Field,null,r.a.createElement(T.a.Input,{name:"username",placeholder:"Username",label:"Username",value:t,onChange:this.handleInputChange})),r.a.createElement(T.a.Field,null,r.a.createElement(T.a.Input,{name:"password",placeholder:"Password",type:"password",label:"Password",value:a,onChange:this.handleInputChange})),r.a.createElement(N.a,{type:"submit",onClick:this.login,disabled:!t||!a,loading:n},"Submit"))}}]),t}(r.a.Component),Be=a(465),qe=function(e){return e.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{fluid:!0},r.a.createElement(te.a,{as:"h3",color:"grey"},r.a.createElement("i",null,"Until we meet again, friend...")),r.a.createElement(N.a,{onClick:function(){return e.handleLogin("","")}},"Logout"))):r.a.createElement(f.a,{to:"/login"})};var Me=function(e){var t=e.handleLogin,a=e.loggedIn;return r.a.createElement("div",{style:{paddingTop:"52.63px",marginLeft:"20px",marginRight:"20px"}},r.a.createElement("br",null),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/manage-inventory",component:ae}),r.a.createElement(f.b,{exact:!0,path:"/new-sale",component:Ee}),r.a.createElement(f.b,{exact:!0,path:"/browse-sales",component:Ce}),r.a.createElement(f.b,{exact:!0,path:"/public-inventory",component:De}),r.a.createElement(f.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(Ae,{handleLogin:t,loggedIn:a})}}),r.a.createElement(f.b,{exact:!0,path:"/logout",render:function(){return r.a.createElement(qe,{handleLogin:t,loggedIn:a})}})))},Qe=a(255),Ye=a.n(Qe),Ge=a(472),He=a(39),Ue={background:"linear-gradient(#2185d0, #206ac6)",boxShadow:"0 3px 5px 0 rgba(0,0,0,.25)"},ze=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.loggedIn;return r.a.createElement(Ge.a,{inverted:!0,fixed:"top",style:Ue},r.a.createElement(Ge.a.Item,null,r.a.createElement("img",{src:Ye.a,style:{marginRight:"7px"},alt:"logo"}),r.a.createElement("span",null,r.a.createElement("h3",null,"Clubhouse Collection"))),r.a.createElement(Ge.a.Menu,{position:"right"},r.a.createElement(Ge.a.Item,{position:"right",as:He.b,to:"/public-inventory"},"Search"),e&&r.a.createElement(oe.a,{item:!0,icon:"bars"},r.a.createElement(oe.a.Menu,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a.Item,{as:He.b,to:"/manage-inventory"},r.a.createElement(U.a,{name:"plus",color:"blue"}),"Manage Inventory"),r.a.createElement(oe.a.Item,{as:He.b,to:"/new-sale"},r.a.createElement(U.a,{name:"dollar sign",color:"blue"}),"New Sale"),r.a.createElement(oe.a.Item,{as:He.b,to:"/browse-sales"},r.a.createElement(U.a,{name:"eye",color:"blue"}),"Browse Sales"),r.a.createElement(oe.a.Item,{as:He.b,to:"/logout"},r.a.createElement(U.a,{name:"log out",color:"blue"}),"Logout")))),!e&&r.a.createElement(Ge.a.Item,{position:"right",as:He.b,to:"/login"},"Log in")))}}]),t}(r.a.Component),Ve=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!!localStorage.getItem("clubhouse_JWT")},a.handleLogin=function(){var e=Object(i.a)(s.a.mark((function e(t,n){var r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post(S.LOGIN,{username:t.toLowerCase(),password:n},{headers:O()});case 3:if(r=e.sent,!(l=r.data).token){e.next=11;break}return localStorage.setItem("clubhouse_JWT",l.token),a.setState({loggedIn:!!localStorage.getItem("clubhouse_JWT")}),e.abrupt("return",{authed:!0});case 11:return localStorage.clear(),a.setState({loggedIn:!!localStorage.getItem("clubhouse_JWT")}),e.abrupt("return",{authed:!1});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ze,{loggedIn:this.state.loggedIn}),r.a.createElement(Me,{handleLogin:this.handleLogin,loggedIn:this.state.loggedIn}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(453);c.a.render(r.a.createElement(He.a,{basename:"/"},r.a.createElement(Ve,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[268,1,2]]]);
//# sourceMappingURL=main.a4b4bc61.chunk.js.map